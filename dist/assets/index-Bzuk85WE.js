(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function ZI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zy={exports:{}},lh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function pD(){if(fT)return lh;fT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var h in s)h!=="key"&&(o[h]=s[h])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:u,ref:s!==void 0?s:null,props:o}}return lh.Fragment=e,lh.jsx=t,lh.jsxs=t,lh}var mT;function gD(){return mT||(mT=1,zy.exports=pD()),zy.exports}var k=gD(),Fy={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pT;function yD(){if(pT)return Ke;pT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,j={};function U(L,W,ce){this.props=L,this.context=W,this.refs=j,this.updater=ce||R}U.prototype.isReactComponent={},U.prototype.setState=function(L,W){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,W,"setState")},U.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function B(){}B.prototype=U.prototype;function te(L,W,ce){this.props=L,this.context=W,this.refs=j,this.updater=ce||R}var K=te.prototype=new B;K.constructor=te,N(K,U.prototype),K.isPureReactComponent=!0;var ue=Array.isArray,ie={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function O(L,W,ce,Z,fe,ve){return ce=ve.ref,{$$typeof:n,type:L,key:W,ref:ce!==void 0?ce:null,props:ve}}function T(L,W){return O(L.type,W,void 0,void 0,void 0,L.props)}function w(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function I(L){var W={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ce){return W[ce]})}var D=/\/+/g;function M(L,W){return typeof L=="object"&&L!==null&&L.key!=null?I(""+L.key):W.toString(36)}function C(){}function ke(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(C,C):(L.status="pending",L.then(function(W){L.status==="pending"&&(L.status="fulfilled",L.value=W)},function(W){L.status==="pending"&&(L.status="rejected",L.reason=W)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Ue(L,W,ce,Z,fe){var ve=typeof L;(ve==="undefined"||ve==="boolean")&&(L=null);var we=!1;if(L===null)we=!0;else switch(ve){case"bigint":case"string":case"number":we=!0;break;case"object":switch(L.$$typeof){case n:case e:we=!0;break;case y:return we=L._init,Ue(we(L._payload),W,ce,Z,fe)}}if(we)return fe=fe(L),we=Z===""?"."+M(L,0):Z,ue(fe)?(ce="",we!=null&&(ce=we.replace(D,"$&/")+"/"),Ue(fe,W,ce,"",function(Se){return Se})):fe!=null&&(w(fe)&&(fe=T(fe,ce+(fe.key==null||L&&L.key===fe.key?"":(""+fe.key).replace(D,"$&/")+"/")+we)),W.push(fe)),1;we=0;var Be=Z===""?".":Z+":";if(ue(L))for(var be=0;be<L.length;be++)Z=L[be],ve=Be+M(Z,be),we+=Ue(Z,W,ce,ve,fe);else if(be=x(L),typeof be=="function")for(L=be.call(L),be=0;!(Z=L.next()).done;)Z=Z.value,ve=Be+M(Z,be++),we+=Ue(Z,W,ce,ve,fe);else if(ve==="object"){if(typeof L.then=="function")return Ue(ke(L),W,ce,Z,fe);throw W=String(L),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return we}function re(L,W,ce){if(L==null)return L;var Z=[],fe=0;return Ue(L,Z,"","",function(ve){return W.call(ce,ve,fe++)}),Z}function me(L){if(L._status===-1){var W=L._result;W=W(),W.then(function(ce){(L._status===0||L._status===-1)&&(L._status=1,L._result=ce)},function(ce){(L._status===0||L._status===-1)&&(L._status=2,L._result=ce)}),L._status===-1&&(L._status=0,L._result=W)}if(L._status===1)return L._result.default;throw L._result}var he=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function pe(){}return Ke.Children={map:re,forEach:function(L,W,ce){re(L,function(){W.apply(this,arguments)},ce)},count:function(L){var W=0;return re(L,function(){W++}),W},toArray:function(L){return re(L,function(W){return W})||[]},only:function(L){if(!w(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ke.Component=U,Ke.Fragment=t,Ke.Profiler=s,Ke.PureComponent=te,Ke.StrictMode=r,Ke.Suspense=d,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,Ke.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ke.cache=function(L){return function(){return L.apply(null,arguments)}},Ke.cloneElement=function(L,W,ce){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var Z=N({},L.props),fe=L.key,ve=void 0;if(W!=null)for(we in W.ref!==void 0&&(ve=void 0),W.key!==void 0&&(fe=""+W.key),W)!J.call(W,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&W.ref===void 0||(Z[we]=W[we]);var we=arguments.length-2;if(we===1)Z.children=ce;else if(1<we){for(var Be=Array(we),be=0;be<we;be++)Be[be]=arguments[be+2];Z.children=Be}return O(L.type,fe,void 0,void 0,ve,Z)},Ke.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Ke.createElement=function(L,W,ce){var Z,fe={},ve=null;if(W!=null)for(Z in W.key!==void 0&&(ve=""+W.key),W)J.call(W,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(fe[Z]=W[Z]);var we=arguments.length-2;if(we===1)fe.children=ce;else if(1<we){for(var Be=Array(we),be=0;be<we;be++)Be[be]=arguments[be+2];fe.children=Be}if(L&&L.defaultProps)for(Z in we=L.defaultProps,we)fe[Z]===void 0&&(fe[Z]=we[Z]);return O(L,ve,void 0,void 0,null,fe)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(L){return{$$typeof:h,render:L}},Ke.isValidElement=w,Ke.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:me}},Ke.memo=function(L,W){return{$$typeof:p,type:L,compare:W===void 0?null:W}},Ke.startTransition=function(L){var W=ie.T,ce={};ie.T=ce;try{var Z=L(),fe=ie.S;fe!==null&&fe(ce,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(pe,he)}catch(ve){he(ve)}finally{ie.T=W}},Ke.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},Ke.use=function(L){return ie.H.use(L)},Ke.useActionState=function(L,W,ce){return ie.H.useActionState(L,W,ce)},Ke.useCallback=function(L,W){return ie.H.useCallback(L,W)},Ke.useContext=function(L){return ie.H.useContext(L)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(L,W){return ie.H.useDeferredValue(L,W)},Ke.useEffect=function(L,W){return ie.H.useEffect(L,W)},Ke.useId=function(){return ie.H.useId()},Ke.useImperativeHandle=function(L,W,ce){return ie.H.useImperativeHandle(L,W,ce)},Ke.useInsertionEffect=function(L,W){return ie.H.useInsertionEffect(L,W)},Ke.useLayoutEffect=function(L,W){return ie.H.useLayoutEffect(L,W)},Ke.useMemo=function(L,W){return ie.H.useMemo(L,W)},Ke.useOptimistic=function(L,W){return ie.H.useOptimistic(L,W)},Ke.useReducer=function(L,W,ce){return ie.H.useReducer(L,W,ce)},Ke.useRef=function(L){return ie.H.useRef(L)},Ke.useState=function(L){return ie.H.useState(L)},Ke.useSyncExternalStore=function(L,W,ce){return ie.H.useSyncExternalStore(L,W,ce)},Ke.useTransition=function(){return ie.H.useTransition()},Ke.version="19.0.0",Ke}var gT;function d0(){return gT||(gT=1,Fy.exports=yD()),Fy.exports}var P=d0();const gs=ZI(P);var By={exports:{}},uh={},qy={exports:{}},Hy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function _D(){return yT||(yT=1,function(n){function e(re,me){var he=re.length;re.push(me);e:for(;0<he;){var pe=he-1>>>1,L=re[pe];if(0<s(L,me))re[pe]=me,re[he]=L,he=pe;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var me=re[0],he=re.pop();if(he!==me){re[0]=he;e:for(var pe=0,L=re.length,W=L>>>1;pe<W;){var ce=2*(pe+1)-1,Z=re[ce],fe=ce+1,ve=re[fe];if(0>s(Z,he))fe<L&&0>s(ve,Z)?(re[pe]=ve,re[fe]=he,pe=fe):(re[pe]=Z,re[ce]=he,pe=ce);else if(fe<L&&0>s(ve,he))re[pe]=ve,re[fe]=he,pe=fe;else break e}}return me}function s(re,me){var he=re.sortIndex-me.sortIndex;return he!==0?he:re.id-me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var d=[],p=[],y=1,v=null,x=3,R=!1,N=!1,j=!1,U=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function K(re){for(var me=t(p);me!==null;){if(me.callback===null)r(p);else if(me.startTime<=re)r(p),me.sortIndex=me.expirationTime,e(d,me);else break;me=t(p)}}function ue(re){if(j=!1,K(re),!N)if(t(d)!==null)N=!0,ke();else{var me=t(p);me!==null&&Ue(ue,me.startTime-re)}}var ie=!1,J=-1,O=5,T=-1;function w(){return!(n.unstable_now()-T<O)}function I(){if(ie){var re=n.unstable_now();T=re;var me=!0;try{e:{N=!1,j&&(j=!1,B(J),J=-1),R=!0;var he=x;try{t:{for(K(re),v=t(d);v!==null&&!(v.expirationTime>re&&w());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,x=v.priorityLevel;var L=pe(v.expirationTime<=re);if(re=n.unstable_now(),typeof L=="function"){v.callback=L,K(re),me=!0;break t}v===t(d)&&r(d),K(re)}else r(d);v=t(d)}if(v!==null)me=!0;else{var W=t(p);W!==null&&Ue(ue,W.startTime-re),me=!1}}break e}finally{v=null,x=he,R=!1}me=void 0}}finally{me?D():ie=!1}}}var D;if(typeof te=="function")D=function(){te(I)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,C=M.port2;M.port1.onmessage=I,D=function(){C.postMessage(null)}}else D=function(){U(I,0)};function ke(){ie||(ie=!0,D())}function Ue(re,me){J=U(function(){re(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){N||R||(N=!0,ke())},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(re){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var he=x;x=me;try{return re()}finally{x=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var he=x;x=re;try{return me()}finally{x=he}},n.unstable_scheduleCallback=function(re,me,he){var pe=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?pe+he:pe):he=pe,re){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=he+L,re={id:y++,callback:me,priorityLevel:re,startTime:he,expirationTime:L,sortIndex:-1},he>pe?(re.sortIndex=he,e(p,re),t(d)===null&&re===t(p)&&(j?(B(J),J=-1):j=!0,Ue(ue,he-pe))):(re.sortIndex=L,e(d,re),N||R||(N=!0,ke())),re},n.unstable_shouldYield=w,n.unstable_wrapCallback=function(re){var me=x;return function(){var he=x;x=me;try{return re.apply(this,arguments)}finally{x=he}}}}(Hy)),Hy}var _T;function vD(){return _T||(_T=1,qy.exports=_D()),qy.exports}var Gy={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT;function bD(){if(vT)return $n;vT=1;var n=d0();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:d,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,$n.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(d,p,null,y)},$n.flushSync=function(d){var p=u.T,y=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=p,r.p=y,r.d.f()}},$n.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},$n.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},$n.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:R}):y==="script"&&r.d.X(d,{crossOrigin:v,integrity:x,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},$n.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},$n.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin);r.d.L(d,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},$n.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=h(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},$n.requestFormReset=function(d){r.d.r(d)},$n.unstable_batchedUpdates=function(d,p){return d(p)},$n.useFormState=function(d,p,y){return u.H.useFormState(d,p,y)},$n.useFormStatus=function(){return u.H.useHostTransitionStatus()},$n.version="19.0.0",$n}var bT;function ED(){if(bT)return Gy.exports;bT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gy.exports=bD(),Gy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET;function wD(){if(ET)return uh;ET=1;var n=vD(),e=d0(),t=ED();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),ue=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var O=Symbol.for("react.client.reference");function T(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===O?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case d:return"Fragment";case h:return"Portal";case y:return"Profiler";case p:return"StrictMode";case j:return"Suspense";case U:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case R:return(i.displayName||"Context")+".Provider";case x:return(i._context.displayName||"Context")+".Consumer";case N:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return a=i.displayName||null,a!==null?a:T(i.type)||"Memo";case te:a=i._payload,i=i._init;try{return T(i(a))}catch{}}return null}var w=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,D,M;function C(i){if(D===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);D=a&&a[1]||"",M=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+D+i+M}var ke=!1;function Ue(i,a){if(!i||ke)return"";ke=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var Q=ee}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(ee){Q=ee}i.call(oe.prototype)}}else{try{throw Error()}catch(ee){Q=ee}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&Q&&typeof ee.stack=="string")return[ee.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),E=g[0],A=g[1];if(E&&A){var V=E.split(`
`),F=A.split(`
`);for(m=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;m<F.length&&!F[m].includes("DetermineComponentFrameRoot");)m++;if(c===V.length||m===F.length)for(c=V.length-1,m=F.length-1;1<=c&&0<=m&&V[c]!==F[m];)m--;for(;1<=c&&0<=m;c--,m--)if(V[c]!==F[m]){if(c!==1||m!==1)do if(c--,m--,0>m||V[c]!==F[m]){var ne=`
`+V[c].replace(" at new "," at ");return i.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",i.displayName)),ne}while(1<=c&&0<=m);break}}}finally{ke=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?C(l):""}function re(i){switch(i.tag){case 26:case 27:case 5:return C(i.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 15:return i=Ue(i.type,!1),i;case 11:return i=Ue(i.type.render,!1),i;case 1:return i=Ue(i.type,!0),i;default:return""}}function me(i){try{var a="";do a+=re(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function he(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function pe(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function L(i){if(he(i)!==i)throw Error(r(188))}function W(i){var a=i.alternate;if(!a){if(a=he(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,c=a;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){l=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return L(m),i;if(g===c)return L(m),a;g=g.sibling}throw Error(r(188))}if(l.return!==c.return)l=m,c=g;else{for(var E=!1,A=m.child;A;){if(A===l){E=!0,l=m,c=g;break}if(A===c){E=!0,c=m,l=g;break}A=A.sibling}if(!E){for(A=g.child;A;){if(A===l){E=!0,l=g,c=m;break}if(A===c){E=!0,c=g,l=m;break}A=A.sibling}if(!E)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function ce(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=ce(i),a!==null)return a;i=i.sibling}return null}var Z=Array.isArray,fe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},we=[],Be=-1;function be(i){return{current:i}}function Se(i){0>Be||(i.current=we[Be],we[Be]=null,Be--)}function De(i,a){Be++,we[Be]=i.current,i.current=a}var Pe=be(null),Oe=be(null),nt=be(null),We=be(null);function Ge(i,a){switch(De(nt,a),De(Oe,i),De(Pe,null),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?Bw(a):0;break;default:if(i=i===8?a.parentNode:a,a=i.tagName,i=i.namespaceURI)i=Bw(i),a=qw(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Se(Pe),De(Pe,a)}function Me(){Se(Pe),Se(Oe),Se(nt)}function It(i){i.memoizedState!==null&&De(We,i);var a=Pe.current,l=qw(a,i.type);a!==l&&(De(Oe,i),De(Pe,l))}function ze(i){Oe.current===i&&(Se(Pe),Se(Oe)),We.current===i&&(Se(We),rh._currentValue=ve)}var rt=Object.prototype.hasOwnProperty,_t=n.unstable_scheduleCallback,Pn=n.unstable_cancelCallback,En=n.unstable_shouldYield,Zn=n.unstable_requestPaint,it=n.unstable_now,hn=n.unstable_getCurrentPriorityLevel,qe=n.unstable_ImmediatePriority,Ye=n.unstable_UserBlockingPriority,Lt=n.unstable_NormalPriority,Cr=n.unstable_LowPriority,Dr=n.unstable_IdlePriority,ht=n.log,rn=n.unstable_setDisableYieldValue,dt=null,at=null;function Gn(i){if(at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(dt,i,void 0,(i.current.flags&128)===128)}catch{}}function kn(i){if(typeof ht=="function"&&rn(i),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(dt,i)}catch{}}var dn=Math.clz32?Math.clz32:Xa,Ns=Math.log,Ya=Math.LN2;function Xa(i){return i>>>=0,i===0?32:31-(Ns(i)/Ya|0)|0}var gr=128,Wr=4194304;function ur(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Jn(i,a){var l=i.pendingLanes;if(l===0)return 0;var c=0,m=i.suspendedLanes,g=i.pingedLanes,E=i.warmLanes;i=i.finishedLanes!==0;var A=l&134217727;return A!==0?(l=A&~m,l!==0?c=ur(l):(g&=A,g!==0?c=ur(g):i||(E=A&~E,E!==0&&(c=ur(E))))):(A=l&~m,A!==0?c=ur(A):g!==0?c=ur(g):i||(E=l&~E,E!==0&&(c=ur(E)))),c===0?0:a!==0&&a!==c&&(a&m)===0&&(m=c&-c,E=a&-a,m>=E||m===32&&(E&4194176)!==0)?a:c}function Yr(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function zi(i,a){switch(i){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ps(){var i=gr;return gr<<=1,(gr&4194176)===0&&(gr=128),i}function Xr(){var i=Wr;return Wr<<=1,(Wr&62914560)===0&&(Wr=4194304),i}function Fi(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Nt(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Za(i,a,l,c,m,g){var E=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var A=i.entanglements,V=i.expirationTimes,F=i.hiddenUpdates;for(l=E&~l;0<l;){var ne=31-dn(l),oe=1<<ne;A[ne]=0,V[ne]=-1;var Q=F[ne];if(Q!==null)for(F[ne]=null,ne=0;ne<Q.length;ne++){var ee=Q[ne];ee!==null&&(ee.lane&=-536870913)}l&=~oe}c!==0&&ks(i,c,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(E&~a))}function ks(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-dn(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|l&4194218}function Os(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var c=31-dn(l),m=1<<c;m&a|i[c]&a&&(i[c]|=a),l&=~m}}function Vd(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Md(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:oT(i.type))}function Vs(i,a){var l=fe.p;try{return fe.p=i,a()}finally{fe.p=l}}var ui=Math.random().toString(36).slice(2),wn="__reactFiber$"+ui,fn="__reactProps$"+ui,Bi="__reactContainer$"+ui,Ja="__reactEvents$"+ui,gl="__reactListeners$"+ui,ci="__reactHandles$"+ui,uc="__reactResources$"+ui,Ms="__reactMarker$"+ui;function eo(i){delete i[wn],delete i[fn],delete i[Ja],delete i[gl],delete i[ci]}function Zr(i){var a=i[wn];if(a)return a;for(var l=i.parentNode;l;){if(a=l[Bi]||l[wn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=Kw(i);i!==null;){if(l=i[wn])return l;i=Kw(i)}return a}i=l,l=i.parentNode}return null}function qi(i){if(i=i[wn]||i[Bi]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Ls(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Us(i){var a=i[uc];return a||(a=i[uc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ut(i){i[Ms]=!0}var cc=new Set,yl={};function yr(i,a){cr(i,a),cr(i+"Capture",a)}function cr(i,a){for(yl[i]=a,i=0;i<a.length;i++)cc.add(a[i])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hc={},dc={};function Ld(i){return rt.call(dc,i)?!0:rt.call(hc,i)?!1:Hp.test(i)?dc[i]=!0:(hc[i]=!0,!1)}function js(i,a,l){if(Ld(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function zs(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Nr(i,a,l,c){if(c===null)i.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+c)}}function er(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ud(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Gp(i){var a=Ud(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),c=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(E){c=""+E,g.call(this,E)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function to(i){i._valueTracker||(i._valueTracker=Gp(i))}function fc(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return i&&(c=Ud(i)?i.checked?"true":"false":i.value),i=c,i!==l?(a.setValue(i),!0):!1}function _l(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Hi=/[\n"\\]/g;function Kt(i){return i.replace(Hi,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Fs(i,a,l,c,m,g,E,A){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),a!=null?E==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+er(a)):i.value!==""+er(a)&&(i.value=""+er(a)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),a!=null?vl(i,E,er(a)):l!=null?vl(i,E,er(l)):c!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+er(A):i.removeAttribute("name")}function no(i,a,l,c,m,g,E,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;l=l!=null?""+er(l):"",a=a!=null?""+er(a):l,A||a===i.value||(i.value=a),i.defaultValue=a}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=A?i.checked:!!c,i.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E)}function vl(i,a,l){a==="number"&&_l(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ft(i,a,l,c){if(i=i.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<i.length;l++)m=a.hasOwnProperty("$"+i[l].value),i[l].selected!==m&&(i[l].selected=m),m&&c&&(i[l].defaultSelected=!0)}else{for(l=""+er(l),a=null,m=0;m<i.length;m++){if(i[m].value===l){i[m].selected=!0,c&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function ro(i,a,l){if(a!=null&&(a=""+er(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+er(l):""}function Bs(i,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(Z(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=er(a),i.defaultValue=l,c=i.textContent,c===l&&c!==""&&c!==null&&(i.value=c)}function Pr(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Kp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mc(i,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,l):typeof l!="number"||l===0||Kp.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function jd(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var m in a)c=a[m],a.hasOwnProperty(m)&&l[m]!==c&&mc(i,m,c)}else for(var g in a)a.hasOwnProperty(g)&&mc(i,g,a[g])}function pc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $p=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hi(i){return Qp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var kr=null;function bl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gi=null,Ki=null;function $i(i){var a=qi(i);if(a&&(i=a.stateNode)){var l=i[fn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Fs(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Kt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==i&&c.form===i.form){var m=c[fn]||null;if(!m)throw Error(r(90));Fs(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===i.form&&fc(c)}break e;case"textarea":ro(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ft(i,!!l.multiple,a,!1)}}}var gc=!1;function zd(i,a,l){if(gc)return i(a,l);gc=!0;try{var c=i(a);return c}finally{if(gc=!1,(Gi!==null||Ki!==null)&&(Pf(),Gi&&(a=Gi,i=Ki,Ki=Gi=null,$i(a),i)))for(a=0;a<i.length;a++)$i(i[a])}}function io(i,a){var l=i.stateNode;if(l===null)return null;var c=l[fn]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Or=!1;if(_r)try{var so={};Object.defineProperty(so,"passive",{get:function(){Or=!0}}),window.addEventListener("test",so,so),window.removeEventListener("test",so,so)}catch{Or=!1}var di=null,qs=null,Qi=null;function yc(){if(Qi)return Qi;var i,a=qs,l=a.length,c,m="value"in di?di.value:di.textContent,g=m.length;for(i=0;i<l&&a[i]===m[i];i++);var E=l-i;for(c=1;c<=E&&a[l-c]===m[g-c];c++);return Qi=m.slice(i,1<c?1-c:void 0)}function fi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function mi(){return!0}function _c(){return!1}function Tn(i){function a(l,c,m,g,E){this._reactName=l,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(l=i[A],this[A]=l?l(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?mi:_c,this.isPropagationStopped=_c,this}return I(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),a}var vt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},El=Tn(vt),ao=I({},vt,{view:0,detail:0}),Fd=Tn(ao),wl,Tl,pi,oo=I({},ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:co,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==pi&&(pi&&i.type==="mousemove"?(wl=i.screenX-pi.screenX,Tl=i.screenY-pi.screenY):Tl=wl=0,pi=i),wl)},movementY:function(i){return"movementY"in i?i.movementY:Tl}}),Vr=Tn(oo),Bd=I({},oo,{dataTransfer:0}),Wp=Tn(Bd),lo=I({},ao,{relatedTarget:0}),xl=Tn(lo),vc=I({},vt,{animationName:0,elapsedTime:0,pseudoElement:0}),Il=Tn(vc),qd=I({},vt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Al=Tn(qd),Yp=I({},vt,{data:0}),bc=Tn(Yp),uo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ec(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Gd[i])?!!a[i]:!1}function co(){return Ec}var Kd=I({},ao,{key:function(i){if(i.key){var a=uo[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=fi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Hd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:co,charCode:function(i){return i.type==="keypress"?fi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?fi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Sl=Tn(Kd),$d=I({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wc=Tn($d),Wi=I({},ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:co}),Qd=Tn(Wi),Wd=I({},vt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yd=Tn(Wd),Xd=I({},oo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Rl=Tn(Xd),tr=I({},vt,{newState:0,oldState:0}),Zd=Tn(tr),Jd=[9,13,27,32],gi=_r&&"CompositionEvent"in window,f=null;_r&&"documentMode"in document&&(f=document.documentMode);var _=_r&&"TextEvent"in window&&!f,b=_r&&(!gi||f&&8<f&&11>=f),S=" ",H=!1;function X(i,a){switch(i){case"keyup":return Jd.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ge(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ot=!1;function mn(i,a){switch(i){case"compositionend":return ge(a);case"keypress":return a.which!==32?null:(H=!0,S);case"textInput":return i=a.data,i===S&&H?null:i;default:return null}}function lt(i,a){if(ot)return i==="compositionend"||!gi&&X(i,a)?(i=yc(),Qi=qs=di=null,ot=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return b&&a.locale!=="ko"?null:a.data;default:return null}}var xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!xn[i.type]:a==="textarea"}function Yi(i,a,l,c){Gi?Ki?Ki.push(c):Ki=[c]:Gi=c,a=Lf(a,"onChange"),0<a.length&&(l=new El("onChange","change",null,l,c),i.push({event:l,listeners:a}))}var On=null,yi=null;function Tc(i){Lw(i,0)}function ef(i){var a=Ls(i);if(fc(a))return i}function db(i,a){if(i==="change")return a}var fb=!1;if(_r){var Xp;if(_r){var Zp="oninput"in document;if(!Zp){var mb=document.createElement("div");mb.setAttribute("oninput","return;"),Zp=typeof mb.oninput=="function"}Xp=Zp}else Xp=!1;fb=Xp&&(!document.documentMode||9<document.documentMode)}function pb(){On&&(On.detachEvent("onpropertychange",gb),yi=On=null)}function gb(i){if(i.propertyName==="value"&&ef(yi)){var a=[];Yi(a,yi,i,bl(i)),zd(Tc,a)}}function GC(i,a,l){i==="focusin"?(pb(),On=a,yi=l,On.attachEvent("onpropertychange",gb)):i==="focusout"&&pb()}function KC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ef(yi)}function $C(i,a){if(i==="click")return ef(a)}function QC(i,a){if(i==="input"||i==="change")return ef(a)}function WC(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var vr=typeof Object.is=="function"?Object.is:WC;function xc(i,a){if(vr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var m=l[c];if(!rt.call(a,m)||!vr(i[m],a[m]))return!1}return!0}function yb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function _b(i,a){var l=yb(i);i=0;for(var c;l;){if(l.nodeType===3){if(c=i+l.textContent.length,i<=a&&c>=a)return{node:l,offset:a-i};i=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=yb(l)}}function vb(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?vb(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function bb(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=_l(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=_l(i.document)}return a}function Jp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function YC(i,a){var l=bb(a);a=i.focusedElem;var c=i.selectionRange;if(l!==a&&a&&a.ownerDocument&&vb(a.ownerDocument.documentElement,a)){if(c!==null&&Jp(a)){if(i=c.start,l=c.end,l===void 0&&(l=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(l,a.value.length);else if(l=(i=a.ownerDocument||document)&&i.defaultView||window,l.getSelection){l=l.getSelection();var m=a.textContent.length,g=Math.min(c.start,m);c=c.end===void 0?g:Math.min(c.end,m),!l.extend&&g>c&&(m=c,c=g,g=m),m=_b(a,g);var E=_b(a,c);m&&E&&(l.rangeCount!==1||l.anchorNode!==m.node||l.anchorOffset!==m.offset||l.focusNode!==E.node||l.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(m.node,m.offset),l.removeAllRanges(),g>c?(l.addRange(i),l.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),l.addRange(i)))}}for(i=[],l=a;l=l.parentNode;)l.nodeType===1&&i.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)l=i[a],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var XC=_r&&"documentMode"in document&&11>=document.documentMode,Cl=null,eg=null,Ic=null,tg=!1;function Eb(i,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;tg||Cl==null||Cl!==_l(c)||(c=Cl,"selectionStart"in c&&Jp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ic&&xc(Ic,c)||(Ic=c,c=Lf(eg,"onSelect"),0<c.length&&(a=new El("onSelect","select",null,a,l),i.push({event:a,listeners:c}),a.target=Cl)))}function ho(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Dl={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},ng={},wb={};_r&&(wb=document.createElement("div").style,"AnimationEvent"in window||(delete Dl.animationend.animation,delete Dl.animationiteration.animation,delete Dl.animationstart.animation),"TransitionEvent"in window||delete Dl.transitionend.transition);function fo(i){if(ng[i])return ng[i];if(!Dl[i])return i;var a=Dl[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in wb)return ng[i]=a[l];return i}var Tb=fo("animationend"),xb=fo("animationiteration"),Ib=fo("animationstart"),ZC=fo("transitionrun"),JC=fo("transitionstart"),e2=fo("transitioncancel"),Ab=fo("transitionend"),Sb=new Map,Rb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Jr(i,a){Sb.set(i,a),yr(a,[i])}var Mr=[],Nl=0,rg=0;function tf(){for(var i=Nl,a=rg=Nl=0;a<i;){var l=Mr[a];Mr[a++]=null;var c=Mr[a];Mr[a++]=null;var m=Mr[a];Mr[a++]=null;var g=Mr[a];if(Mr[a++]=null,c!==null&&m!==null){var E=c.pending;E===null?m.next=m:(m.next=E.next,E.next=m),c.pending=m}g!==0&&Cb(l,m,g)}}function nf(i,a,l,c){Mr[Nl++]=i,Mr[Nl++]=a,Mr[Nl++]=l,Mr[Nl++]=c,rg|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function ig(i,a,l,c){return nf(i,a,l,c),rf(i)}function Hs(i,a){return nf(i,null,null,a),rf(i)}function Cb(i,a,l){i.lanes|=l;var c=i.alternate;c!==null&&(c.lanes|=l);for(var m=!1,g=i.return;g!==null;)g.childLanes|=l,c=g.alternate,c!==null&&(c.childLanes|=l),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;m&&a!==null&&i.tag===3&&(g=i.stateNode,m=31-dn(l),g=g.hiddenUpdates,i=g[m],i===null?g[m]=[a]:i.push(a),a.lane=l|536870912)}function rf(i){if(50<Yc)throw Yc=0,cy=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Pl={},Db=new WeakMap;function Lr(i,a){if(typeof i=="object"&&i!==null){var l=Db.get(i);return l!==void 0?l:(a={value:i,source:a,stack:me(a)},Db.set(i,a),a)}return{value:i,source:a,stack:me(a)}}var kl=[],Ol=0,sf=null,af=0,Ur=[],jr=0,mo=null,Xi=1,Zi="";function po(i,a){kl[Ol++]=af,kl[Ol++]=sf,sf=i,af=a}function Nb(i,a,l){Ur[jr++]=Xi,Ur[jr++]=Zi,Ur[jr++]=mo,mo=i;var c=Xi;i=Zi;var m=32-dn(c)-1;c&=~(1<<m),l+=1;var g=32-dn(a)+m;if(30<g){var E=m-m%5;g=(c&(1<<E)-1).toString(32),c>>=E,m-=E,Xi=1<<32-dn(a)+m|l<<m|c,Zi=g+i}else Xi=1<<g|l<<m|c,Zi=i}function sg(i){i.return!==null&&(po(i,1),Nb(i,1,0))}function ag(i){for(;i===sf;)sf=kl[--Ol],kl[Ol]=null,af=kl[--Ol],kl[Ol]=null;for(;i===mo;)mo=Ur[--jr],Ur[jr]=null,Zi=Ur[--jr],Ur[jr]=null,Xi=Ur[--jr],Ur[jr]=null}var nr=null,Vn=null,mt=!1,ei=null,_i=!1,og=Error(r(519));function go(i){var a=Error(r(418,""));throw Rc(Lr(a,i)),og}function Pb(i){var a=i.stateNode,l=i.type,c=i.memoizedProps;switch(a[wn]=i,a[fn]=c,l){case"dialog":st("cancel",a),st("close",a);break;case"iframe":case"object":case"embed":st("load",a);break;case"video":case"audio":for(l=0;l<Zc.length;l++)st(Zc[l],a);break;case"source":st("error",a);break;case"img":case"image":case"link":st("error",a),st("load",a);break;case"details":st("toggle",a);break;case"input":st("invalid",a),no(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),to(a);break;case"select":st("invalid",a);break;case"textarea":st("invalid",a),Bs(a,c.value,c.defaultValue,c.children),to(a)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||Fw(a.textContent,l)?(c.popover!=null&&(st("beforetoggle",a),st("toggle",a)),c.onScroll!=null&&st("scroll",a),c.onScrollEnd!=null&&st("scrollend",a),c.onClick!=null&&(a.onclick=Uf),a=!0):a=!1,a||go(i)}function kb(i){for(nr=i.return;nr;)switch(nr.tag){case 3:case 27:_i=!0;return;case 5:case 13:_i=!1;return;default:nr=nr.return}}function Ac(i){if(i!==nr)return!1;if(!mt)return kb(i),mt=!0,!1;var a=!1,l;if((l=i.tag!==3&&i.tag!==27)&&((l=i.tag===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Sy(i.type,i.memoizedProps)),l=!l),l&&(a=!0),a&&Vn&&go(i),kb(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){Vn=ni(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}Vn=null}}else Vn=nr?ni(i.stateNode.nextSibling):null;return!0}function Sc(){Vn=nr=null,mt=!1}function Rc(i){ei===null?ei=[i]:ei.push(i)}var Cc=Error(r(460)),Ob=Error(r(474)),lg={then:function(){}};function Vb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function of(){}function Mb(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(of,of),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===Cc?Error(r(483)):i;default:if(typeof a.status=="string")a.then(of,of);else{if(i=At,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=c}},function(c){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===Cc?Error(r(483)):i}throw Dc=a,Cc}}var Dc=null;function Lb(){if(Dc===null)throw Error(r(459));var i=Dc;return Dc=null,i}var Vl=null,Nc=0;function lf(i){var a=Nc;return Nc+=1,Vl===null&&(Vl=[]),Mb(Vl,i,a)}function Pc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function uf(i,a){throw a.$$typeof===o?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Ub(i){var a=i._init;return a(i._payload)}function jb(i){function a(q,z){if(i){var $=q.deletions;$===null?(q.deletions=[z],q.flags|=16):$.push(z)}}function l(q,z){if(!i)return null;for(;z!==null;)a(q,z),z=z.sibling;return null}function c(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function m(q,z){return q=na(q,z),q.index=0,q.sibling=null,q}function g(q,z,$){return q.index=$,i?($=q.alternate,$!==null?($=$.index,$<z?(q.flags|=33554434,z):$):(q.flags|=33554434,z)):(q.flags|=1048576,z)}function E(q){return i&&q.alternate===null&&(q.flags|=33554434),q}function A(q,z,$,se){return z===null||z.tag!==6?(z=ny($,q.mode,se),z.return=q,z):(z=m(z,$),z.return=q,z)}function V(q,z,$,se){var Te=$.type;return Te===d?ne(q,z,$.props.children,se,$.key):z!==null&&(z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===te&&Ub(Te)===z.type)?(z=m(z,$.props),Pc(z,$),z.return=q,z):(z=Sf($.type,$.key,$.props,null,q.mode,se),Pc(z,$),z.return=q,z)}function F(q,z,$,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==$.containerInfo||z.stateNode.implementation!==$.implementation?(z=ry($,q.mode,se),z.return=q,z):(z=m(z,$.children||[]),z.return=q,z)}function ne(q,z,$,se,Te){return z===null||z.tag!==7?(z=Ao($,q.mode,se,Te),z.return=q,z):(z=m(z,$),z.return=q,z)}function oe(q,z,$){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=ny(""+z,q.mode,$),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case u:return $=Sf(z.type,z.key,z.props,null,q.mode,$),Pc($,z),$.return=q,$;case h:return z=ry(z,q.mode,$),z.return=q,z;case te:var se=z._init;return z=se(z._payload),oe(q,z,$)}if(Z(z)||J(z))return z=Ao(z,q.mode,$,null),z.return=q,z;if(typeof z.then=="function")return oe(q,lf(z),$);if(z.$$typeof===R)return oe(q,xf(q,z),$);uf(q,z)}return null}function Q(q,z,$,se){var Te=z!==null?z.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Te!==null?null:A(q,z,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case u:return $.key===Te?V(q,z,$,se):null;case h:return $.key===Te?F(q,z,$,se):null;case te:return Te=$._init,$=Te($._payload),Q(q,z,$,se)}if(Z($)||J($))return Te!==null?null:ne(q,z,$,se,null);if(typeof $.then=="function")return Q(q,z,lf($),se);if($.$$typeof===R)return Q(q,z,xf(q,$),se);uf(q,$)}return null}function ee(q,z,$,se,Te){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return q=q.get($)||null,A(z,q,""+se,Te);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case u:return q=q.get(se.key===null?$:se.key)||null,V(z,q,se,Te);case h:return q=q.get(se.key===null?$:se.key)||null,F(z,q,se,Te);case te:var Qe=se._init;return se=Qe(se._payload),ee(q,z,$,se,Te)}if(Z(se)||J(se))return q=q.get($)||null,ne(z,q,se,Te,null);if(typeof se.then=="function")return ee(q,z,$,lf(se),Te);if(se.$$typeof===R)return ee(q,z,$,xf(z,se),Te);uf(z,se)}return null}function Re(q,z,$,se){for(var Te=null,Qe=null,Ne=z,Le=z=0,Sn=null;Ne!==null&&Le<$.length;Le++){Ne.index>Le?(Sn=Ne,Ne=null):Sn=Ne.sibling;var pt=Q(q,Ne,$[Le],se);if(pt===null){Ne===null&&(Ne=Sn);break}i&&Ne&&pt.alternate===null&&a(q,Ne),z=g(pt,z,Le),Qe===null?Te=pt:Qe.sibling=pt,Qe=pt,Ne=Sn}if(Le===$.length)return l(q,Ne),mt&&po(q,Le),Te;if(Ne===null){for(;Le<$.length;Le++)Ne=oe(q,$[Le],se),Ne!==null&&(z=g(Ne,z,Le),Qe===null?Te=Ne:Qe.sibling=Ne,Qe=Ne);return mt&&po(q,Le),Te}for(Ne=c(Ne);Le<$.length;Le++)Sn=ee(Ne,q,Le,$[Le],se),Sn!==null&&(i&&Sn.alternate!==null&&Ne.delete(Sn.key===null?Le:Sn.key),z=g(Sn,z,Le),Qe===null?Te=Sn:Qe.sibling=Sn,Qe=Sn);return i&&Ne.forEach(function(ua){return a(q,ua)}),mt&&po(q,Le),Te}function Fe(q,z,$,se){if($==null)throw Error(r(151));for(var Te=null,Qe=null,Ne=z,Le=z=0,Sn=null,pt=$.next();Ne!==null&&!pt.done;Le++,pt=$.next()){Ne.index>Le?(Sn=Ne,Ne=null):Sn=Ne.sibling;var ua=Q(q,Ne,pt.value,se);if(ua===null){Ne===null&&(Ne=Sn);break}i&&Ne&&ua.alternate===null&&a(q,Ne),z=g(ua,z,Le),Qe===null?Te=ua:Qe.sibling=ua,Qe=ua,Ne=Sn}if(pt.done)return l(q,Ne),mt&&po(q,Le),Te;if(Ne===null){for(;!pt.done;Le++,pt=$.next())pt=oe(q,pt.value,se),pt!==null&&(z=g(pt,z,Le),Qe===null?Te=pt:Qe.sibling=pt,Qe=pt);return mt&&po(q,Le),Te}for(Ne=c(Ne);!pt.done;Le++,pt=$.next())pt=ee(Ne,q,Le,pt.value,se),pt!==null&&(i&&pt.alternate!==null&&Ne.delete(pt.key===null?Le:pt.key),z=g(pt,z,Le),Qe===null?Te=pt:Qe.sibling=pt,Qe=pt);return i&&Ne.forEach(function(mD){return a(q,mD)}),mt&&po(q,Le),Te}function Wt(q,z,$,se){if(typeof $=="object"&&$!==null&&$.type===d&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case u:e:{for(var Te=$.key;z!==null;){if(z.key===Te){if(Te=$.type,Te===d){if(z.tag===7){l(q,z.sibling),se=m(z,$.props.children),se.return=q,q=se;break e}}else if(z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===te&&Ub(Te)===z.type){l(q,z.sibling),se=m(z,$.props),Pc(se,$),se.return=q,q=se;break e}l(q,z);break}else a(q,z);z=z.sibling}$.type===d?(se=Ao($.props.children,q.mode,se,$.key),se.return=q,q=se):(se=Sf($.type,$.key,$.props,null,q.mode,se),Pc(se,$),se.return=q,q=se)}return E(q);case h:e:{for(Te=$.key;z!==null;){if(z.key===Te)if(z.tag===4&&z.stateNode.containerInfo===$.containerInfo&&z.stateNode.implementation===$.implementation){l(q,z.sibling),se=m(z,$.children||[]),se.return=q,q=se;break e}else{l(q,z);break}else a(q,z);z=z.sibling}se=ry($,q.mode,se),se.return=q,q=se}return E(q);case te:return Te=$._init,$=Te($._payload),Wt(q,z,$,se)}if(Z($))return Re(q,z,$,se);if(J($)){if(Te=J($),typeof Te!="function")throw Error(r(150));return $=Te.call($),Fe(q,z,$,se)}if(typeof $.then=="function")return Wt(q,z,lf($),se);if($.$$typeof===R)return Wt(q,z,xf(q,$),se);uf(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,z!==null&&z.tag===6?(l(q,z.sibling),se=m(z,$),se.return=q,q=se):(l(q,z),se=ny($,q.mode,se),se.return=q,q=se),E(q)):l(q,z)}return function(q,z,$,se){try{Nc=0;var Te=Wt(q,z,$,se);return Vl=null,Te}catch(Ne){if(Ne===Cc)throw Ne;var Qe=qr(29,Ne,null,q.mode);return Qe.lanes=se,Qe.return=q,Qe}finally{}}}var yo=jb(!0),zb=jb(!1),Ml=be(null),cf=be(0);function Fb(i,a){i=us,De(cf,i),De(Ml,a),us=i|a.baseLanes}function ug(){De(cf,us),De(Ml,Ml.current)}function cg(){us=cf.current,Se(Ml),Se(cf)}var zr=be(null),vi=null;function Gs(i){var a=i.alternate;De(gn,gn.current&1),De(zr,i),vi===null&&(a===null||Ml.current!==null||a.memoizedState!==null)&&(vi=i)}function Bb(i){if(i.tag===22){if(De(gn,gn.current),De(zr,i),vi===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(vi=i)}}else Ks()}function Ks(){De(gn,gn.current),De(zr,zr.current)}function Ji(i){Se(zr),vi===i&&(vi=null),Se(gn)}var gn=be(0);function hf(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var t2=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},n2=n.unstable_scheduleCallback,r2=n.unstable_NormalPriority,yn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hg(){return{controller:new t2,data:new Map,refCount:0}}function kc(i){i.refCount--,i.refCount===0&&n2(r2,function(){i.controller.abort()})}var Oc=null,dg=0,Ll=0,Ul=null;function i2(i,a){if(Oc===null){var l=Oc=[];dg=0,Ll=_y(),Ul={status:"pending",value:void 0,then:function(c){l.push(c)}}}return dg++,a.then(qb,qb),a}function qb(){if(--dg===0&&Oc!==null){Ul!==null&&(Ul.status="fulfilled");var i=Oc;Oc=null,Ll=0,Ul=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function s2(i,a){var l=[],c={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(c.status="rejected",c.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),c}var Hb=w.S;w.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&i2(i,a),Hb!==null&&Hb(i,a)};var _o=be(null);function fg(){var i=_o.current;return i!==null?i:At.pooledCache}function df(i,a){a===null?De(_o,_o.current):De(_o,a.pool)}function Gb(){var i=fg();return i===null?null:{parent:yn._currentValue,pool:i}}var $s=0,$e=null,wt=null,sn=null,ff=!1,jl=!1,vo=!1,mf=0,Vc=0,zl=null,a2=0;function Jt(){throw Error(r(321))}function mg(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!vr(i[l],a[l]))return!1;return!0}function pg(i,a,l,c,m,g){return $s=g,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,w.H=i===null||i.memoizedState===null?bo:Qs,vo=!1,g=l(c,m),vo=!1,jl&&(g=$b(a,l,c,m)),Kb(i),g}function Kb(i){w.H=bi;var a=wt!==null&&wt.next!==null;if($s=0,sn=wt=$e=null,ff=!1,Vc=0,zl=null,a)throw Error(r(300));i===null||In||(i=i.dependencies,i!==null&&Tf(i)&&(In=!0))}function $b(i,a,l,c){$e=i;var m=0;do{if(jl&&(zl=null),Vc=0,jl=!1,25<=m)throw Error(r(301));if(m+=1,sn=wt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}w.H=Eo,g=a(l,c)}while(jl);return g}function o2(){var i=w.H,a=i.useState()[0];return a=typeof a.then=="function"?Mc(a):a,i=i.useState()[0],(wt!==null?wt.memoizedState:null)!==i&&($e.flags|=1024),a}function gg(){var i=mf!==0;return mf=0,i}function yg(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function _g(i){if(ff){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}ff=!1}$s=0,sn=wt=$e=null,jl=!1,Vc=mf=0,zl=null}function hr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?$e.memoizedState=sn=i:sn=sn.next=i,sn}function an(){if(wt===null){var i=$e.alternate;i=i!==null?i.memoizedState:null}else i=wt.next;var a=sn===null?$e.memoizedState:sn.next;if(a!==null)sn=a,wt=i;else{if(i===null)throw $e.alternate===null?Error(r(467)):Error(r(310));wt=i,i={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},sn===null?$e.memoizedState=sn=i:sn=sn.next=i}return sn}var pf;pf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Mc(i){var a=Vc;return Vc+=1,zl===null&&(zl=[]),i=Mb(zl,i,a),a=$e,(sn===null?a.memoizedState:sn.next)===null&&(a=a.alternate,w.H=a===null||a.memoizedState===null?bo:Qs),i}function gf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Mc(i);if(i.$$typeof===R)return Kn(i)}throw Error(r(438,String(i)))}function vg(i){var a=null,l=$e.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=$e.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=pf(),$e.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),c=0;c<i;c++)l[c]=ue;return a.index++,l}function es(i,a){return typeof a=="function"?a(i):a}function yf(i){var a=an();return bg(a,wt,i)}function bg(i,a,l){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var m=i.baseQueue,g=c.pending;if(g!==null){if(m!==null){var E=m.next;m.next=g.next,g.next=E}a.baseQueue=m=g,c.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{a=m.next;var A=E=null,V=null,F=a,ne=!1;do{var oe=F.lane&-536870913;if(oe!==F.lane?(ut&oe)===oe:($s&oe)===oe){var Q=F.revertLane;if(Q===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),oe===Ll&&(ne=!0);else if(($s&Q)===Q){F=F.next,Q===Ll&&(ne=!0);continue}else oe={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},V===null?(A=V=oe,E=g):V=V.next=oe,$e.lanes|=Q,ra|=Q;oe=F.action,vo&&l(g,oe),g=F.hasEagerState?F.eagerState:l(g,oe)}else Q={lane:oe,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},V===null?(A=V=Q,E=g):V=V.next=Q,$e.lanes|=oe,ra|=oe;F=F.next}while(F!==null&&F!==a);if(V===null?E=g:V.next=A,!vr(g,i.memoizedState)&&(In=!0,ne&&(l=Ul,l!==null)))throw l;i.memoizedState=g,i.baseState=E,i.baseQueue=V,c.lastRenderedState=g}return m===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Eg(i){var a=an(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var c=l.dispatch,m=l.pending,g=a.memoizedState;if(m!==null){l.pending=null;var E=m=m.next;do g=i(g,E.action),E=E.next;while(E!==m);vr(g,a.memoizedState)||(In=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,c]}function Qb(i,a,l){var c=$e,m=an(),g=mt;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=a();var E=!vr((wt||m).memoizedState,l);if(E&&(m.memoizedState=l,In=!0),m=m.queue,xg(Xb.bind(null,c,m,i),[i]),m.getSnapshot!==a||E||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,Fl(9,Yb.bind(null,c,m,l,a),{destroy:void 0},null),At===null)throw Error(r(349));g||($s&60)!==0||Wb(c,a,l)}return l}function Wb(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=$e.updateQueue,a===null?(a=pf(),$e.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Yb(i,a,l,c){a.value=l,a.getSnapshot=c,Zb(a)&&Jb(i)}function Xb(i,a,l){return l(function(){Zb(a)&&Jb(i)})}function Zb(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!vr(i,l)}catch{return!0}}function Jb(i){var a=Hs(i,2);a!==null&&rr(a,i,2)}function wg(i){var a=hr();if(typeof i=="function"){var l=i;if(i=l(),vo){kn(!0);try{l()}finally{kn(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},a}function eE(i,a,l,c){return i.baseState=l,bg(i,wt,typeof c=="function"?c:es)}function l2(i,a,l,c,m){if(bf(i))throw Error(r(485));if(i=a.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};w.T!==null?l(!0):g.isTransition=!1,c(g),l=a.pending,l===null?(g.next=a.pending=g,tE(a,g)):(g.next=l.next,a.pending=l.next=g)}}function tE(i,a){var l=a.action,c=a.payload,m=i.state;if(a.isTransition){var g=w.T,E={};w.T=E;try{var A=l(m,c),V=w.S;V!==null&&V(E,A),nE(i,a,A)}catch(F){Tg(i,a,F)}finally{w.T=g}}else try{g=l(m,c),nE(i,a,g)}catch(F){Tg(i,a,F)}}function nE(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){rE(i,a,c)},function(c){return Tg(i,a,c)}):rE(i,a,l)}function rE(i,a,l){a.status="fulfilled",a.value=l,iE(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,tE(i,l)))}function Tg(i,a,l){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,iE(a),a=a.next;while(a!==c)}i.action=null}function iE(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function sE(i,a){return a}function aE(i,a){if(mt){var l=At.formState;if(l!==null){e:{var c=$e;if(mt){if(Vn){t:{for(var m=Vn,g=_i;m.nodeType!==8;){if(!g){m=null;break t}if(m=ni(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Vn=ni(m.nextSibling),c=m.data==="F!";break e}}go(c)}c=!1}c&&(a=l[0])}}return l=hr(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sE,lastRenderedState:a},l.queue=c,l=xE.bind(null,$e,c),c.dispatch=l,c=wg(!1),g=Cg.bind(null,$e,!1,c.queue),c=hr(),m={state:a,dispatch:null,action:i,pending:null},c.queue=m,l=l2.bind(null,$e,m,g,l),m.dispatch=l,c.memoizedState=i,[a,l,!1]}function oE(i){var a=an();return lE(a,wt,i)}function lE(i,a,l){a=bg(i,a,sE)[0],i=yf(es)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?Mc(a):a;var c=an(),m=c.queue,g=m.dispatch;return l!==c.memoizedState&&($e.flags|=2048,Fl(9,u2.bind(null,m,l),{destroy:void 0},null)),[a,g,i]}function u2(i,a){i.action=a}function uE(i){var a=an(),l=wt;if(l!==null)return lE(a,l,i);an(),a=a.memoizedState,l=an();var c=l.queue.dispatch;return l.memoizedState=i,[a,c,!1]}function Fl(i,a,l,c){return i={tag:i,create:a,inst:l,deps:c,next:null},a=$e.updateQueue,a===null&&(a=pf(),$e.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(c=l.next,l.next=i,i.next=c,a.lastEffect=i),i}function cE(){return an().memoizedState}function _f(i,a,l,c){var m=hr();$e.flags|=i,m.memoizedState=Fl(1|a,l,{destroy:void 0},c===void 0?null:c)}function vf(i,a,l,c){var m=an();c=c===void 0?null:c;var g=m.memoizedState.inst;wt!==null&&c!==null&&mg(c,wt.memoizedState.deps)?m.memoizedState=Fl(a,l,g,c):($e.flags|=i,m.memoizedState=Fl(1|a,l,g,c))}function hE(i,a){_f(8390656,8,i,a)}function xg(i,a){vf(2048,8,i,a)}function dE(i,a){return vf(4,2,i,a)}function fE(i,a){return vf(4,4,i,a)}function mE(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function pE(i,a,l){l=l!=null?l.concat([i]):null,vf(4,4,mE.bind(null,a,i),l)}function Ig(){}function gE(i,a){var l=an();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&mg(a,c[1])?c[0]:(l.memoizedState=[i,a],i)}function yE(i,a){var l=an();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&mg(a,c[1]))return c[0];if(c=i(),vo){kn(!0);try{i()}finally{kn(!1)}}return l.memoizedState=[c,a],c}function Ag(i,a,l){return l===void 0||($s&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=vw(),$e.lanes|=i,ra|=i,l)}function _E(i,a,l,c){return vr(l,a)?l:Ml.current!==null?(i=Ag(i,l,c),vr(i,a)||(In=!0),i):($s&42)===0?(In=!0,i.memoizedState=l):(i=vw(),$e.lanes|=i,ra|=i,a)}function vE(i,a,l,c,m){var g=fe.p;fe.p=g!==0&&8>g?g:8;var E=w.T,A={};w.T=A,Cg(i,!1,a,l);try{var V=m(),F=w.S;if(F!==null&&F(A,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ne=s2(V,c);Lc(i,a,ne,Tr(i))}else Lc(i,a,c,Tr(i))}catch(oe){Lc(i,a,{then:function(){},status:"rejected",reason:oe},Tr())}finally{fe.p=g,w.T=E}}function c2(){}function Sg(i,a,l,c){if(i.tag!==5)throw Error(r(476));var m=bE(i).queue;vE(i,m,a,ve,l===null?c2:function(){return EE(i),l(c)})}function bE(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:ve},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function EE(i){var a=bE(i).next.queue;Lc(i,a,{},Tr())}function Rg(){return Kn(rh)}function wE(){return an().memoizedState}function TE(){return an().memoizedState}function h2(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Tr();i=Xs(l);var c=Zs(a,i,l);c!==null&&(rr(c,a,l),zc(c,a,l)),a={cache:hg()},i.payload=a;return}a=a.return}}function d2(i,a,l){var c=Tr();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},bf(i)?IE(a,l):(l=ig(i,a,l,c),l!==null&&(rr(l,i,c),AE(l,a,c)))}function xE(i,a,l){var c=Tr();Lc(i,a,l,c)}function Lc(i,a,l,c){var m={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(bf(i))IE(a,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var E=a.lastRenderedState,A=g(E,l);if(m.hasEagerState=!0,m.eagerState=A,vr(A,E))return nf(i,a,m,0),At===null&&tf(),!1}catch{}finally{}if(l=ig(i,a,m,c),l!==null)return rr(l,i,c),AE(l,a,c),!0}return!1}function Cg(i,a,l,c){if(c={lane:2,revertLane:_y(),action:c,hasEagerState:!1,eagerState:null,next:null},bf(i)){if(a)throw Error(r(479))}else a=ig(i,l,c,2),a!==null&&rr(a,i,2)}function bf(i){var a=i.alternate;return i===$e||a!==null&&a===$e}function IE(i,a){jl=ff=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function AE(i,a,l){if((l&4194176)!==0){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Os(i,l)}}var bi={readContext:Kn,use:gf,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt};bi.useCacheRefresh=Jt,bi.useMemoCache=Jt,bi.useHostTransitionStatus=Jt,bi.useFormState=Jt,bi.useActionState=Jt,bi.useOptimistic=Jt;var bo={readContext:Kn,use:gf,useCallback:function(i,a){return hr().memoizedState=[i,a===void 0?null:a],i},useContext:Kn,useEffect:hE,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,_f(4194308,4,mE.bind(null,a,i),l)},useLayoutEffect:function(i,a){return _f(4194308,4,i,a)},useInsertionEffect:function(i,a){_f(4,2,i,a)},useMemo:function(i,a){var l=hr();a=a===void 0?null:a;var c=i();if(vo){kn(!0);try{i()}finally{kn(!1)}}return l.memoizedState=[c,a],c},useReducer:function(i,a,l){var c=hr();if(l!==void 0){var m=l(a);if(vo){kn(!0);try{l(a)}finally{kn(!1)}}}else m=a;return c.memoizedState=c.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},c.queue=i,i=i.dispatch=d2.bind(null,$e,i),[c.memoizedState,i]},useRef:function(i){var a=hr();return i={current:i},a.memoizedState=i},useState:function(i){i=wg(i);var a=i.queue,l=xE.bind(null,$e,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Ig,useDeferredValue:function(i,a){var l=hr();return Ag(l,i,a)},useTransition:function(){var i=wg(!1);return i=vE.bind(null,$e,i.queue,!0,!1),hr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var c=$e,m=hr();if(mt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),At===null)throw Error(r(349));(ut&60)!==0||Wb(c,a,l)}m.memoizedState=l;var g={value:l,getSnapshot:a};return m.queue=g,hE(Xb.bind(null,c,g,i),[i]),c.flags|=2048,Fl(9,Yb.bind(null,c,g,l,a),{destroy:void 0},null),l},useId:function(){var i=hr(),a=At.identifierPrefix;if(mt){var l=Zi,c=Xi;l=(c&~(1<<32-dn(c)-1)).toString(32)+l,a=":"+a+"R"+l,l=mf++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=a2++,a=":"+a+"r"+l.toString(32)+":";return i.memoizedState=a},useCacheRefresh:function(){return hr().memoizedState=h2.bind(null,$e)}};bo.useMemoCache=vg,bo.useHostTransitionStatus=Rg,bo.useFormState=aE,bo.useActionState=aE,bo.useOptimistic=function(i){var a=hr();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Cg.bind(null,$e,!0,l),l.dispatch=a,[i,a]};var Qs={readContext:Kn,use:gf,useCallback:gE,useContext:Kn,useEffect:xg,useImperativeHandle:pE,useInsertionEffect:dE,useLayoutEffect:fE,useMemo:yE,useReducer:yf,useRef:cE,useState:function(){return yf(es)},useDebugValue:Ig,useDeferredValue:function(i,a){var l=an();return _E(l,wt.memoizedState,i,a)},useTransition:function(){var i=yf(es)[0],a=an().memoizedState;return[typeof i=="boolean"?i:Mc(i),a]},useSyncExternalStore:Qb,useId:wE};Qs.useCacheRefresh=TE,Qs.useMemoCache=vg,Qs.useHostTransitionStatus=Rg,Qs.useFormState=oE,Qs.useActionState=oE,Qs.useOptimistic=function(i,a){var l=an();return eE(l,wt,i,a)};var Eo={readContext:Kn,use:gf,useCallback:gE,useContext:Kn,useEffect:xg,useImperativeHandle:pE,useInsertionEffect:dE,useLayoutEffect:fE,useMemo:yE,useReducer:Eg,useRef:cE,useState:function(){return Eg(es)},useDebugValue:Ig,useDeferredValue:function(i,a){var l=an();return wt===null?Ag(l,i,a):_E(l,wt.memoizedState,i,a)},useTransition:function(){var i=Eg(es)[0],a=an().memoizedState;return[typeof i=="boolean"?i:Mc(i),a]},useSyncExternalStore:Qb,useId:wE};Eo.useCacheRefresh=TE,Eo.useMemoCache=vg,Eo.useHostTransitionStatus=Rg,Eo.useFormState=uE,Eo.useActionState=uE,Eo.useOptimistic=function(i,a){var l=an();return wt!==null?eE(l,wt,i,a):(l.baseState=i,[i,l.queue.dispatch])};function Dg(i,a,l,c){a=i.memoizedState,l=l(c,a),l=l==null?a:I({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Ng={isMounted:function(i){return(i=i._reactInternals)?he(i)===i:!1},enqueueSetState:function(i,a,l){i=i._reactInternals;var c=Tr(),m=Xs(c);m.payload=a,l!=null&&(m.callback=l),a=Zs(i,m,c),a!==null&&(rr(a,i,c),zc(a,i,c))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var c=Tr(),m=Xs(c);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=Zs(i,m,c),a!==null&&(rr(a,i,c),zc(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Tr(),c=Xs(l);c.tag=2,a!=null&&(c.callback=a),a=Zs(i,c,l),a!==null&&(rr(a,i,l),zc(a,i,l))}};function SE(i,a,l,c,m,g,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,E):a.prototype&&a.prototype.isPureReactComponent?!xc(l,c)||!xc(m,g):!0}function RE(i,a,l,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==i&&Ng.enqueueReplaceState(a,a.state,null)}function wo(i,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(i=i.defaultProps){l===a&&(l=I({},l));for(var m in i)l[m]===void 0&&(l[m]=i[m])}return l}var Ef=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function CE(i){Ef(i)}function DE(i){console.error(i)}function NE(i){Ef(i)}function wf(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function PE(i,a,l){try{var c=i.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Pg(i,a,l){return l=Xs(l),l.tag=3,l.payload={element:null},l.callback=function(){wf(i,a)},l}function kE(i){return i=Xs(i),i.tag=3,i}function OE(i,a,l,c){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;i.payload=function(){return m(g)},i.callback=function(){PE(a,l,c)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){PE(a,l,c),typeof m!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function f2(i,a,l,c,m){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&jc(a,l,m,!0),l=zr.current,l!==null){switch(l.tag){case 13:return vi===null?fy():l.alternate===null&&Qt===0&&(Qt=3),l.flags&=-257,l.flags|=65536,l.lanes=m,c===lg?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),py(i,c,m)),!1;case 22:return l.flags|=65536,c===lg?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),py(i,c,m)),!1}throw Error(r(435,l.tag))}return py(i,c,m),fy(),!1}if(mt)return a=zr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,c!==og&&(i=Error(r(422),{cause:c}),Rc(Lr(i,l)))):(c!==og&&(a=Error(r(423),{cause:c}),Rc(Lr(a,l))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,c=Lr(c,l),m=Pg(i.stateNode,c,m),$g(i,m),Qt!==4&&(Qt=2)),!1;var g=Error(r(520),{cause:c});if(g=Lr(g,l),Qc===null?Qc=[g]:Qc.push(g),Qt!==4&&(Qt=2),a===null)return!0;c=Lr(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=m&-m,l.lanes|=i,i=Pg(l.stateNode,c,i),$g(l,i),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ia===null||!ia.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=kE(m),OE(m,i,l,c),$g(l,m),!1}l=l.return}while(l!==null);return!1}var VE=Error(r(461)),In=!1;function Mn(i,a,l,c){a.child=i===null?zb(a,null,l,c):yo(a,i.child,l,c)}function ME(i,a,l,c,m){l=l.render;var g=a.ref;if("ref"in c){var E={};for(var A in c)A!=="ref"&&(E[A]=c[A])}else E=c;return xo(a),c=pg(i,a,l,E,g,m),A=gg(),i!==null&&!In?(yg(i,a,m),ts(i,a,m)):(mt&&A&&sg(a),a.flags|=1,Mn(i,a,c,m),a.child)}function LE(i,a,l,c,m){if(i===null){var g=l.type;return typeof g=="function"&&!ty(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,UE(i,a,g,c,m)):(i=Sf(l.type,null,c,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(g=i.child,!Fg(i,m)){var E=g.memoizedProps;if(l=l.compare,l=l!==null?l:xc,l(E,c)&&i.ref===a.ref)return ts(i,a,m)}return a.flags|=1,i=na(g,c),i.ref=a.ref,i.return=a,a.child=i}function UE(i,a,l,c,m){if(i!==null){var g=i.memoizedProps;if(xc(g,c)&&i.ref===a.ref)if(In=!1,a.pendingProps=c=g,Fg(i,m))(i.flags&131072)!==0&&(In=!0);else return a.lanes=i.lanes,ts(i,a,m)}return kg(i,a,l,c,m)}function jE(i,a,l){var c=a.pendingProps,m=c.children,g=(a.stateNode._pendingVisibility&2)!==0,E=i!==null?i.memoizedState:null;if(Uc(i,a),c.mode==="hidden"||g){if((a.flags&128)!==0){if(c=E!==null?E.baseLanes|l:l,i!==null){for(m=a.child=i.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;a.childLanes=g&~c}else a.childLanes=0,a.child=null;return zE(i,a,c,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&df(a,E!==null?E.cachePool:null),E!==null?Fb(a,E):ug(),Bb(a);else return a.lanes=a.childLanes=536870912,zE(i,a,E!==null?E.baseLanes|l:l,l)}else E!==null?(df(a,E.cachePool),Fb(a,E),Ks(),a.memoizedState=null):(i!==null&&df(a,null),ug(),Ks());return Mn(i,a,m,l),a.child}function zE(i,a,l,c){var m=fg();return m=m===null?null:{parent:yn._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},i!==null&&df(a,null),ug(),Bb(a),i!==null&&jc(i,a,c,!0),null}function Uc(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=2097664)}}function kg(i,a,l,c,m){return xo(a),l=pg(i,a,l,c,void 0,m),c=gg(),i!==null&&!In?(yg(i,a,m),ts(i,a,m)):(mt&&c&&sg(a),a.flags|=1,Mn(i,a,l,m),a.child)}function FE(i,a,l,c,m,g){return xo(a),a.updateQueue=null,l=$b(a,c,l,m),Kb(i),c=gg(),i!==null&&!In?(yg(i,a,g),ts(i,a,g)):(mt&&c&&sg(a),a.flags|=1,Mn(i,a,l,g),a.child)}function BE(i,a,l,c,m){if(xo(a),a.stateNode===null){var g=Pl,E=l.contextType;typeof E=="object"&&E!==null&&(g=Kn(E)),g=new l(c,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ng,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=c,g.state=a.memoizedState,g.refs={},Gg(a),E=l.contextType,g.context=typeof E=="object"&&E!==null?Kn(E):Pl,g.state=a.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(Dg(a,l,E,c),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Ng.enqueueReplaceState(g,g.state,null),Bc(a,c,g,m),Fc(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){g=a.stateNode;var A=a.memoizedProps,V=wo(l,A);g.props=V;var F=g.context,ne=l.contextType;E=Pl,typeof ne=="object"&&ne!==null&&(E=Kn(ne));var oe=l.getDerivedStateFromProps;ne=typeof oe=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||F!==E)&&RE(a,g,c,E),Ys=!1;var Q=a.memoizedState;g.state=Q,Bc(a,c,g,m),Fc(),F=a.memoizedState,A||Q!==F||Ys?(typeof oe=="function"&&(Dg(a,l,oe,c),F=a.memoizedState),(V=Ys||SE(a,l,V,c,Q,F,E))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=F),g.props=c,g.state=F,g.context=E,c=V):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{g=a.stateNode,Kg(i,a),E=a.memoizedProps,ne=wo(l,E),g.props=ne,oe=a.pendingProps,Q=g.context,F=l.contextType,V=Pl,typeof F=="object"&&F!==null&&(V=Kn(F)),A=l.getDerivedStateFromProps,(F=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==oe||Q!==V)&&RE(a,g,c,V),Ys=!1,Q=a.memoizedState,g.state=Q,Bc(a,c,g,m),Fc();var ee=a.memoizedState;E!==oe||Q!==ee||Ys||i!==null&&i.dependencies!==null&&Tf(i.dependencies)?(typeof A=="function"&&(Dg(a,l,A,c),ee=a.memoizedState),(ne=Ys||SE(a,l,ne,c,Q,ee,V)||i!==null&&i.dependencies!==null&&Tf(i.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,ee,V),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,ee,V)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ee),g.props=c,g.state=ee,g.context=V,c=ne):(typeof g.componentDidUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Q===i.memoizedState||(a.flags|=1024),c=!1)}return g=c,Uc(i,a),c=(a.flags&128)!==0,g||c?(g=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,i!==null&&c?(a.child=yo(a,i.child,null,m),a.child=yo(a,null,l,m)):Mn(i,a,l,m),a.memoizedState=g.state,i=a.child):i=ts(i,a,m),i}function qE(i,a,l,c){return Sc(),a.flags|=256,Mn(i,a,l,c),a.child}var Og={dehydrated:null,treeContext:null,retryLane:0};function Vg(i){return{baseLanes:i,cachePool:Gb()}}function Mg(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Hr),i}function HE(i,a,l){var c=a.pendingProps,m=!1,g=(a.flags&128)!==0,E;if((E=g)||(E=i!==null&&i.memoizedState===null?!1:(gn.current&2)!==0),E&&(m=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,i===null){if(mt){if(m?Gs(a):Ks(),mt){var A=Vn,V;if(V=A){e:{for(V=A,A=_i;V.nodeType!==8;){if(!A){A=null;break e}if(V=ni(V.nextSibling),V===null){A=null;break e}}A=V}A!==null?(a.memoizedState={dehydrated:A,treeContext:mo!==null?{id:Xi,overflow:Zi}:null,retryLane:536870912},V=qr(18,null,null,0),V.stateNode=A,V.return=a,a.child=V,nr=a,Vn=null,V=!0):V=!1}V||go(a)}if(A=a.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return A.data==="$!"?a.lanes=16:a.lanes=536870912,null;Ji(a)}return A=c.children,c=c.fallback,m?(Ks(),m=a.mode,A=Ug({mode:"hidden",children:A},m),c=Ao(c,m,l,null),A.return=a,c.return=a,A.sibling=c,a.child=A,m=a.child,m.memoizedState=Vg(l),m.childLanes=Mg(i,E,l),a.memoizedState=Og,c):(Gs(a),Lg(a,A))}if(V=i.memoizedState,V!==null&&(A=V.dehydrated,A!==null)){if(g)a.flags&256?(Gs(a),a.flags&=-257,a=jg(i,a,l)):a.memoizedState!==null?(Ks(),a.child=i.child,a.flags|=128,a=null):(Ks(),m=c.fallback,A=a.mode,c=Ug({mode:"visible",children:c.children},A),m=Ao(m,A,l,null),m.flags|=2,c.return=a,m.return=a,c.sibling=m,a.child=c,yo(a,i.child,null,l),c=a.child,c.memoizedState=Vg(l),c.childLanes=Mg(i,E,l),a.memoizedState=Og,a=m);else if(Gs(a),A.data==="$!"){if(E=A.nextSibling&&A.nextSibling.dataset,E)var F=E.dgst;E=F,c=Error(r(419)),c.stack="",c.digest=E,Rc({value:c,source:null,stack:null}),a=jg(i,a,l)}else if(In||jc(i,a,l,!1),E=(l&i.childLanes)!==0,In||E){if(E=At,E!==null){if(c=l&-l,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(E.suspendedLanes|l))!==0?0:c,c!==0&&c!==V.retryLane)throw V.retryLane=c,Hs(i,c),rr(E,i,c),VE}A.data==="$?"||fy(),a=jg(i,a,l)}else A.data==="$?"?(a.flags|=128,a.child=i.child,a=R2.bind(null,i),A._reactRetry=a,a=null):(i=V.treeContext,Vn=ni(A.nextSibling),nr=a,mt=!0,ei=null,_i=!1,i!==null&&(Ur[jr++]=Xi,Ur[jr++]=Zi,Ur[jr++]=mo,Xi=i.id,Zi=i.overflow,mo=a),a=Lg(a,c.children),a.flags|=4096);return a}return m?(Ks(),m=c.fallback,A=a.mode,V=i.child,F=V.sibling,c=na(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&31457280,F!==null?m=na(F,m):(m=Ao(m,A,l,null),m.flags|=2),m.return=a,c.return=a,c.sibling=m,a.child=c,c=m,m=a.child,A=i.child.memoizedState,A===null?A=Vg(l):(V=A.cachePool,V!==null?(F=yn._currentValue,V=V.parent!==F?{parent:F,pool:F}:V):V=Gb(),A={baseLanes:A.baseLanes|l,cachePool:V}),m.memoizedState=A,m.childLanes=Mg(i,E,l),a.memoizedState=Og,c):(Gs(a),l=i.child,i=l.sibling,l=na(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,i!==null&&(E=a.deletions,E===null?(a.deletions=[i],a.flags|=16):E.push(i)),a.child=l,a.memoizedState=null,l)}function Lg(i,a){return a=Ug({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Ug(i,a){return gw(i,a,0,null)}function jg(i,a,l){return yo(a,i.child,null,l),i=Lg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function GE(i,a,l){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),qg(i.return,a,l)}function zg(i,a,l,c,m){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:m}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=l,g.tailMode=m)}function KE(i,a,l){var c=a.pendingProps,m=c.revealOrder,g=c.tail;if(Mn(i,a,c.children,l),c=gn.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&GE(i,l,a);else if(i.tag===19)GE(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(De(gn,c),m){case"forwards":for(l=a.child,m=null;l!==null;)i=l.alternate,i!==null&&hf(i)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),zg(a,!1,m,l,g);break;case"backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&hf(i)===null){a.child=m;break}i=m.sibling,m.sibling=l,l=m,m=i}zg(a,!0,l,null,g);break;case"together":zg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ts(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),ra|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(jc(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=na(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=na(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Fg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Tf(i)))}function m2(i,a,l){switch(a.tag){case 3:Ge(a,a.stateNode.containerInfo),Ws(a,yn,i.memoizedState.cache),Sc();break;case 27:case 5:It(a);break;case 4:Ge(a,a.stateNode.containerInfo);break;case 10:Ws(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Gs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?HE(i,a,l):(Gs(a),i=ts(i,a,l),i!==null?i.sibling:null);Gs(a);break;case 19:var m=(i.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(jc(i,a,l,!1),c=(l&a.childLanes)!==0),m){if(c)return KE(i,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),De(gn,gn.current),c)break;return null;case 22:case 23:return a.lanes=0,jE(i,a,l);case 24:Ws(a,yn,i.memoizedState.cache)}return ts(i,a,l)}function $E(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)In=!0;else{if(!Fg(i,l)&&(a.flags&128)===0)return In=!1,m2(i,a,l);In=(i.flags&131072)!==0}else In=!1,mt&&(a.flags&1048576)!==0&&Nb(a,af,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var c=a.elementType,m=c._init;if(c=m(c._payload),a.type=c,typeof c=="function")ty(c)?(i=wo(c,i),a.tag=1,a=BE(null,a,c,i,l)):(a.tag=0,a=kg(null,a,c,i,l));else{if(c!=null){if(m=c.$$typeof,m===N){a.tag=11,a=ME(null,a,c,i,l);break e}else if(m===B){a.tag=14,a=LE(null,a,c,i,l);break e}}throw a=T(c)||c,Error(r(306,a,""))}}return a;case 0:return kg(i,a,a.type,a.pendingProps,l);case 1:return c=a.type,m=wo(c,a.pendingProps),BE(i,a,c,m,l);case 3:e:{if(Ge(a,a.stateNode.containerInfo),i===null)throw Error(r(387));var g=a.pendingProps;m=a.memoizedState,c=m.element,Kg(i,a),Bc(a,g,null,l);var E=a.memoizedState;if(g=E.cache,Ws(a,yn,g),g!==m.cache&&Hg(a,[yn],l,!0),Fc(),g=E.element,m.isDehydrated)if(m={element:g,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=qE(i,a,g,l);break e}else if(g!==c){c=Lr(Error(r(424)),a),Rc(c),a=qE(i,a,g,l);break e}else for(Vn=ni(a.stateNode.containerInfo.firstChild),nr=a,mt=!0,ei=null,_i=!0,l=zb(a,null,g,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Sc(),g===c){a=ts(i,a,l);break e}Mn(i,a,g,l)}a=a.child}return a;case 26:return Uc(i,a),i===null?(l=Yw(a.type,null,a.pendingProps,null))?a.memoizedState=l:mt||(l=a.type,i=a.pendingProps,c=jf(nt.current).createElement(l),c[wn]=a,c[fn]=i,Ln(c,l,i),Ut(c),a.stateNode=c):a.memoizedState=Yw(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return It(a),i===null&&mt&&(c=a.stateNode=$w(a.type,a.pendingProps,nt.current),nr=a,_i=!0,Vn=ni(c.firstChild)),c=a.pendingProps.children,i!==null||mt?Mn(i,a,c,l):a.child=yo(a,null,c,l),Uc(i,a),a.child;case 5:return i===null&&mt&&((m=c=Vn)&&(c=H2(c,a.type,a.pendingProps,_i),c!==null?(a.stateNode=c,nr=a,Vn=ni(c.firstChild),_i=!1,m=!0):m=!1),m||go(a)),It(a),m=a.type,g=a.pendingProps,E=i!==null?i.memoizedProps:null,c=g.children,Sy(m,g)?c=null:E!==null&&Sy(m,E)&&(a.flags|=32),a.memoizedState!==null&&(m=pg(i,a,o2,null,null,l),rh._currentValue=m),Uc(i,a),Mn(i,a,c,l),a.child;case 6:return i===null&&mt&&((i=l=Vn)&&(l=G2(l,a.pendingProps,_i),l!==null?(a.stateNode=l,nr=a,Vn=null,i=!0):i=!1),i||go(a)),null;case 13:return HE(i,a,l);case 4:return Ge(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=yo(a,null,c,l):Mn(i,a,c,l),a.child;case 11:return ME(i,a,a.type,a.pendingProps,l);case 7:return Mn(i,a,a.pendingProps,l),a.child;case 8:return Mn(i,a,a.pendingProps.children,l),a.child;case 12:return Mn(i,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Ws(a,a.type,c.value),Mn(i,a,c.children,l),a.child;case 9:return m=a.type._context,c=a.pendingProps.children,xo(a),m=Kn(m),c=c(m),a.flags|=1,Mn(i,a,c,l),a.child;case 14:return LE(i,a,a.type,a.pendingProps,l);case 15:return UE(i,a,a.type,a.pendingProps,l);case 19:return KE(i,a,l);case 22:return jE(i,a,l);case 24:return xo(a),c=Kn(yn),i===null?(m=fg(),m===null&&(m=At,g=hg(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),a.memoizedState={parent:c,cache:m},Gg(a),Ws(a,yn,m)):((i.lanes&l)!==0&&(Kg(i,a),Bc(a,null,null,l),Fc()),m=i.memoizedState,g=a.memoizedState,m.parent!==c?(m={parent:c,cache:c},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ws(a,yn,c)):(c=g.cache,Ws(a,yn,c),c!==m.cache&&Hg(a,[yn],l,!0))),Mn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var Bg=be(null),To=null,ns=null;function Ws(i,a,l){De(Bg,a._currentValue),a._currentValue=l}function rs(i){i._currentValue=Bg.current,Se(Bg)}function qg(i,a,l){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===l)break;i=i.return}}function Hg(i,a,l,c){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var E=m.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=m;for(var V=0;V<a.length;V++)if(A.context===a[V]){g.lanes|=l,A=g.alternate,A!==null&&(A.lanes|=l),qg(g.return,l,i),c||(E=null);break e}g=A.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(r(341));E.lanes|=l,g=E.alternate,g!==null&&(g.lanes|=l),qg(E,l,i),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===i){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function jc(i,a,l,c){i=null;for(var m=a,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=m.type;vr(m.pendingProps.value,E.value)||(i!==null?i.push(A):i=[A])}}else if(m===We.current){if(E=m.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(rh):i=[rh])}m=m.return}i!==null&&Hg(a,i,l,c),a.flags|=262144}function Tf(i){for(i=i.firstContext;i!==null;){if(!vr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function xo(i){To=i,ns=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Kn(i){return QE(To,i)}function xf(i,a){return To===null&&xo(i),QE(i,a)}function QE(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},ns===null){if(i===null)throw Error(r(308));ns=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else ns=ns.next=a;return l}var Ys=!1;function Gg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Zs(i,a,l){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(zt&2)!==0){var m=c.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),c.pending=a,a=rf(i),Cb(i,null,l),a}return nf(i,c,a,l),rf(i)}function zc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194176)!==0)){var c=a.lanes;c&=i.pendingLanes,l|=c,a.lanes=l,Os(i,l)}}function $g(i,a){var l=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=E:g=g.next=E,l=l.next}while(l!==null);g===null?m=g=a:g=g.next=a}else m=g=a;l={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Qg=!1;function Fc(){if(Qg){var i=Ul;if(i!==null)throw i}}function Bc(i,a,l,c){Qg=!1;var m=i.updateQueue;Ys=!1;var g=m.firstBaseUpdate,E=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var V=A,F=V.next;V.next=null,E===null?g=F:E.next=F,E=V;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==E&&(A===null?ne.firstBaseUpdate=F:A.next=F,ne.lastBaseUpdate=V))}if(g!==null){var oe=m.baseState;E=0,ne=F=V=null,A=g;do{var Q=A.lane&-536870913,ee=Q!==A.lane;if(ee?(ut&Q)===Q:(c&Q)===Q){Q!==0&&Q===Ll&&(Qg=!0),ne!==null&&(ne=ne.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Re=i,Fe=A;Q=a;var Wt=l;switch(Fe.tag){case 1:if(Re=Fe.payload,typeof Re=="function"){oe=Re.call(Wt,oe,Q);break e}oe=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Fe.payload,Q=typeof Re=="function"?Re.call(Wt,oe,Q):Re,Q==null)break e;oe=I({},oe,Q);break e;case 2:Ys=!0}}Q=A.callback,Q!==null&&(i.flags|=64,ee&&(i.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[Q]:ee.push(Q))}else ee={lane:Q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?(F=ne=ee,V=oe):ne=ne.next=ee,E|=Q;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);ne===null&&(V=oe),m.baseState=V,m.firstBaseUpdate=F,m.lastBaseUpdate=ne,g===null&&(m.shared.lanes=0),ra|=E,i.lanes=E,i.memoizedState=oe}}function WE(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function YE(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)WE(l[i],a)}function qc(i,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var m=c.next;l=m;do{if((l.tag&i)===i){c=void 0;var g=l.create,E=l.inst;c=g(),E.destroy=c}l=l.next}while(l!==m)}}catch(A){xt(a,a.return,A)}}function Js(i,a,l){try{var c=a.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&i)===i){var E=c.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,m=a;var V=l;try{A()}catch(F){xt(m,V,F)}}}c=c.next}while(c!==g)}}catch(F){xt(a,a.return,F)}}function XE(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{YE(a,l)}catch(c){xt(i,i.return,c)}}}function ZE(i,a,l){l.props=wo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(c){xt(i,a,c)}}function Io(i,a){try{var l=i.ref;if(l!==null){var c=i.stateNode;switch(i.tag){case 26:case 27:case 5:var m=c;break;default:m=c}typeof l=="function"?i.refCleanup=l(m):l.current=m}}catch(g){xt(i,a,g)}}function br(i,a){var l=i.ref,c=i.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(m){xt(i,a,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){xt(i,a,m)}else l.current=null}function JE(i){var a=i.type,l=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(m){xt(i,i.return,m)}}function ew(i,a,l){try{var c=i.stateNode;j2(c,i.type,l,a),c[fn]=a}catch(m){xt(i,i.return,m)}}function tw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function Wg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||tw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Yg(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(i,a):l.insertBefore(i,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(i,l)):(a=l,a.appendChild(i)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Uf));else if(c!==4&&c!==27&&(i=i.child,i!==null))for(Yg(i,a,l),i=i.sibling;i!==null;)Yg(i,a,l),i=i.sibling}function If(i,a,l){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(c!==4&&c!==27&&(i=i.child,i!==null))for(If(i,a,l),i=i.sibling;i!==null;)If(i,a,l),i=i.sibling}var is=!1,$t=!1,Xg=!1,nw=typeof WeakSet=="function"?WeakSet:Set,An=null,rw=!1;function p2(i,a){if(i=i.containerInfo,Iy=Gf,i=bb(i),Jp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var E=0,A=-1,V=-1,F=0,ne=0,oe=i,Q=null;t:for(;;){for(var ee;oe!==l||m!==0&&oe.nodeType!==3||(A=E+m),oe!==g||c!==0&&oe.nodeType!==3||(V=E+c),oe.nodeType===3&&(E+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)Q=oe,oe=ee;for(;;){if(oe===i)break t;if(Q===l&&++F===m&&(A=E),Q===g&&++ne===c&&(V=E),(ee=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=ee}l=A===-1||V===-1?null:{start:A,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ay={focusedElem:i,selectionRange:l},Gf=!1,An=a;An!==null;)if(a=An,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,An=i;else for(;An!==null;){switch(a=An,g=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,l=a,m=g.memoizedProps,g=g.memoizedState,c=l.stateNode;try{var Re=wo(l.type,m,l.elementType===l.type);i=c.getSnapshotBeforeUpdate(Re,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(Fe){xt(l,l.return,Fe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Dy(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Dy(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,An=i;break}An=a.return}return Re=rw,rw=!1,Re}function iw(i,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:as(i,l),c&4&&qc(5,l);break;case 1:if(as(i,l),c&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(A){xt(l,l.return,A)}else{var m=wo(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(m,a,i.__reactInternalSnapshotBeforeUpdate)}catch(A){xt(l,l.return,A)}}c&64&&XE(l),c&512&&Io(l,l.return);break;case 3:if(as(i,l),c&64&&(c=l.updateQueue,c!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{YE(c,i)}catch(A){xt(l,l.return,A)}}break;case 26:as(i,l),c&512&&Io(l,l.return);break;case 27:case 5:as(i,l),a===null&&c&4&&JE(l),c&512&&Io(l,l.return);break;case 12:as(i,l);break;case 13:as(i,l),c&4&&ow(i,l);break;case 22:if(m=l.memoizedState!==null||is,!m){a=a!==null&&a.memoizedState!==null||$t;var g=is,E=$t;is=m,($t=a)&&!E?ea(i,l,(l.subtreeFlags&8772)!==0):as(i,l),is=g,$t=E}c&512&&(l.memoizedProps.mode==="manual"?Io(l,l.return):br(l,l.return));break;default:as(i,l)}}function sw(i){var a=i.alternate;a!==null&&(i.alternate=null,sw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&eo(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var on=null,Er=!1;function ss(i,a,l){for(l=l.child;l!==null;)aw(i,a,l),l=l.sibling}function aw(i,a,l){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(dt,l)}catch{}switch(l.tag){case 26:$t||br(l,a),ss(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:$t||br(l,a);var c=on,m=Er;for(on=l.stateNode,ss(i,a,l),l=l.stateNode,a=l.attributes;a.length;)l.removeAttributeNode(a[0]);eo(l),on=c,Er=m;break;case 5:$t||br(l,a);case 6:m=on;var g=Er;if(on=null,ss(i,a,l),on=m,Er=g,on!==null)if(Er)try{i=on,c=l.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)}catch(E){xt(l,a,E)}else try{on.removeChild(l.stateNode)}catch(E){xt(l,a,E)}break;case 18:on!==null&&(Er?(a=on,l=l.stateNode,a.nodeType===8?Cy(a.parentNode,l):a.nodeType===1&&Cy(a,l),oh(a)):Cy(on,l.stateNode));break;case 4:c=on,m=Er,on=l.stateNode.containerInfo,Er=!0,ss(i,a,l),on=c,Er=m;break;case 0:case 11:case 14:case 15:$t||Js(2,l,a),$t||Js(4,l,a),ss(i,a,l);break;case 1:$t||(br(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&ZE(l,a,c)),ss(i,a,l);break;case 21:ss(i,a,l);break;case 22:$t||br(l,a),$t=(c=$t)||l.memoizedState!==null,ss(i,a,l),$t=c;break;default:ss(i,a,l)}}function ow(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{oh(i)}catch(l){xt(a,a.return,l)}}function g2(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new nw),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new nw),a;default:throw Error(r(435,i.tag))}}function Zg(i,a){var l=g2(i);a.forEach(function(c){var m=C2.bind(null,i,c);l.has(c)||(l.add(c),c.then(m,m))})}function Fr(i,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var m=l[c],g=i,E=a,A=E;e:for(;A!==null;){switch(A.tag){case 27:case 5:on=A.stateNode,Er=!1;break e;case 3:on=A.stateNode.containerInfo,Er=!0;break e;case 4:on=A.stateNode.containerInfo,Er=!0;break e}A=A.return}if(on===null)throw Error(r(160));aw(g,E,m),on=null,Er=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)lw(a,i),a=a.sibling}var ti=null;function lw(i,a){var l=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Fr(a,i),Br(i),c&4&&(Js(3,i,i.return),qc(3,i),Js(5,i,i.return));break;case 1:Fr(a,i),Br(i),c&512&&($t||l===null||br(l,l.return)),c&64&&is&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var m=ti;if(Fr(a,i),Br(i),c&512&&($t||l===null||br(l,l.return)),c&4){var g=l!==null?l.memoizedState:null;if(c=i.memoizedState,l===null)if(c===null)if(i.stateNode===null){e:{c=i.type,l=i.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Ms]||g[wn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),Ln(g,c,l),g[wn]=i,Ut(g),c=g;break e;case"link":var E=Jw("link","href",m).get(c+(l.href||""));if(E){for(var A=0;A<E.length;A++)if(g=E[A],g.getAttribute("href")===(l.href==null?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(A,1);break t}}g=m.createElement(c),Ln(g,c,l),m.head.appendChild(g);break;case"meta":if(E=Jw("meta","content",m).get(c+(l.content||""))){for(A=0;A<E.length;A++)if(g=E[A],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(A,1);break t}}g=m.createElement(c),Ln(g,c,l),m.head.appendChild(g);break;default:throw Error(r(468,c))}g[wn]=i,Ut(g),c=g}i.stateNode=c}else eT(m,i.type,i.stateNode);else i.stateNode=Zw(m,c,i.memoizedProps);else g!==c?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,c===null?eT(m,i.type,i.stateNode):Zw(m,c,i.memoizedProps)):c===null&&i.stateNode!==null&&ew(i,i.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&i.alternate===null){m=i.stateNode,g=i.memoizedProps;try{for(var V=m.firstChild;V;){var F=V.nextSibling,ne=V.nodeName;V[Ms]||ne==="HEAD"||ne==="BODY"||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&V.rel.toLowerCase()==="stylesheet"||m.removeChild(V),V=F}for(var oe=i.type,Q=m.attributes;Q.length;)m.removeAttributeNode(Q[0]);Ln(m,oe,g),m[wn]=i,m[fn]=g}catch(Re){xt(i,i.return,Re)}}case 5:if(Fr(a,i),Br(i),c&512&&($t||l===null||br(l,l.return)),i.flags&32){m=i.stateNode;try{Pr(m,"")}catch(Re){xt(i,i.return,Re)}}c&4&&i.stateNode!=null&&(m=i.memoizedProps,ew(i,m,l!==null?l.memoizedProps:m)),c&1024&&(Xg=!0);break;case 6:if(Fr(a,i),Br(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,l=i.stateNode;try{l.nodeValue=c}catch(Re){xt(i,i.return,Re)}}break;case 3:if(Bf=null,m=ti,ti=zf(a.containerInfo),Fr(a,i),ti=m,Br(i),c&4&&l!==null&&l.memoizedState.isDehydrated)try{oh(a.containerInfo)}catch(Re){xt(i,i.return,Re)}Xg&&(Xg=!1,uw(i));break;case 4:c=ti,ti=zf(i.stateNode.containerInfo),Fr(a,i),Br(i),ti=c;break;case 12:Fr(a,i),Br(i);break;case 13:Fr(a,i),Br(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(oy=it()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Zg(i,c)));break;case 22:if(c&512&&($t||l===null||br(l,l.return)),V=i.memoizedState!==null,F=l!==null&&l.memoizedState!==null,ne=is,oe=$t,is=ne||V,$t=oe||F,Fr(a,i),$t=oe,is=ne,Br(i),a=i.stateNode,a._current=i,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,c&8192&&(a._visibility=V?a._visibility&-2:a._visibility|1,V&&(a=is||$t,l===null||F||a||Bl(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(l=null,a=i;;){if(a.tag===5||a.tag===26||a.tag===27){if(l===null){F=l=a;try{if(m=F.stateNode,V)g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{E=F.stateNode,A=F.memoizedProps.style;var ee=A!=null&&A.hasOwnProperty("display")?A.display:null;E.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Re){xt(F,F.return,Re)}}}else if(a.tag===6){if(l===null){F=a;try{F.stateNode.nodeValue=V?"":F.memoizedProps}catch(Re){xt(F,F.return,Re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Zg(i,l))));break;case 19:Fr(a,i),Br(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Zg(i,c)));break;case 21:break;default:Fr(a,i),Br(i)}}function Br(i){var a=i.flags;if(a&2){try{if(i.tag!==27){e:{for(var l=i.return;l!==null;){if(tw(l)){var c=l;break e}l=l.return}throw Error(r(160))}switch(c.tag){case 27:var m=c.stateNode,g=Wg(i);If(i,g,m);break;case 5:var E=c.stateNode;c.flags&32&&(Pr(E,""),c.flags&=-33);var A=Wg(i);If(i,A,E);break;case 3:case 4:var V=c.stateNode.containerInfo,F=Wg(i);Yg(i,F,V);break;default:throw Error(r(161))}}}catch(ne){xt(i,i.return,ne)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function uw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;uw(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function as(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)iw(i,a.alternate,a),a=a.sibling}function Bl(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Js(4,a,a.return),Bl(a);break;case 1:br(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&ZE(a,a.return,l),Bl(a);break;case 26:case 27:case 5:br(a,a.return),Bl(a);break;case 22:br(a,a.return),a.memoizedState===null&&Bl(a);break;default:Bl(a)}i=i.sibling}}function ea(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,m=i,g=a,E=g.flags;switch(g.tag){case 0:case 11:case 15:ea(m,g,l),qc(4,g);break;case 1:if(ea(m,g,l),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(F){xt(c,c.return,F)}if(c=g,m=c.updateQueue,m!==null){var A=c.stateNode;try{var V=m.shared.hiddenCallbacks;if(V!==null)for(m.shared.hiddenCallbacks=null,m=0;m<V.length;m++)WE(V[m],A)}catch(F){xt(c,c.return,F)}}l&&E&64&&XE(g),Io(g,g.return);break;case 26:case 27:case 5:ea(m,g,l),l&&c===null&&E&4&&JE(g),Io(g,g.return);break;case 12:ea(m,g,l);break;case 13:ea(m,g,l),l&&E&4&&ow(m,g);break;case 22:g.memoizedState===null&&ea(m,g,l),Io(g,g.return);break;default:ea(m,g,l)}a=a.sibling}}function Jg(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&kc(l))}function ey(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&kc(i))}function ta(i,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)cw(i,a,l,c),a=a.sibling}function cw(i,a,l,c){var m=a.flags;switch(a.tag){case 0:case 11:case 15:ta(i,a,l,c),m&2048&&qc(9,a);break;case 3:ta(i,a,l,c),m&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&kc(i)));break;case 12:if(m&2048){ta(i,a,l,c),i=a.stateNode;try{var g=a.memoizedProps,E=g.id,A=g.onPostCommit;typeof A=="function"&&A(E,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(V){xt(a,a.return,V)}}else ta(i,a,l,c);break;case 23:break;case 22:g=a.stateNode,a.memoizedState!==null?g._visibility&4?ta(i,a,l,c):Hc(i,a):g._visibility&4?ta(i,a,l,c):(g._visibility|=4,ql(i,a,l,c,(a.subtreeFlags&10256)!==0)),m&2048&&Jg(a.alternate,a);break;case 24:ta(i,a,l,c),m&2048&&ey(a.alternate,a);break;default:ta(i,a,l,c)}}function ql(i,a,l,c,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=i,E=a,A=l,V=c,F=E.flags;switch(E.tag){case 0:case 11:case 15:ql(g,E,A,V,m),qc(8,E);break;case 23:break;case 22:var ne=E.stateNode;E.memoizedState!==null?ne._visibility&4?ql(g,E,A,V,m):Hc(g,E):(ne._visibility|=4,ql(g,E,A,V,m)),m&&F&2048&&Jg(E.alternate,E);break;case 24:ql(g,E,A,V,m),m&&F&2048&&ey(E.alternate,E);break;default:ql(g,E,A,V,m)}a=a.sibling}}function Hc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,c=a,m=c.flags;switch(c.tag){case 22:Hc(l,c),m&2048&&Jg(c.alternate,c);break;case 24:Hc(l,c),m&2048&&ey(c.alternate,c);break;default:Hc(l,c)}a=a.sibling}}var Gc=8192;function Hl(i){if(i.subtreeFlags&Gc)for(i=i.child;i!==null;)hw(i),i=i.sibling}function hw(i){switch(i.tag){case 26:Hl(i),i.flags&Gc&&i.memoizedState!==null&&iD(ti,i.memoizedState,i.memoizedProps);break;case 5:Hl(i);break;case 3:case 4:var a=ti;ti=zf(i.stateNode.containerInfo),Hl(i),ti=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=Gc,Gc=16777216,Hl(i),Gc=a):Hl(i));break;default:Hl(i)}}function dw(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Kc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];An=c,mw(c,i)}dw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)fw(i),i=i.sibling}function fw(i){switch(i.tag){case 0:case 11:case 15:Kc(i),i.flags&2048&&Js(9,i,i.return);break;case 3:Kc(i);break;case 12:Kc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&4&&(i.return===null||i.return.tag!==13)?(a._visibility&=-5,Af(i)):Kc(i);break;default:Kc(i)}}function Af(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];An=c,mw(c,i)}dw(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Js(8,a,a.return),Af(a);break;case 22:l=a.stateNode,l._visibility&4&&(l._visibility&=-5,Af(a));break;default:Af(a)}i=i.sibling}}function mw(i,a){for(;An!==null;){var l=An;switch(l.tag){case 0:case 11:case 15:Js(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:kc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,An=c;else e:for(l=i;An!==null;){c=An;var m=c.sibling,g=c.return;if(sw(c),c===l){An=null;break e}if(m!==null){m.return=g,An=m;break e}An=g}}}function y2(i,a,l,c){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(i,a,l,c){return new y2(i,a,l,c)}function ty(i){return i=i.prototype,!(!i||!i.isReactComponent)}function na(i,a){var l=i.alternate;return l===null?(l=qr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&31457280,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function pw(i,a){i.flags&=31457282;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Sf(i,a,l,c,m,g){var E=0;if(c=i,typeof i=="function")ty(i)&&(E=1);else if(typeof i=="string")E=nD(i,l,Pe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case d:return Ao(l.children,m,g,a);case p:E=8,m|=24;break;case y:return i=qr(12,l,a,m|2),i.elementType=y,i.lanes=g,i;case j:return i=qr(13,l,a,m),i.elementType=j,i.lanes=g,i;case U:return i=qr(19,l,a,m),i.elementType=U,i.lanes=g,i;case K:return gw(l,m,g,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case v:case R:E=10;break e;case x:E=9;break e;case N:E=11;break e;case B:E=14;break e;case te:E=16,c=null;break e}E=29,l=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=qr(E,l,a,m),a.elementType=i,a.type=c,a.lanes=g,a}function Ao(i,a,l,c){return i=qr(7,i,c,a),i.lanes=l,i}function gw(i,a,l,c){i=qr(22,i,c,a),i.elementType=K,i.lanes=l;var m={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=m._current;if(g===null)throw Error(r(456));if((m._pendingVisibility&2)===0){var E=Hs(g,2);E!==null&&(m._pendingVisibility|=2,rr(E,g,2))}},attach:function(){var g=m._current;if(g===null)throw Error(r(456));if((m._pendingVisibility&2)!==0){var E=Hs(g,2);E!==null&&(m._pendingVisibility&=-3,rr(E,g,2))}}};return i.stateNode=m,i}function ny(i,a,l){return i=qr(6,i,null,a),i.lanes=l,i}function ry(i,a,l){return a=qr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function os(i){i.flags|=4}function yw(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!tT(a)){if(a=zr.current,a!==null&&((ut&4194176)===ut?vi!==null:(ut&62914560)!==ut&&(ut&536870912)===0||a!==vi))throw Dc=lg,Ob;i.flags|=8192}}function Rf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Xr():536870912,i.lanes|=a,Kl|=a)}function $c(i,a){if(!mt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function jt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,c=0;if(a)for(var m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags&31457280,c|=m.flags&31457280,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=c,i.childLanes=l,a}function _2(i,a,l){var c=a.pendingProps;switch(ag(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(a),null;case 1:return jt(a),null;case 3:return l=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),rs(yn),Me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Ac(a)?os(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ei!==null&&(hy(ei),ei=null))),jt(a),null;case 26:return l=a.memoizedState,i===null?(os(a),l!==null?(jt(a),yw(a,l)):(jt(a),a.flags&=-16777217)):l?l!==i.memoizedState?(os(a),jt(a),yw(a,l)):(jt(a),a.flags&=-16777217):(i.memoizedProps!==c&&os(a),jt(a),a.flags&=-16777217),null;case 27:ze(a),l=nt.current;var m=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==c&&os(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return jt(a),null}i=Pe.current,Ac(a)?Pb(a):(i=$w(m,c,l),a.stateNode=i,os(a))}return jt(a),null;case 5:if(ze(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&os(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return jt(a),null}if(i=Pe.current,Ac(a))Pb(a);else{switch(m=jf(nt.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?m.createElement(l,{is:c.is}):m.createElement(l)}}i[wn]=a,i[fn]=c;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=i;e:switch(Ln(i,l,c),l){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&os(a)}}return jt(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&os(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=nt.current,Ac(a)){if(i=a.stateNode,l=a.memoizedProps,c=null,m=nr,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}i[wn]=a,i=!!(i.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Fw(i.nodeValue,l)),i||go(a)}else i=jf(i).createTextNode(c),i[wn]=a,a.stateNode=i}return jt(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Ac(a),c!==null&&c.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[wn]=a}else Sc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;jt(a),m=!1}else ei!==null&&(hy(ei),ei=null),m=!0;if(!m)return a.flags&256?(Ji(a),a):(Ji(a),null)}if(Ji(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=c!==null,i=i!==null&&i.memoizedState!==null,l){c=a.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),Rf(a,a.updateQueue),jt(a),null;case 4:return Me(),i===null&&wy(a.stateNode.containerInfo),jt(a),null;case 10:return rs(a.type),jt(a),null;case 19:if(Se(gn),m=a.memoizedState,m===null)return jt(a),null;if(c=(a.flags&128)!==0,g=m.rendering,g===null)if(c)$c(m,!1);else{if(Qt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(g=hf(i),g!==null){for(a.flags|=128,$c(m,!1),i=g.updateQueue,a.updateQueue=i,Rf(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)pw(l,i),l=l.sibling;return De(gn,gn.current&1|2),a.child}i=i.sibling}m.tail!==null&&it()>Cf&&(a.flags|=128,c=!0,$c(m,!1),a.lanes=4194304)}else{if(!c)if(i=hf(g),i!==null){if(a.flags|=128,c=!0,i=i.updateQueue,a.updateQueue=i,Rf(a,i),$c(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!mt)return jt(a),null}else 2*it()-m.renderingStartTime>Cf&&l!==536870912&&(a.flags|=128,c=!0,$c(m,!1),a.lanes=4194304);m.isBackwards?(g.sibling=a.child,a.child=g):(i=m.last,i!==null?i.sibling=g:a.child=g,m.last=g)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=it(),a.sibling=null,i=gn.current,De(gn,c?i&1|2:i&1),a):(jt(a),null);case 22:case 23:return Ji(a),cg(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(jt(a),a.subtreeFlags&6&&(a.flags|=8192)):jt(a),l=a.updateQueue,l!==null&&Rf(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),i!==null&&Se(_o),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),rs(yn),jt(a),null;case 25:return null}throw Error(r(156,a.tag))}function v2(i,a){switch(ag(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return rs(yn),Me(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return ze(a),null;case 13:if(Ji(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Sc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Se(gn),null;case 4:return Me(),null;case 10:return rs(a.type),null;case 22:case 23:return Ji(a),cg(),i!==null&&Se(_o),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return rs(yn),null;case 25:return null;default:return null}}function _w(i,a){switch(ag(a),a.tag){case 3:rs(yn),Me();break;case 26:case 27:case 5:ze(a);break;case 4:Me();break;case 13:Ji(a);break;case 19:Se(gn);break;case 10:rs(a.type);break;case 22:case 23:Ji(a),cg(),i!==null&&Se(_o);break;case 24:rs(yn)}}var b2={getCacheForType:function(i){var a=Kn(yn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},E2=typeof WeakMap=="function"?WeakMap:Map,zt=0,At=null,Xe=null,ut=0,St=0,wr=null,ls=!1,Gl=!1,iy=!1,us=0,Qt=0,ra=0,So=0,sy=0,Hr=0,Kl=0,Qc=null,Ei=null,ay=!1,oy=0,Cf=1/0,Df=null,ia=null,Nf=!1,Ro=null,Wc=0,ly=0,uy=null,Yc=0,cy=null;function Tr(){if((zt&2)!==0&&ut!==0)return ut&-ut;if(w.T!==null){var i=Ll;return i!==0?i:_y()}return Md()}function vw(){Hr===0&&(Hr=(ut&536870912)===0||mt?Ps():536870912);var i=zr.current;return i!==null&&(i.flags|=32),Hr}function rr(i,a,l){(i===At&&St===2||i.cancelPendingCommit!==null)&&($l(i,0),cs(i,ut,Hr,!1)),Nt(i,l),((zt&2)===0||i!==At)&&(i===At&&((zt&2)===0&&(So|=l),Qt===4&&cs(i,ut,Hr,!1)),wi(i))}function bw(i,a,l){if((zt&6)!==0)throw Error(r(327));var c=!l&&(a&60)===0&&(a&i.expiredLanes)===0||Yr(i,a),m=c?x2(i,a):my(i,a,!0),g=c;do{if(m===0){Gl&&!c&&cs(i,a,0,!1);break}else if(m===6)cs(i,a,0,!ls);else{if(l=i.current.alternate,g&&!w2(l)){m=my(i,a,!1),g=!1;continue}if(m===2){if(g=a,i.errorRecoveryDisabledLanes&g)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var A=i;m=Qc;var V=A.current.memoizedState.isDehydrated;if(V&&($l(A,E).flags|=256),E=my(A,E,!1),E!==2){if(iy&&!V){A.errorRecoveryDisabledLanes|=g,So|=g,m=4;break e}g=Ei,Ei=m,g!==null&&hy(g)}m=E}if(g=!1,m!==2)continue}}if(m===1){$l(i,0),cs(i,a,0,!0);break}e:{switch(c=i,m){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){cs(c,a,Hr,!ls);break e}break;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(r(329))}if(c.finishedWork=l,c.finishedLanes=a,(a&62914560)===a&&(g=oy+300-it(),10<g)){if(cs(c,a,Hr,!ls),Jn(c,0)!==0)break e;c.timeoutHandle=Hw(Ew.bind(null,c,l,Ei,Df,ay,a,Hr,So,Kl,ls,2,-0,0),g);break e}Ew(c,l,Ei,Df,ay,a,Hr,So,Kl,ls,0,-0,0)}}break}while(!0);wi(i)}function hy(i){Ei===null?Ei=i:Ei.push.apply(Ei,i)}function Ew(i,a,l,c,m,g,E,A,V,F,ne,oe,Q){var ee=a.subtreeFlags;if((ee&8192||(ee&16785408)===16785408)&&(nh={stylesheets:null,count:0,unsuspend:rD},hw(a),a=sD(),a!==null)){i.cancelPendingCommit=a(Rw.bind(null,i,l,c,m,E,A,V,1,oe,Q)),cs(i,g,E,!F);return}Rw(i,l,c,m,E,A,V,ne,oe,Q)}function w2(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var m=l[c],g=m.getSnapshot;m=m.value;try{if(!vr(g(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function cs(i,a,l,c){a&=~sy,a&=~So,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var m=a;0<m;){var g=31-dn(m),E=1<<g;c[g]=-1,m&=~E}l!==0&&ks(i,l,a)}function Pf(){return(zt&6)===0?(Xc(0),!1):!0}function dy(){if(Xe!==null){if(St===0)var i=Xe.return;else i=Xe,ns=To=null,_g(i),Vl=null,Nc=0,i=Xe;for(;i!==null;)_w(i.alternate,i),i=i.return;Xe=null}}function $l(i,a){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,F2(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),dy(),At=i,Xe=l=na(i.current,null),ut=a,St=0,wr=null,ls=!1,Gl=Yr(i,a),iy=!1,Kl=Hr=sy=So=ra=Qt=0,Ei=Qc=null,ay=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var m=31-dn(c),g=1<<m;a|=i[m],c&=~g}return us=a,tf(),l}function ww(i,a){$e=null,w.H=bi,a===Cc?(a=Lb(),St=3):a===Ob?(a=Lb(),St=4):St=a===VE?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,wr=a,Xe===null&&(Qt=1,wf(i,Lr(a,i.current)))}function Tw(){var i=w.H;return w.H=bi,i===null?bi:i}function xw(){var i=w.A;return w.A=b2,i}function fy(){Qt=4,ls||(ut&4194176)!==ut&&zr.current!==null||(Gl=!0),(ra&134217727)===0&&(So&134217727)===0||At===null||cs(At,ut,Hr,!1)}function my(i,a,l){var c=zt;zt|=2;var m=Tw(),g=xw();(At!==i||ut!==a)&&(Df=null,$l(i,a)),a=!1;var E=Qt;e:do try{if(St!==0&&Xe!==null){var A=Xe,V=wr;switch(St){case 8:dy(),E=6;break e;case 3:case 2:case 6:zr.current===null&&(a=!0);var F=St;if(St=0,wr=null,Ql(i,A,V,F),l&&Gl){E=0;break e}break;default:F=St,St=0,wr=null,Ql(i,A,V,F)}}T2(),E=Qt;break}catch(ne){ww(i,ne)}while(!0);return a&&i.shellSuspendCounter++,ns=To=null,zt=c,w.H=m,w.A=g,Xe===null&&(At=null,ut=0,tf()),E}function T2(){for(;Xe!==null;)Iw(Xe)}function x2(i,a){var l=zt;zt|=2;var c=Tw(),m=xw();At!==i||ut!==a?(Df=null,Cf=it()+500,$l(i,a)):Gl=Yr(i,a);e:do try{if(St!==0&&Xe!==null){a=Xe;var g=wr;t:switch(St){case 1:St=0,wr=null,Ql(i,a,g,1);break;case 2:if(Vb(g)){St=0,wr=null,Aw(a);break}a=function(){St===2&&At===i&&(St=7),wi(i)},g.then(a,a);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:Vb(g)?(St=0,wr=null,Aw(a)):(St=0,wr=null,Ql(i,a,g,7));break;case 5:var E=null;switch(Xe.tag){case 26:E=Xe.memoizedState;case 5:case 27:var A=Xe;if(!E||tT(E)){St=0,wr=null;var V=A.sibling;if(V!==null)Xe=V;else{var F=A.return;F!==null?(Xe=F,kf(F)):Xe=null}break t}}St=0,wr=null,Ql(i,a,g,5);break;case 6:St=0,wr=null,Ql(i,a,g,6);break;case 8:dy(),Qt=6;break e;default:throw Error(r(462))}}I2();break}catch(ne){ww(i,ne)}while(!0);return ns=To=null,w.H=c,w.A=m,zt=l,Xe!==null?0:(At=null,ut=0,tf(),Qt)}function I2(){for(;Xe!==null&&!En();)Iw(Xe)}function Iw(i){var a=$E(i.alternate,i,us);i.memoizedProps=i.pendingProps,a===null?kf(i):Xe=a}function Aw(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=FE(l,a,a.pendingProps,a.type,void 0,ut);break;case 11:a=FE(l,a,a.pendingProps,a.type.render,a.ref,ut);break;case 5:_g(a);default:_w(l,a),a=Xe=pw(a,us),a=$E(l,a,us)}i.memoizedProps=i.pendingProps,a===null?kf(i):Xe=a}function Ql(i,a,l,c){ns=To=null,_g(a),Vl=null,Nc=0;var m=a.return;try{if(f2(i,m,a,l,ut)){Qt=1,wf(i,Lr(l,i.current)),Xe=null;return}}catch(g){if(m!==null)throw Xe=m,g;Qt=1,wf(i,Lr(l,i.current)),Xe=null;return}a.flags&32768?(mt||c===1?i=!0:Gl||(ut&536870912)!==0?i=!1:(ls=i=!0,(c===2||c===3||c===6)&&(c=zr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Sw(a,i)):kf(a)}function kf(i){var a=i;do{if((a.flags&32768)!==0){Sw(a,ls);return}i=a.return;var l=_2(a.alternate,a,us);if(l!==null){Xe=l;return}if(a=a.sibling,a!==null){Xe=a;return}Xe=a=i}while(a!==null);Qt===0&&(Qt=5)}function Sw(i,a){do{var l=v2(i.alternate,i);if(l!==null){l.flags&=32767,Xe=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=l}while(i!==null);Qt=6,Xe=null}function Rw(i,a,l,c,m,g,E,A,V,F){var ne=w.T,oe=fe.p;try{fe.p=2,w.T=null,A2(i,a,l,c,oe,m,g,E,A,V,F)}finally{w.T=ne,fe.p=oe}}function A2(i,a,l,c,m,g,E,A){do Wl();while(Ro!==null);if((zt&6)!==0)throw Error(r(327));var V=i.finishedWork;if(c=i.finishedLanes,V===null)return null;if(i.finishedWork=null,i.finishedLanes=0,V===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var F=V.lanes|V.childLanes;if(F|=rg,Za(i,c,F,g,E,A),i===At&&(Xe=At=null,ut=0),(V.subtreeFlags&10256)===0&&(V.flags&10256)===0||Nf||(Nf=!0,ly=F,uy=l,D2(Lt,function(){return Wl(),null})),l=(V.flags&15990)!==0,(V.subtreeFlags&15990)!==0||l?(l=w.T,w.T=null,g=fe.p,fe.p=2,E=zt,zt|=4,p2(i,V),lw(V,i),YC(Ay,i.containerInfo),Gf=!!Iy,Ay=Iy=null,i.current=V,iw(i,V.alternate,V),Zn(),zt=E,fe.p=g,w.T=l):i.current=V,Nf?(Nf=!1,Ro=i,Wc=c):Cw(i,F),F=i.pendingLanes,F===0&&(ia=null),Gn(V.stateNode),wi(i),a!==null)for(m=i.onRecoverableError,V=0;V<a.length;V++)F=a[V],m(F.value,{componentStack:F.stack});return(Wc&3)!==0&&Wl(),F=i.pendingLanes,(c&4194218)!==0&&(F&42)!==0?i===cy?Yc++:(Yc=0,cy=i):Yc=0,Xc(0),null}function Cw(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,kc(a)))}function Wl(){if(Ro!==null){var i=Ro,a=ly;ly=0;var l=Vd(Wc),c=w.T,m=fe.p;try{if(fe.p=32>l?32:l,w.T=null,Ro===null)var g=!1;else{l=uy,uy=null;var E=Ro,A=Wc;if(Ro=null,Wc=0,(zt&6)!==0)throw Error(r(331));var V=zt;if(zt|=4,fw(E.current),cw(E,E.current,A,l),zt=V,Xc(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(dt,E)}catch{}g=!0}return g}finally{fe.p=m,w.T=c,Cw(i,a)}}return!1}function Dw(i,a,l){a=Lr(l,a),a=Pg(i.stateNode,a,2),i=Zs(i,a,2),i!==null&&(Nt(i,2),wi(i))}function xt(i,a,l){if(i.tag===3)Dw(i,i,l);else for(;a!==null;){if(a.tag===3){Dw(a,i,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ia===null||!ia.has(c))){i=Lr(l,i),l=kE(2),c=Zs(a,l,2),c!==null&&(OE(l,c,a,i),Nt(c,2),wi(c));break}}a=a.return}}function py(i,a,l){var c=i.pingCache;if(c===null){c=i.pingCache=new E2;var m=new Set;c.set(a,m)}else m=c.get(a),m===void 0&&(m=new Set,c.set(a,m));m.has(l)||(iy=!0,m.add(l),i=S2.bind(null,i,a,l),a.then(i,i))}function S2(i,a,l){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,At===i&&(ut&l)===l&&(Qt===4||Qt===3&&(ut&62914560)===ut&&300>it()-oy?(zt&2)===0&&$l(i,0):sy|=l,Kl===ut&&(Kl=0)),wi(i)}function Nw(i,a){a===0&&(a=Xr()),i=Hs(i,a),i!==null&&(Nt(i,a),wi(i))}function R2(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),Nw(i,l)}function C2(i,a){var l=0;switch(i.tag){case 13:var c=i.stateNode,m=i.memoizedState;m!==null&&(l=m.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),Nw(i,l)}function D2(i,a){return _t(i,a)}var Of=null,Yl=null,gy=!1,Vf=!1,yy=!1,Co=0;function wi(i){i!==Yl&&i.next===null&&(Yl===null?Of=Yl=i:Yl=Yl.next=i),Vf=!0,gy||(gy=!0,P2(N2))}function Xc(i,a){if(!yy&&Vf){yy=!0;do for(var l=!1,c=Of;c!==null;){if(i!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var E=c.suspendedLanes,A=c.pingedLanes;g=(1<<31-dn(42|i)+1)-1,g&=m&~(E&~A),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(l=!0,Ow(c,g))}else g=ut,g=Jn(c,c===At?g:0),(g&3)===0||Yr(c,g)||(l=!0,Ow(c,g));c=c.next}while(l);yy=!1}}function N2(){Vf=gy=!1;var i=0;Co!==0&&(z2()&&(i=Co),Co=0);for(var a=it(),l=null,c=Of;c!==null;){var m=c.next,g=Pw(c,a);g===0?(c.next=null,l===null?Of=m:l.next=m,m===null&&(Yl=l)):(l=c,(i!==0||(g&3)!==0)&&(Vf=!0)),c=m}Xc(i)}function Pw(i,a){for(var l=i.suspendedLanes,c=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var E=31-dn(g),A=1<<E,V=m[E];V===-1?((A&l)===0||(A&c)!==0)&&(m[E]=zi(A,a)):V<=a&&(i.expiredLanes|=A),g&=~A}if(a=At,l=ut,l=Jn(i,i===a?l:0),c=i.callbackNode,l===0||i===a&&St===2||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Pn(c),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Yr(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(c!==null&&Pn(c),Vd(l)){case 2:case 8:l=Ye;break;case 32:l=Lt;break;case 268435456:l=Dr;break;default:l=Lt}return c=kw.bind(null,i),l=_t(l,c),i.callbackPriority=a,i.callbackNode=l,a}return c!==null&&c!==null&&Pn(c),i.callbackPriority=2,i.callbackNode=null,2}function kw(i,a){var l=i.callbackNode;if(Wl()&&i.callbackNode!==l)return null;var c=ut;return c=Jn(i,i===At?c:0),c===0?null:(bw(i,c,a),Pw(i,it()),i.callbackNode!=null&&i.callbackNode===l?kw.bind(null,i):null)}function Ow(i,a){if(Wl())return null;bw(i,a,!0)}function P2(i){B2(function(){(zt&6)!==0?_t(qe,i):i()})}function _y(){return Co===0&&(Co=Ps()),Co}function Vw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:hi(""+i)}function Mw(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function k2(i,a,l,c,m){if(a==="submit"&&l&&l.stateNode===m){var g=Vw((m[fn]||null).action),E=c.submitter;E&&(a=(a=E[fn]||null)?Vw(a.formAction):E.getAttribute("formAction"),a!==null&&(g=a,E=null));var A=new El("action","action",null,c,m);i.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Co!==0){var V=E?Mw(m,E):new FormData(m);Sg(l,{pending:!0,data:V,method:m.method,action:g},null,V)}}else typeof g=="function"&&(A.preventDefault(),V=E?Mw(m,E):new FormData(m),Sg(l,{pending:!0,data:V,method:m.method,action:g},g,V))},currentTarget:m}]})}}for(var vy=0;vy<Rb.length;vy++){var by=Rb[vy],O2=by.toLowerCase(),V2=by[0].toUpperCase()+by.slice(1);Jr(O2,"on"+V2)}Jr(Tb,"onAnimationEnd"),Jr(xb,"onAnimationIteration"),Jr(Ib,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(ZC,"onTransitionRun"),Jr(JC,"onTransitionStart"),Jr(e2,"onTransitionCancel"),Jr(Ab,"onTransitionEnd"),cr("onMouseEnter",["mouseout","mouseover"]),cr("onMouseLeave",["mouseout","mouseover"]),cr("onPointerEnter",["pointerout","pointerover"]),cr("onPointerLeave",["pointerout","pointerover"]),yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zc));function Lw(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var c=i[l],m=c.event;c=c.listeners;e:{var g=void 0;if(a)for(var E=c.length-1;0<=E;E--){var A=c[E],V=A.instance,F=A.currentTarget;if(A=A.listener,V!==g&&m.isPropagationStopped())break e;g=A,m.currentTarget=F;try{g(m)}catch(ne){Ef(ne)}m.currentTarget=null,g=V}else for(E=0;E<c.length;E++){if(A=c[E],V=A.instance,F=A.currentTarget,A=A.listener,V!==g&&m.isPropagationStopped())break e;g=A,m.currentTarget=F;try{g(m)}catch(ne){Ef(ne)}m.currentTarget=null,g=V}}}}function st(i,a){var l=a[Ja];l===void 0&&(l=a[Ja]=new Set);var c=i+"__bubble";l.has(c)||(Uw(a,i,2,!1),l.add(c))}function Ey(i,a,l){var c=0;a&&(c|=4),Uw(l,i,c,a)}var Mf="_reactListening"+Math.random().toString(36).slice(2);function wy(i){if(!i[Mf]){i[Mf]=!0,cc.forEach(function(l){l!=="selectionchange"&&(M2.has(l)||Ey(l,!1,i),Ey(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Mf]||(a[Mf]=!0,Ey("selectionchange",!1,a))}}function Uw(i,a,l,c){switch(oT(a)){case 2:var m=lD;break;case 8:m=uD;break;default:m=Vy}l=m.bind(null,a,l,i),m=void 0,!Or||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),c?m!==void 0?i.addEventListener(a,l,{capture:!0,passive:m}):i.addEventListener(a,l,!0):m!==void 0?i.addEventListener(a,l,{passive:m}):i.addEventListener(a,l,!1)}function Ty(i,a,l,c,m){var g=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var A=c.stateNode.containerInfo;if(A===m||A.nodeType===8&&A.parentNode===m)break;if(E===4)for(E=c.return;E!==null;){var V=E.tag;if((V===3||V===4)&&(V=E.stateNode.containerInfo,V===m||V.nodeType===8&&V.parentNode===m))return;E=E.return}for(;A!==null;){if(E=Zr(A),E===null)return;if(V=E.tag,V===5||V===6||V===26||V===27){c=g=E;continue e}A=A.parentNode}}c=c.return}zd(function(){var F=g,ne=bl(l),oe=[];e:{var Q=Sb.get(i);if(Q!==void 0){var ee=El,Re=i;switch(i){case"keypress":if(fi(l)===0)break e;case"keydown":case"keyup":ee=Sl;break;case"focusin":Re="focus",ee=xl;break;case"focusout":Re="blur",ee=xl;break;case"beforeblur":case"afterblur":ee=xl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Vr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Wp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Qd;break;case Tb:case xb:case Ib:ee=Il;break;case Ab:ee=Yd;break;case"scroll":case"scrollend":ee=Fd;break;case"wheel":ee=Rl;break;case"copy":case"cut":case"paste":ee=Al;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=wc;break;case"toggle":case"beforetoggle":ee=Zd}var Fe=(a&4)!==0,Wt=!Fe&&(i==="scroll"||i==="scrollend"),q=Fe?Q!==null?Q+"Capture":null:Q;Fe=[];for(var z=F,$;z!==null;){var se=z;if($=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||$===null||q===null||(se=io(z,q),se!=null&&Fe.push(Jc(z,se,$))),Wt)break;z=z.return}0<Fe.length&&(Q=new ee(Q,Re,null,l,ne),oe.push({event:Q,listeners:Fe}))}}if((a&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",ee=i==="mouseout"||i==="pointerout",Q&&l!==kr&&(Re=l.relatedTarget||l.fromElement)&&(Zr(Re)||Re[Bi]))break e;if((ee||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,ee?(Re=l.relatedTarget||l.toElement,ee=F,Re=Re?Zr(Re):null,Re!==null&&(Wt=he(Re),Fe=Re.tag,Re!==Wt||Fe!==5&&Fe!==27&&Fe!==6)&&(Re=null)):(ee=null,Re=F),ee!==Re)){if(Fe=Vr,se="onMouseLeave",q="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(Fe=wc,se="onPointerLeave",q="onPointerEnter",z="pointer"),Wt=ee==null?Q:Ls(ee),$=Re==null?Q:Ls(Re),Q=new Fe(se,z+"leave",ee,l,ne),Q.target=Wt,Q.relatedTarget=$,se=null,Zr(ne)===F&&(Fe=new Fe(q,z+"enter",Re,l,ne),Fe.target=$,Fe.relatedTarget=Wt,se=Fe),Wt=se,ee&&Re)t:{for(Fe=ee,q=Re,z=0,$=Fe;$;$=Xl($))z++;for($=0,se=q;se;se=Xl(se))$++;for(;0<z-$;)Fe=Xl(Fe),z--;for(;0<$-z;)q=Xl(q),$--;for(;z--;){if(Fe===q||q!==null&&Fe===q.alternate)break t;Fe=Xl(Fe),q=Xl(q)}Fe=null}else Fe=null;ee!==null&&jw(oe,Q,ee,Fe,!1),Re!==null&&Wt!==null&&jw(oe,Wt,Re,Fe,!0)}}e:{if(Q=F?Ls(F):window,ee=Q.nodeName&&Q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&Q.type==="file")var Te=db;else if(pn(Q))if(fb)Te=QC;else{Te=KC;var Qe=GC}else ee=Q.nodeName,!ee||ee.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?F&&pc(F.elementType)&&(Te=db):Te=$C;if(Te&&(Te=Te(i,F))){Yi(oe,Te,l,ne);break e}Qe&&Qe(i,Q,F),i==="focusout"&&F&&Q.type==="number"&&F.memoizedProps.value!=null&&vl(Q,"number",Q.value)}switch(Qe=F?Ls(F):window,i){case"focusin":(pn(Qe)||Qe.contentEditable==="true")&&(Cl=Qe,eg=F,Ic=null);break;case"focusout":Ic=eg=Cl=null;break;case"mousedown":tg=!0;break;case"contextmenu":case"mouseup":case"dragend":tg=!1,Eb(oe,l,ne);break;case"selectionchange":if(XC)break;case"keydown":case"keyup":Eb(oe,l,ne)}var Ne;if(gi)e:{switch(i){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ot?X(i,l)&&(Le="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Le="onCompositionStart");Le&&(b&&l.locale!=="ko"&&(ot||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ot&&(Ne=yc()):(di=ne,qs="value"in di?di.value:di.textContent,ot=!0)),Qe=Lf(F,Le),0<Qe.length&&(Le=new bc(Le,i,null,l,ne),oe.push({event:Le,listeners:Qe}),Ne?Le.data=Ne:(Ne=ge(l),Ne!==null&&(Le.data=Ne)))),(Ne=_?mn(i,l):lt(i,l))&&(Le=Lf(F,"onBeforeInput"),0<Le.length&&(Qe=new bc("onBeforeInput","beforeinput",null,l,ne),oe.push({event:Qe,listeners:Le}),Qe.data=Ne)),k2(oe,i,F,l,ne)}Lw(oe,a)})}function Jc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Lf(i,a){for(var l=a+"Capture",c=[];i!==null;){var m=i,g=m.stateNode;m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=io(i,l),m!=null&&c.unshift(Jc(i,m,g)),m=io(i,a),m!=null&&c.push(Jc(i,m,g))),i=i.return}return c}function Xl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function jw(i,a,l,c,m){for(var g=a._reactName,E=[];l!==null&&l!==c;){var A=l,V=A.alternate,F=A.stateNode;if(A=A.tag,V!==null&&V===c)break;A!==5&&A!==26&&A!==27||F===null||(V=F,m?(F=io(l,g),F!=null&&E.unshift(Jc(l,F,V))):m||(F=io(l,g),F!=null&&E.push(Jc(l,F,V)))),l=l.return}E.length!==0&&i.push({event:a,listeners:E})}var L2=/\r\n?/g,U2=/\u0000|\uFFFD/g;function zw(i){return(typeof i=="string"?i:""+i).replace(L2,`
`).replace(U2,"")}function Fw(i,a){return a=zw(a),zw(i)===a}function Uf(){}function Tt(i,a,l,c,m,g){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Pr(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Pr(i,""+c);break;case"className":zs(i,"class",c);break;case"tabIndex":zs(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":zs(i,l,c);break;case"style":jd(i,c,g);break;case"data":if(a!=="object"){zs(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=hi(""+c),i.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&Tt(i,a,"name",m.name,m,null),Tt(i,a,"formEncType",m.formEncType,m,null),Tt(i,a,"formMethod",m.formMethod,m,null),Tt(i,a,"formTarget",m.formTarget,m,null)):(Tt(i,a,"encType",m.encType,m,null),Tt(i,a,"method",m.method,m,null),Tt(i,a,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(l);break}c=hi(""+c),i.setAttribute(l,c);break;case"onClick":c!=null&&(i.onclick=Uf);break;case"onScroll":c!=null&&st("scroll",i);break;case"onScrollEnd":c!=null&&st("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}l=hi(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""+c):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":c===!0?i.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(l,c):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(l,c):i.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(l):i.setAttribute(l,c);break;case"popover":st("beforetoggle",i),st("toggle",i),js(i,"popover",c);break;case"xlinkActuate":Nr(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Nr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Nr(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Nr(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Nr(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Nr(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Nr(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Nr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Nr(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":js(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=$p.get(l)||l,js(i,l,c))}}function xy(i,a,l,c,m,g){switch(l){case"style":jd(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof c=="string"?Pr(i,c):(typeof c=="number"||typeof c=="bigint")&&Pr(i,""+c);break;case"onScroll":c!=null&&st("scroll",i);break;case"onScrollEnd":c!=null&&st("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Uf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),g=i[fn]||null,g=g!=null?g[l]:null,typeof g=="function"&&i.removeEventListener(a,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,c,m);break e}l in i?i[l]=c:c===!0?i.setAttribute(l,""):js(i,l,c)}}}function Ln(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",i),st("load",i);var c=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var E=l[g];if(E!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(i,a,g,E,l,null)}}m&&Tt(i,a,"srcSet",l.srcSet,l,null),c&&Tt(i,a,"src",l.src,l,null);return;case"input":st("invalid",i);var A=g=E=m=null,V=null,F=null;for(c in l)if(l.hasOwnProperty(c)){var ne=l[c];if(ne!=null)switch(c){case"name":m=ne;break;case"type":E=ne;break;case"checked":V=ne;break;case"defaultChecked":F=ne;break;case"value":g=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:Tt(i,a,c,ne,l,null)}}no(i,g,A,V,F,E,m,!1),to(i);return;case"select":st("invalid",i),c=E=g=null;for(m in l)if(l.hasOwnProperty(m)&&(A=l[m],A!=null))switch(m){case"value":g=A;break;case"defaultValue":E=A;break;case"multiple":c=A;default:Tt(i,a,m,A,l,null)}a=g,l=E,i.multiple=!!c,a!=null?ft(i,!!c,a,!1):l!=null&&ft(i,!!c,l,!0);return;case"textarea":st("invalid",i),g=m=c=null;for(E in l)if(l.hasOwnProperty(E)&&(A=l[E],A!=null))switch(E){case"value":c=A;break;case"defaultValue":m=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Tt(i,a,E,A,l,null)}Bs(i,c,m,g),to(i);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(c=l[V],c!=null))switch(V){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Tt(i,a,V,c,l,null)}return;case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":st("load",i);break;case"video":case"audio":for(c=0;c<Zc.length;c++)st(Zc[c],i);break;case"image":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"embed":case"source":case"link":st("error",i),st("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(c=l[F],c!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Tt(i,a,F,c,l,null)}return;default:if(pc(a)){for(ne in l)l.hasOwnProperty(ne)&&(c=l[ne],c!==void 0&&xy(i,a,ne,c,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(c=l[A],c!=null&&Tt(i,a,A,c,l,null))}function j2(i,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,E=null,A=null,V=null,F=null,ne=null;for(ee in l){var oe=l[ee];if(l.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":V=oe;default:c.hasOwnProperty(ee)||Tt(i,a,ee,null,c,oe)}}for(var Q in c){var ee=c[Q];if(oe=l[Q],c.hasOwnProperty(Q)&&(ee!=null||oe!=null))switch(Q){case"type":g=ee;break;case"name":m=ee;break;case"checked":F=ee;break;case"defaultChecked":ne=ee;break;case"value":E=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,a));break;default:ee!==oe&&Tt(i,a,Q,ee,c,oe)}}Fs(i,E,A,V,F,ne,g,m);return;case"select":ee=E=A=Q=null;for(g in l)if(V=l[g],l.hasOwnProperty(g)&&V!=null)switch(g){case"value":break;case"multiple":ee=V;default:c.hasOwnProperty(g)||Tt(i,a,g,null,c,V)}for(m in c)if(g=c[m],V=l[m],c.hasOwnProperty(m)&&(g!=null||V!=null))switch(m){case"value":Q=g;break;case"defaultValue":A=g;break;case"multiple":E=g;default:g!==V&&Tt(i,a,m,g,c,V)}a=A,l=E,c=ee,Q!=null?ft(i,!!l,Q,!1):!!c!=!!l&&(a!=null?ft(i,!!l,a,!0):ft(i,!!l,l?[]:"",!1));return;case"textarea":ee=Q=null;for(A in l)if(m=l[A],l.hasOwnProperty(A)&&m!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Tt(i,a,A,null,c,m)}for(E in c)if(m=c[E],g=l[E],c.hasOwnProperty(E)&&(m!=null||g!=null))switch(E){case"value":Q=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&Tt(i,a,E,m,c,g)}ro(i,Q,ee);return;case"option":for(var Re in l)if(Q=l[Re],l.hasOwnProperty(Re)&&Q!=null&&!c.hasOwnProperty(Re))switch(Re){case"selected":i.selected=!1;break;default:Tt(i,a,Re,null,c,Q)}for(V in c)if(Q=c[V],ee=l[V],c.hasOwnProperty(V)&&Q!==ee&&(Q!=null||ee!=null))switch(V){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:Tt(i,a,V,Q,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in l)Q=l[Fe],l.hasOwnProperty(Fe)&&Q!=null&&!c.hasOwnProperty(Fe)&&Tt(i,a,Fe,null,c,Q);for(F in c)if(Q=c[F],ee=l[F],c.hasOwnProperty(F)&&Q!==ee&&(Q!=null||ee!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,a));break;default:Tt(i,a,F,Q,c,ee)}return;default:if(pc(a)){for(var Wt in l)Q=l[Wt],l.hasOwnProperty(Wt)&&Q!==void 0&&!c.hasOwnProperty(Wt)&&xy(i,a,Wt,void 0,c,Q);for(ne in c)Q=c[ne],ee=l[ne],!c.hasOwnProperty(ne)||Q===ee||Q===void 0&&ee===void 0||xy(i,a,ne,Q,c,ee);return}}for(var q in l)Q=l[q],l.hasOwnProperty(q)&&Q!=null&&!c.hasOwnProperty(q)&&Tt(i,a,q,null,c,Q);for(oe in c)Q=c[oe],ee=l[oe],!c.hasOwnProperty(oe)||Q===ee||Q==null&&ee==null||Tt(i,a,oe,Q,c,ee)}var Iy=null,Ay=null;function jf(i){return i.nodeType===9?i:i.ownerDocument}function Bw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qw(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Sy(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ry=null;function z2(){var i=window.event;return i&&i.type==="popstate"?i===Ry?!1:(Ry=i,!0):(Ry=null,!1)}var Hw=typeof setTimeout=="function"?setTimeout:void 0,F2=typeof clearTimeout=="function"?clearTimeout:void 0,Gw=typeof Promise=="function"?Promise:void 0,B2=typeof queueMicrotask=="function"?queueMicrotask:typeof Gw<"u"?function(i){return Gw.resolve(null).then(i).catch(q2)}:Hw;function q2(i){setTimeout(function(){throw i})}function Cy(i,a){var l=a,c=0;do{var m=l.nextSibling;if(i.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(c===0){i.removeChild(m),oh(a);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=m}while(l);oh(a)}function Dy(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Dy(l),eo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function H2(i,a,l,c){for(;i.nodeType===1;){var m=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ms])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=ni(i.nextSibling),i===null)break}return null}function G2(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=ni(i.nextSibling),i===null))return null;return i}function ni(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}function Kw(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function $w(i,a,l){switch(a=jf(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}var Gr=new Map,Qw=new Set;function zf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var hs=fe.d;fe.d={f:K2,r:$2,D:Q2,C:W2,L:Y2,m:X2,X:J2,S:Z2,M:eD};function K2(){var i=hs.f(),a=Pf();return i||a}function $2(i){var a=qi(i);a!==null&&a.tag===5&&a.type==="form"?EE(a):hs.r(i)}var Zl=typeof document>"u"?null:document;function Ww(i,a,l){var c=Zl;if(c&&typeof a=="string"&&a){var m=Kt(a);m='link[rel="'+i+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Qw.has(m)||(Qw.add(m),i={rel:i,crossOrigin:l,href:a},c.querySelector(m)===null&&(a=c.createElement("link"),Ln(a,"link",i),Ut(a),c.head.appendChild(a)))}}function Q2(i){hs.D(i),Ww("dns-prefetch",i,null)}function W2(i,a){hs.C(i,a),Ww("preconnect",i,a)}function Y2(i,a,l){hs.L(i,a,l);var c=Zl;if(c&&i&&a){var m='link[rel="preload"][as="'+Kt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Kt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Kt(l.imageSizes)+'"]')):m+='[href="'+Kt(i)+'"]';var g=m;switch(a){case"style":g=Jl(i);break;case"script":g=eu(i)}Gr.has(g)||(i=I({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Gr.set(g,i),c.querySelector(m)!==null||a==="style"&&c.querySelector(eh(g))||a==="script"&&c.querySelector(th(g))||(a=c.createElement("link"),Ln(a,"link",i),Ut(a),c.head.appendChild(a)))}}function X2(i,a){hs.m(i,a);var l=Zl;if(l&&i){var c=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Kt(c)+'"][href="'+Kt(i)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=eu(i)}if(!Gr.has(g)&&(i=I({rel:"modulepreload",href:i},a),Gr.set(g,i),l.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(th(g)))return}c=l.createElement("link"),Ln(c,"link",i),Ut(c),l.head.appendChild(c)}}}function Z2(i,a,l){hs.S(i,a,l);var c=Zl;if(c&&i){var m=Us(c).hoistableStyles,g=Jl(i);a=a||"default";var E=m.get(g);if(!E){var A={loading:0,preload:null};if(E=c.querySelector(eh(g)))A.loading=5;else{i=I({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Gr.get(g))&&Ny(i,l);var V=E=c.createElement("link");Ut(V),Ln(V,"link",i),V._p=new Promise(function(F,ne){V.onload=F,V.onerror=ne}),V.addEventListener("load",function(){A.loading|=1}),V.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ff(E,a,c)}E={type:"stylesheet",instance:E,count:1,state:A},m.set(g,E)}}}function J2(i,a){hs.X(i,a);var l=Zl;if(l&&i){var c=Us(l).hoistableScripts,m=eu(i),g=c.get(m);g||(g=l.querySelector(th(m)),g||(i=I({src:i,async:!0},a),(a=Gr.get(m))&&Py(i,a),g=l.createElement("script"),Ut(g),Ln(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function eD(i,a){hs.M(i,a);var l=Zl;if(l&&i){var c=Us(l).hoistableScripts,m=eu(i),g=c.get(m);g||(g=l.querySelector(th(m)),g||(i=I({src:i,async:!0,type:"module"},a),(a=Gr.get(m))&&Py(i,a),g=l.createElement("script"),Ut(g),Ln(g,"link",i),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function Yw(i,a,l,c){var m=(m=nt.current)?zf(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Jl(l.href),l=Us(m).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Jl(l.href);var g=Us(m).hoistableStyles,E=g.get(i);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,E),(g=m.querySelector(eh(i)))&&!g._p&&(E.instance=g,E.state.loading=5),Gr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Gr.set(i,l),g||tD(m,i,l,E.state))),a&&c===null)throw Error(r(528,""));return E}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=eu(l),l=Us(m).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Jl(i){return'href="'+Kt(i)+'"'}function eh(i){return'link[rel="stylesheet"]['+i+"]"}function Xw(i){return I({},i,{"data-precedence":i.precedence,precedence:null})}function tD(i,a,l,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Ln(a,"link",l),Ut(a),i.head.appendChild(a))}function eu(i){return'[src="'+Kt(i)+'"]'}function th(i){return"script[async]"+i}function Zw(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+Kt(l.href)+'"]');if(c)return a.instance=c,Ut(c),c;var m=I({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ut(c),Ln(c,"style",m),Ff(c,l.precedence,i),a.instance=c;case"stylesheet":m=Jl(l.href);var g=i.querySelector(eh(m));if(g)return a.state.loading|=4,a.instance=g,Ut(g),g;c=Xw(l),(m=Gr.get(m))&&Ny(c,m),g=(i.ownerDocument||i).createElement("link"),Ut(g);var E=g;return E._p=new Promise(function(A,V){E.onload=A,E.onerror=V}),Ln(g,"link",c),a.state.loading|=4,Ff(g,l.precedence,i),a.instance=g;case"script":return g=eu(l.src),(m=i.querySelector(th(g)))?(a.instance=m,Ut(m),m):(c=l,(m=Gr.get(g))&&(c=I({},l),Py(c,m)),i=i.ownerDocument||i,m=i.createElement("script"),Ut(m),Ln(m,"link",c),i.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Ff(c,l.precedence,i));return a.instance}function Ff(i,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,E=0;E<c.length;E++){var A=c[E];if(A.dataset.precedence===a)g=A;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Ny(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Py(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Bf=null;function Jw(i,a,l){if(Bf===null){var c=new Map,m=Bf=new Map;m.set(l,c)}else m=Bf,c=m.get(l),c||(c=new Map,m.set(l,c));if(c.has(i))return c;for(c.set(i,null),l=l.getElementsByTagName(i),m=0;m<l.length;m++){var g=l[m];if(!(g[Ms]||g[wn]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(a)||"";E=i+E;var A=c.get(E);A?A.push(g):c.set(E,[g])}}return c}function eT(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function nD(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function tT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var nh=null;function rD(){}function iD(i,a,l){if(nh===null)throw Error(r(475));var c=nh;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Jl(l.href),g=i.querySelector(eh(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=qf.bind(c),i.then(c,c)),a.state.loading|=4,a.instance=g,Ut(g);return}g=i.ownerDocument||i,l=Xw(l),(m=Gr.get(m))&&Ny(l,m),g=g.createElement("link"),Ut(g);var E=g;E._p=new Promise(function(A,V){E.onload=A,E.onerror=V}),Ln(g,"link",l),a.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=qf.bind(c),i.addEventListener("load",a),i.addEventListener("error",a))}}function sD(){if(nh===null)throw Error(r(475));var i=nh;return i.stylesheets&&i.count===0&&ky(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&ky(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function qf(){if(this.count--,this.count===0){if(this.stylesheets)ky(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Hf=null;function ky(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Hf=new Map,a.forEach(aD,i),Hf=null,qf.call(i))}function aD(i,a){if(!(a.state.loading&4)){var l=Hf.get(i);if(l)var c=l.get(null);else{l=new Map,Hf.set(i,l);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var E=m[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),c=E)}c&&l.set(null,c)}m=a.instance,E=m.getAttribute("data-precedence"),g=l.get(E)||c,g===c&&l.set(null,m),l.set(E,m),this.count++,c=qf.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),a.state.loading|=4}}var rh={$$typeof:R,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function oD(i,a,l,c,m,g,E,A){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.hiddenUpdates=Fi(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function nT(i,a,l,c,m,g,E,A,V,F,ne,oe){return i=new oD(i,a,l,E,A,V,F,oe),a=1,g===!0&&(a|=24),g=qr(3,null,null,a),i.current=g,g.stateNode=i,a=hg(),a.refCount++,i.pooledCache=a,a.refCount++,g.memoizedState={element:c,isDehydrated:l,cache:a},Gg(g),i}function rT(i){return i?(i=Pl,i):Pl}function iT(i,a,l,c,m,g){m=rT(m),c.context===null?c.context=m:c.pendingContext=m,c=Xs(a),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=Zs(i,c,a),l!==null&&(rr(l,i,a),zc(l,i,a))}function sT(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Oy(i,a){sT(i,a),(i=i.alternate)&&sT(i,a)}function aT(i){if(i.tag===13){var a=Hs(i,67108864);a!==null&&rr(a,i,67108864),Oy(i,67108864)}}var Gf=!0;function lD(i,a,l,c){var m=w.T;w.T=null;var g=fe.p;try{fe.p=2,Vy(i,a,l,c)}finally{fe.p=g,w.T=m}}function uD(i,a,l,c){var m=w.T;w.T=null;var g=fe.p;try{fe.p=8,Vy(i,a,l,c)}finally{fe.p=g,w.T=m}}function Vy(i,a,l,c){if(Gf){var m=My(c);if(m===null)Ty(i,a,c,Kf,l),lT(i,c);else if(hD(m,i,a,l,c))c.stopPropagation();else if(lT(i,c),a&4&&-1<cD.indexOf(i)){for(;m!==null;){var g=qi(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=ur(g.pendingLanes);if(E!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var V=1<<31-dn(E);A.entanglements[1]|=V,E&=~V}wi(g),(zt&6)===0&&(Cf=it()+500,Xc(0))}}break;case 13:A=Hs(g,2),A!==null&&rr(A,g,2),Pf(),Oy(g,2)}if(g=My(c),g===null&&Ty(i,a,c,Kf,l),g===m)break;m=g}m!==null&&c.stopPropagation()}else Ty(i,a,c,null,l)}}function My(i){return i=bl(i),Ly(i)}var Kf=null;function Ly(i){if(Kf=null,i=Zr(i),i!==null){var a=he(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=pe(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Kf=i,null}function oT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hn()){case qe:return 2;case Ye:return 8;case Lt:case Cr:return 32;case Dr:return 268435456;default:return 32}default:return 32}}var Uy=!1,sa=null,aa=null,oa=null,ih=new Map,sh=new Map,la=[],cD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lT(i,a){switch(i){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":aa=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":ih.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":sh.delete(a.pointerId)}}function ah(i,a,l,c,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},a!==null&&(a=qi(a),a!==null&&aT(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function hD(i,a,l,c,m){switch(a){case"focusin":return sa=ah(sa,i,a,l,c,m),!0;case"dragenter":return aa=ah(aa,i,a,l,c,m),!0;case"mouseover":return oa=ah(oa,i,a,l,c,m),!0;case"pointerover":var g=m.pointerId;return ih.set(g,ah(ih.get(g)||null,i,a,l,c,m)),!0;case"gotpointercapture":return g=m.pointerId,sh.set(g,ah(sh.get(g)||null,i,a,l,c,m)),!0}return!1}function uT(i){var a=Zr(i.target);if(a!==null){var l=he(a);if(l!==null){if(a=l.tag,a===13){if(a=pe(l),a!==null){i.blockedOn=a,Vs(i.priority,function(){if(l.tag===13){var c=Tr(),m=Hs(l,c);m!==null&&rr(m,l,c),Oy(l,c)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function $f(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=My(i.nativeEvent);if(l===null){l=i.nativeEvent;var c=new l.constructor(l.type,l);kr=c,l.target.dispatchEvent(c),kr=null}else return a=qi(l),a!==null&&aT(a),i.blockedOn=l,!1;a.shift()}return!0}function cT(i,a,l){$f(i)&&l.delete(a)}function dD(){Uy=!1,sa!==null&&$f(sa)&&(sa=null),aa!==null&&$f(aa)&&(aa=null),oa!==null&&$f(oa)&&(oa=null),ih.forEach(cT),sh.forEach(cT)}function Qf(i,a){i.blockedOn===a&&(i.blockedOn=null,Uy||(Uy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,dD)))}var Wf=null;function hT(i){Wf!==i&&(Wf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wf===i&&(Wf=null);for(var a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],m=i[a+2];if(typeof c!="function"){if(Ly(c||l)===null)continue;break}var g=qi(l);g!==null&&(i.splice(a,3),a-=3,Sg(g,{pending:!0,data:m,method:l.method,action:c},c,m))}}))}function oh(i){function a(V){return Qf(V,i)}sa!==null&&Qf(sa,i),aa!==null&&Qf(aa,i),oa!==null&&Qf(oa,i),ih.forEach(a),sh.forEach(a);for(var l=0;l<la.length;l++){var c=la[l];c.blockedOn===i&&(c.blockedOn=null)}for(;0<la.length&&(l=la[0],l.blockedOn===null);)uT(l),l.blockedOn===null&&la.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var m=l[c],g=l[c+1],E=m[fn]||null;if(typeof g=="function")E||hT(l);else if(E){var A=null;if(g&&g.hasAttribute("formAction")){if(m=g,E=g[fn]||null)A=E.formAction;else if(Ly(m)!==null)continue}else A=E.action;typeof A=="function"?l[c+1]=A:(l.splice(c,3),c-=3),hT(l)}}}function jy(i){this._internalRoot=i}Yf.prototype.render=jy.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=Tr();iT(l,c,i,a,null,null)},Yf.prototype.unmount=jy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;i.tag===0&&Wl(),iT(i.current,2,null,i,null,null),Pf(),a[Bi]=null}};function Yf(i){this._internalRoot=i}Yf.prototype.unstable_scheduleHydration=function(i){if(i){var a=Md();i={blockedOn:null,target:i,priority:a};for(var l=0;l<la.length&&a!==0&&a<la[l].priority;l++);la.splice(l,0,i),l===0&&uT(i)}};var dT=e.version;if(dT!=="19.0.0")throw Error(r(527,dT,"19.0.0"));fe.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=W(a),i=i!==null?ce(i):null,i=i===null?null:i.stateNode,i};var fD={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:w,findFiberByHostInstance:Zr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xf.isDisabled&&Xf.supportsFiber)try{dt=Xf.inject(fD),at=Xf}catch{}}return uh.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,c="",m=CE,g=DE,E=NE,A=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks)),a=nT(i,1,!1,null,null,l,c,m,g,E,A,null),i[Bi]=a.current,wy(i.nodeType===8?i.parentNode:i),new jy(a)},uh.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var c=!1,m="",g=CE,E=DE,A=NE,V=null,F=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(V=l.unstable_transitionCallbacks),l.formState!==void 0&&(F=l.formState)),a=nT(i,1,!0,a,l??null,c,m,g,E,A,V,F),a.context=rT(null),l=a.current,c=Tr(),m=Xs(c),m.callback=null,Zs(l,m,c),a.current.lanes=c,Nt(a,c),wi(a),i[Bi]=a.current,wy(i),new Yf(a)},uh.version="19.0.0",uh}var wT;function TD(){if(wT)return By.exports;wT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),By.exports=wD(),By.exports}var xD=TD(),ch={},TT;function ID(){if(TT)return ch;TT=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.parse=u,ch.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function u(x,R){const N=new o,j=x.length;if(j<2)return N;const U=(R==null?void 0:R.decode)||y;let B=0;do{const te=x.indexOf("=",B);if(te===-1)break;const K=x.indexOf(";",B),ue=K===-1?j:K;if(te>ue){B=x.lastIndexOf(";",te-1)+1;continue}const ie=h(x,B,te),J=d(x,te,ie),O=x.slice(ie,J);if(N[O]===void 0){let T=h(x,te+1,ue),w=d(x,ue,T);const I=U(x.slice(T,w));N[O]=I}B=ue+1}while(B<j);return N}function h(x,R,N){do{const j=x.charCodeAt(R);if(j!==32&&j!==9)return R}while(++R<N);return N}function d(x,R,N){for(;R>N;){const j=x.charCodeAt(--R);if(j!==32&&j!==9)return R+1}return N}function p(x,R,N){const j=(N==null?void 0:N.encode)||encodeURIComponent;if(!n.test(x))throw new TypeError(`argument name is invalid: ${x}`);const U=j(R);if(!e.test(U))throw new TypeError(`argument val is invalid: ${R}`);let B=x+"="+U;if(!N)return B;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);B+="; Max-Age="+N.maxAge}if(N.domain){if(!t.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);B+="; Domain="+N.domain}if(N.path){if(!r.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);B+="; Path="+N.path}if(N.expires){if(!v(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);B+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&(B+="; HttpOnly"),N.secure&&(B+="; Secure"),N.partitioned&&(B+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":B+="; Priority=Low";break;case"medium":B+="; Priority=Medium";break;case"high":B+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":B+="; SameSite=Strict";break;case"lax":B+="; SameSite=Lax";break;case"none":B+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return B}function y(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function v(x){return s.call(x)==="[object Date]"}return ch}ID();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xT="popstate";function AD(n={}){function e(r,s){let{pathname:o,search:u,hash:h}=r.location;return g_("",{pathname:o,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:jh(s)}return RD(e,t,null,n)}function Ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SD(){return Math.random().toString(36).substring(2,10)}function IT(n,e){return{usr:n.state,key:n.key,idx:e}}function g_(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?$u(e):e,state:t,key:e&&e.key||r||SD()}}function jh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function $u(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function RD(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,u=s.history,h="POP",d=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){h="POP";let U=y(),B=U==null?null:U-p;p=U,d&&d({action:h,location:j.location,delta:B})}function x(U,B){h="PUSH";let te=g_(j.location,U,B);p=y()+1;let K=IT(te,p),ue=j.createHref(te);try{u.pushState(K,"",ue)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;s.location.assign(ue)}o&&d&&d({action:h,location:j.location,delta:1})}function R(U,B){h="REPLACE";let te=g_(j.location,U,B);p=y();let K=IT(te,p),ue=j.createHref(te);u.replaceState(K,"",ue),o&&d&&d({action:h,location:j.location,delta:0})}function N(U){let B=s.location.origin!=="null"?s.location.origin:s.location.href,te=typeof U=="string"?U:jh(U);return te=te.replace(/ $/,"%20"),Ft(B,`No window.location.(origin|href) available to create URL for href: ${te}`),new URL(te,B)}let j={get action(){return h},get location(){return n(s,u)},listen(U){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(xT,v),d=U,()=>{s.removeEventListener(xT,v),d=null}},createHref(U){return e(s,U)},createURL:N,encodeLocation(U){let B=N(U);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:x,replace:R,go(U){return u.go(U)}};return j}function JI(n,e,t="/"){return CD(n,e,t,!1)}function CD(n,e,t,r){let s=typeof e=="string"?$u(e):e,o=Aa(s.pathname||"/",t);if(o==null)return null;let u=eA(n);DD(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let p=FD(o);h=jD(u[d],p,r)}return h}function eA(n,e=[],t=[],r=""){let s=(o,u,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};d.relativePath.startsWith("/")&&(Ft(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let p=ys([r,d.relativePath]),y=t.concat(d);o.children&&o.children.length>0&&(Ft(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),eA(o.children,e,y,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:LD(p,o.index),routesMeta:y})};return n.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,u);else for(let d of tA(o.path))s(o,u,d)}),e}function tA(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let u=tA(r.join("/")),h=[];return h.push(...u.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...u),h.map(d=>n.startsWith("/")&&d===""?"/":d)}function DD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:UD(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var ND=/^:[\w-]+$/,PD=3,kD=2,OD=1,VD=10,MD=-2,AT=n=>n==="*";function LD(n,e){let t=n.split("/"),r=t.length;return t.some(AT)&&(r+=MD),e&&(r+=kD),t.filter(s=>!AT(s)).reduce((s,o)=>s+(ND.test(o)?PD:o===""?OD:VD),r)}function UD(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function jD(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",u=[];for(let h=0;h<r.length;++h){let d=r[h],p=h===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=Am({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),x=d.route;if(!v&&p&&t&&!r[r.length-1].route.index&&(v=Am({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),u.push({params:s,pathname:ys([o,v.pathname]),pathnameBase:GD(ys([o,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(o=ys([o,v.pathnameBase]))}return u}function Am(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=zD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:v},x)=>{if(y==="*"){let N=h[x]||"";u=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const R=h[x];return v&&!R?p[y]=void 0:p[y]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function zD(n,e=!1,t=!0){oi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function FD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Aa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function BD(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?$u(n):n;return{pathname:t?t.startsWith("/")?t:qD(t,e):e,search:KD(r),hash:$D(s)}}function qD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ky(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HD(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function nA(n){let e=HD(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function rA(n,e,t,r=!1){let s;typeof n=="string"?s=$u(n):(s={...n},Ft(!s.pathname||!s.pathname.includes("?"),Ky("?","pathname","search",s)),Ft(!s.pathname||!s.pathname.includes("#"),Ky("#","pathname","hash",s)),Ft(!s.search||!s.search.includes("#"),Ky("#","search","hash",s)));let o=n===""||s.pathname==="",u=o?"/":s.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let x=u.split("/");for(;x[0]==="..";)x.shift(),v-=1;s.pathname=x.join("/")}h=v>=0?e[v]:"/"}let d=BD(s,h),p=u&&u!=="/"&&u.endsWith("/"),y=(o||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var ys=n=>n.join("/").replace(/\/\/+/g,"/"),GD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),KD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,$D=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function QD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var iA=["POST","PUT","PATCH","DELETE"];new Set(iA);var WD=["GET",...iA];new Set(WD);var Qu=P.createContext(null);Qu.displayName="DataRouter";var rp=P.createContext(null);rp.displayName="DataRouterState";var sA=P.createContext({isTransitioning:!1});sA.displayName="ViewTransition";var YD=P.createContext(new Map);YD.displayName="Fetchers";var XD=P.createContext(null);XD.displayName="Await";var ji=P.createContext(null);ji.displayName="Navigation";var hd=P.createContext(null);hd.displayName="Location";var xs=P.createContext({outlet:null,matches:[],isDataRoute:!1});xs.displayName="Route";var f0=P.createContext(null);f0.displayName="RouteError";function ZD(n,{relative:e}={}){Ft(dd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(ji),{hash:s,pathname:o,search:u}=fd(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:ys([t,o])),r.createHref({pathname:h,search:u,hash:s})}function dd(){return P.useContext(hd)!=null}function za(){return Ft(dd(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(hd).location}var aA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oA(n){P.useContext(ji).static||P.useLayoutEffect(n)}function ol(){let{isDataRoute:n}=P.useContext(xs);return n?hN():JD()}function JD(){Ft(dd(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Qu),{basename:e,navigator:t}=P.useContext(ji),{matches:r}=P.useContext(xs),{pathname:s}=za(),o=JSON.stringify(nA(r)),u=P.useRef(!1);return oA(()=>{u.current=!0}),P.useCallback((d,p={})=>{if(oi(u.current,aA),!u.current)return;if(typeof d=="number"){t.go(d);return}let y=rA(d,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ys([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,o,s,n])}P.createContext(null);function fd(n,{relative:e}={}){let{matches:t}=P.useContext(xs),{pathname:r}=za(),s=JSON.stringify(nA(t));return P.useMemo(()=>rA(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function eN(n,e){return lA(n,e)}function lA(n,e,t,r){var te;Ft(dd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=P.useContext(ji),{matches:u}=P.useContext(xs),h=u[u.length-1],d=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",v=h&&h.route;{let K=v&&v.path||"";uA(p,!v||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let x=za(),R;if(e){let K=typeof e=="string"?$u(e):e;Ft(y==="/"||((te=K.pathname)==null?void 0:te.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${K.pathname}" was given in the \`location\` prop.`),R=K}else R=x;let N=R.pathname||"/",j=N;if(y!=="/"){let K=y.replace(/^\//,"").split("/");j="/"+N.replace(/^\//,"").split("/").slice(K.length).join("/")}let U=!o&&t&&t.matches&&t.matches.length>0?t.matches:JI(n,{pathname:j});oi(v||U!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),oi(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=sN(U&&U.map(K=>Object.assign({},K,{params:Object.assign({},d,K.params),pathname:ys([y,s.encodeLocation?s.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?y:ys([y,s.encodeLocation?s.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),u,t,r);return e&&B?P.createElement(hd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},B):B}function tN(){let n=cN(),e=QD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,u)}var nN=P.createElement(tN,null),rN=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(xs.Provider,{value:this.props.routeContext},P.createElement(f0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iN({routeContext:n,match:e,children:t}){let r=P.useContext(Qu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(xs.Provider,{value:n},t)}function sN(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let d=s.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);Ft(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let u=!1,h=-1;if(t)for(let d=0;d<s.length;d++){let p=s[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:y,errors:v}=t,x=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||x){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((d,p,y)=>{let v,x=!1,R=null,N=null;t&&(v=o&&p.route.id?o[p.route.id]:void 0,R=p.route.errorElement||nN,u&&(h<0&&y===0?(uA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,N=null):h===y&&(x=!0,N=p.route.hydrateFallbackElement||null)));let j=e.concat(s.slice(0,y+1)),U=()=>{let B;return v?B=R:x?B=N:p.route.Component?B=P.createElement(p.route.Component,null):p.route.element?B=p.route.element:B=d,P.createElement(iN,{match:p,routeContext:{outlet:d,matches:j,isDataRoute:t!=null},children:B})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?P.createElement(rN,{location:t.location,revalidation:t.revalidation,component:R,error:v,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):U()},null)}function m0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aN(n){let e=P.useContext(Qu);return Ft(e,m0(n)),e}function oN(n){let e=P.useContext(rp);return Ft(e,m0(n)),e}function lN(n){let e=P.useContext(xs);return Ft(e,m0(n)),e}function p0(n){let e=lN(n),t=e.matches[e.matches.length-1];return Ft(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function uN(){return p0("useRouteId")}function cN(){var r;let n=P.useContext(f0),e=oN("useRouteError"),t=p0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function hN(){let{router:n}=aN("useNavigate"),e=p0("useNavigate"),t=P.useRef(!1);return oA(()=>{t.current=!0}),P.useCallback(async(s,o={})=>{oi(t.current,aA),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var ST={};function uA(n,e,t){!e&&!ST[n]&&(ST[n]=!0,oi(!1,t))}P.memo(dN);function dN({routes:n,future:e,state:t}){return lA(n,void 0,t,e)}function ri(n){Ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fN({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Ft(!dd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:u,navigator:s,static:o,future:{}}),[u,s,o]);typeof t=="string"&&(t=$u(t));let{pathname:d="/",search:p="",hash:y="",state:v=null,key:x="default"}=t,R=P.useMemo(()=>{let N=Aa(d,u);return N==null?null:{location:{pathname:N,search:p,hash:y,state:v,key:x},navigationType:r}},[u,d,p,y,v,x,r]);return oi(R!=null,`<Router basename="${u}"> is not able to match the URL "${d}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:P.createElement(ji.Provider,{value:h},P.createElement(hd.Provider,{children:e,value:R}))}function mN({children:n,location:e}){return eN(y_(n),e)}function y_(n,e=[]){let t=[];return P.Children.forEach(n,(r,s)=>{if(!P.isValidElement(r))return;let o=[...e,s];if(r.type===P.Fragment){t.push.apply(t,y_(r.props.children,o));return}Ft(r.type===ri,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=y_(r.props.children,o)),t.push(u)}),t}var um="get",cm="application/x-www-form-urlencoded";function ip(n){return n!=null&&typeof n.tagName=="string"}function pN(n){return ip(n)&&n.tagName.toLowerCase()==="button"}function gN(n){return ip(n)&&n.tagName.toLowerCase()==="form"}function yN(n){return ip(n)&&n.tagName.toLowerCase()==="input"}function _N(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vN(n,e){return n.button===0&&(!e||e==="_self")&&!_N(n)}function __(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function bN(n,e){let t=__(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(o=>{t.append(s,o)})}),t}var Zf=null;function EN(){if(Zf===null)try{new FormData(document.createElement("form"),0),Zf=!1}catch{Zf=!0}return Zf}var wN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $y(n){return n!=null&&!wN.has(n)?(oi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cm}"`),null):n}function TN(n,e){let t,r,s,o,u;if(gN(n)){let h=n.getAttribute("action");r=h?Aa(h,e):null,t=n.getAttribute("method")||um,s=$y(n.getAttribute("enctype"))||cm,o=new FormData(n)}else if(pN(n)||yN(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||h.getAttribute("action");if(r=d?Aa(d,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||um,s=$y(n.getAttribute("formenctype"))||$y(h.getAttribute("enctype"))||cm,o=new FormData(h,n),!EN()){let{name:p,type:y,value:v}=n;if(y==="image"){let x=p?`${p}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else p&&o.append(p,v)}}else{if(ip(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=um,r=null,s=cm,u=n}return o&&s==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:u}}function g0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function xN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function AN(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let u=await xN(o,t);return u.links?u.links():[]}return[]}));return DN(r.flat(1).filter(IN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function RT(n,e,t,r,s,o){let u=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,h=(d,p)=>{var y;return t[p].pathname!==d.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,p)=>u(d,p)||h(d,p)):o==="data"?e.filter((d,p)=>{var v;let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(u(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function SN(n,e,{includeHydrateFallback:t}={}){return RN(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function RN(n){return[...new Set(n)]}function CN(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function DN(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(CN(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function NN(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function PN(){let n=P.useContext(Qu);return g0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function kN(){let n=P.useContext(rp);return g0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var y0=P.createContext(void 0);y0.displayName="FrameworkContext";function cA(){let n=P.useContext(y0);return g0(n,"You must render this element inside a <HydratedRouter> element"),n}function ON(n,e){let t=P.useContext(y0),[r,s]=P.useState(!1),[o,u]=P.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,x=P.useRef(null);P.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let j=B=>{B.forEach(te=>{u(te.isIntersecting)})},U=new IntersectionObserver(j,{threshold:.5});return x.current&&U.observe(x.current),()=>{U.disconnect()}}},[n]),P.useEffect(()=>{if(r){let j=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(j)}}},[r]);let R=()=>{s(!0)},N=()=>{s(!1),u(!1)};return t?n!=="intent"?[o,x,{}]:[o,x,{onFocus:hh(h,R),onBlur:hh(d,N),onMouseEnter:hh(p,R),onMouseLeave:hh(y,N),onTouchStart:hh(v,R)}]:[!1,x,{}]}function hh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function VN({page:n,...e}){let{router:t}=PN(),r=P.useMemo(()=>JI(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(LN,{page:n,matches:r,...e}):null}function MN(n){let{manifest:e,routeModules:t}=cA(),[r,s]=P.useState([]);return P.useEffect(()=>{let o=!1;return AN(n,e,t).then(u=>{o||s(u)}),()=>{o=!0}},[n,e,t]),r}function LN({page:n,matches:e,...t}){let r=za(),{manifest:s,routeModules:o}=cA(),{loaderData:u,matches:h}=kN(),d=P.useMemo(()=>RT(n,e,h,s,r,"data"),[n,e,h,s,r]),p=P.useMemo(()=>RT(n,e,h,s,r,"assets"),[n,e,h,s,r]),y=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let R=new Set,N=!1;if(e.forEach(U=>{var te;let B=s.routes[U.route.id];!B||!B.hasLoader||(!d.some(K=>K.route.id===U.route.id)&&U.route.id in u&&((te=o[U.route.id])!=null&&te.shouldRevalidate)||B.hasClientLoader?N=!0:R.add(U.route.id))}),R.size===0)return[];let j=NN(n);return N&&R.size>0&&j.searchParams.set("_routes",e.filter(U=>R.has(U.route.id)).map(U=>U.route.id).join(",")),[j.pathname+j.search]},[u,r,s,d,e,n,o]),v=P.useMemo(()=>SN(p,s),[p,s]),x=MN(p);return P.createElement(P.Fragment,null,y.map(R=>P.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),v.map(R=>P.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),x.map(({key:R,link:N})=>P.createElement("link",{key:R,...N})))}function UN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var hA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hA&&(window.__reactRouterVersion="7.2.0")}catch{}function jN({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=AD({window:t,v5Compat:!0}));let s=r.current,[o,u]=P.useState({action:s.action,location:s.location}),h=P.useCallback(d=>{P.startTransition(()=>u(d))},[u]);return P.useLayoutEffect(()=>s.listen(h),[s,h]),P.createElement(fN,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var dA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_0=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:u,state:h,target:d,to:p,preventScrollReset:y,viewTransition:v,...x},R){let{basename:N}=P.useContext(ji),j=typeof p=="string"&&dA.test(p),U,B=!1;if(typeof p=="string"&&j&&(U=p,hA))try{let w=new URL(window.location.href),I=p.startsWith("//")?new URL(w.protocol+p):new URL(p),D=Aa(I.pathname,N);I.origin===w.origin&&D!=null?p=D+I.search+I.hash:B=!0}catch{oi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=ZD(p,{relative:s}),[K,ue,ie]=ON(r,x),J=qN(p,{replace:u,state:h,target:d,preventScrollReset:y,relative:s,viewTransition:v});function O(w){e&&e(w),w.defaultPrevented||J(w)}let T=P.createElement("a",{...x,...ie,href:U||te,onClick:B||o?e:O,ref:UN(R,ue),target:d,"data-discover":!j&&t==="render"?"true":void 0});return K&&!j?P.createElement(P.Fragment,null,T,P.createElement(VN,{page:te})):T});_0.displayName="Link";var zN=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:u,viewTransition:h,children:d,...p},y){let v=fd(u,{relative:p.relative}),x=za(),R=P.useContext(rp),{navigator:N,basename:j}=P.useContext(ji),U=R!=null&&WN(v)&&h===!0,B=N.encodeLocation?N.encodeLocation(v).pathname:v.pathname,te=x.pathname,K=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(te=te.toLowerCase(),K=K?K.toLowerCase():null,B=B.toLowerCase()),K&&j&&(K=Aa(K,j)||K);const ue=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ie=te===B||!s&&te.startsWith(B)&&te.charAt(ue)==="/",J=K!=null&&(K===B||!s&&K.startsWith(B)&&K.charAt(B.length)==="/"),O={isActive:ie,isPending:J,isTransitioning:U},T=ie?e:void 0,w;typeof r=="function"?w=r(O):w=[r,ie?"active":null,J?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(O):o;return P.createElement(_0,{...p,"aria-current":T,className:w,ref:y,style:I,to:u,viewTransition:h},typeof d=="function"?d(O):d)});zN.displayName="NavLink";var FN=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:u=um,action:h,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:v,...x},R)=>{let N=$N(),j=QN(h,{relative:p}),U=u.toLowerCase()==="get"?"get":"post",B=typeof h=="string"&&dA.test(h),te=K=>{if(d&&d(K),K.defaultPrevented)return;K.preventDefault();let ue=K.nativeEvent.submitter,ie=(ue==null?void 0:ue.getAttribute("formmethod"))||u;N(ue||K.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:s,state:o,relative:p,preventScrollReset:y,viewTransition:v})};return P.createElement("form",{ref:R,method:U,action:j,onSubmit:r?d:te,...x,"data-discover":!B&&n==="render"?"true":void 0})});FN.displayName="Form";function BN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fA(n){let e=P.useContext(Qu);return Ft(e,BN(n)),e}function qN(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:u}={}){let h=ol(),d=za(),p=fd(n,{relative:o});return P.useCallback(y=>{if(vN(y,e)){y.preventDefault();let v=t!==void 0?t:jh(d)===jh(p);h(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:u})}},[d,h,p,t,r,e,n,s,o,u])}function HN(n){oi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(__(n)),t=P.useRef(!1),r=za(),s=P.useMemo(()=>bN(r.search,t.current?null:e.current),[r.search]),o=ol(),u=P.useCallback((h,d)=>{const p=__(typeof h=="function"?h(s):h);t.current=!0,o("?"+p,d)},[o,s]);return[s,u]}var GN=0,KN=()=>`__${String(++GN)}__`;function $N(){let{router:n}=fA("useSubmit"),{basename:e}=P.useContext(ji),t=uN();return P.useCallback(async(r,s={})=>{let{action:o,method:u,encType:h,formData:d,body:p}=TN(r,e);if(s.navigate===!1){let y=s.fetcherKey||KN();await n.fetch(y,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||u,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:p,formMethod:s.method||u,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function QN(n,{relative:e}={}){let{basename:t}=P.useContext(ji),r=P.useContext(xs);Ft(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...fd(n||".",{relative:e})},u=za();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(y=>y==="")){h.delete("index"),d.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ys([t,o.pathname])),jh(o)}function WN(n,e={}){let t=P.useContext(sA);Ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=fA("useViewTransitionState"),s=fd(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Aa(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Aa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Am(s.pathname,u)!=null||Am(s.pathname,o)!=null}new TextEncoder;const v0="-",YN=n=>{const e=ZN(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:u=>{const h=u.split(v0);return h[0]===""&&h.length!==1&&h.shift(),mA(h,e)||XN(u)},getConflictingClassGroupIds:(u,h)=>{const d=t[u]||[];return h&&r[u]?[...d,...r[u]]:d}}},mA=(n,e)=>{var u;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?mA(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(v0);return(u=e.validators.find(({validator:h})=>h(o)))==null?void 0:u.classGroupId},CT=/^\[(.+)\]$/,XN=n=>{if(CT.test(n)){const e=CT.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},ZN=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const s in t)v_(t[s],r,s,e);return r},v_=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:DT(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(JN(s)){v_(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,u])=>{v_(u,DT(e,o),t,r)})})},DT=(n,e)=>{let t=n;return e.split(v0).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},JN=n=>n.isThemeGetter,eP=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(o,u)=>{t.set(o,u),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let u=t.get(o);if(u!==void 0)return u;if((u=r.get(o))!==void 0)return s(o,u),u},set(o,u){t.has(o)?t.set(o,u):s(o,u)}}},b_="!",E_=":",tP=E_.length,nP=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const o=[];let u=0,h=0,d=0,p;for(let N=0;N<s.length;N++){let j=s[N];if(u===0&&h===0){if(j===E_){o.push(s.slice(d,N)),d=N+tP;continue}if(j==="/"){p=N;continue}}j==="["?u++:j==="]"?u--:j==="("?h++:j===")"&&h--}const y=o.length===0?s:s.substring(d),v=rP(y),x=v!==y,R=p&&p>d?p-d:void 0;return{modifiers:o,hasImportantModifier:x,baseClassName:v,maybePostfixModifierPosition:R}};if(e){const s=e+E_,o=r;r=u=>u.startsWith(s)?o(u.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const s=r;r=o=>t({className:o,parseClassName:s})}return r},rP=n=>n.endsWith(b_)?n.substring(0,n.length-1):n.startsWith(b_)?n.substring(1):n,iP=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let o=[];return r.forEach(u=>{u[0]==="["||e[u]?(s.push(...o.sort(),u),o=[]):o.push(u)}),s.push(...o.sort()),s}},sP=n=>({cache:eP(n.cacheSize),parseClassName:nP(n),sortModifiers:iP(n),...YN(n)}),aP=/\s+/,oP=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:o}=e,u=[],h=n.trim().split(aP);let d="";for(let p=h.length-1;p>=0;p-=1){const y=h[p],{isExternal:v,modifiers:x,hasImportantModifier:R,baseClassName:N,maybePostfixModifierPosition:j}=t(y);if(v){d=y+(d.length>0?" "+d:d);continue}let U=!!j,B=r(U?N.substring(0,j):N);if(!B){if(!U){d=y+(d.length>0?" "+d:d);continue}if(B=r(N),!B){d=y+(d.length>0?" "+d:d);continue}U=!1}const te=o(x).join(":"),K=R?te+b_:te,ue=K+B;if(u.includes(ue))continue;u.push(ue);const ie=s(B,U);for(let J=0;J<ie.length;++J){const O=ie[J];u.push(K+O)}d=y+(d.length>0?" "+d:d)}return d};function lP(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=pA(e))&&(r&&(r+=" "),r+=t);return r}const pA=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=pA(n[r]))&&(t&&(t+=" "),t+=e);return t};function uP(n,...e){let t,r,s,o=u;function u(d){const p=e.reduce((y,v)=>v(y),n());return t=sP(p),r=t.cache.get,s=t.cache.set,o=h,h(d)}function h(d){const p=r(d);if(p)return p;const y=oP(d,t);return s(d,y),y}return function(){return o(lP.apply(null,arguments))}}const Rn=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},gA=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,yA=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cP=/^\d+\/\d+$/,hP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tu=n=>cP.test(n),Je=n=>!!n&&!Number.isNaN(Number(n)),Do=n=>!!n&&Number.isInteger(Number(n)),NT=n=>n.endsWith("%")&&Je(n.slice(0,-1)),ca=n=>hP.test(n),gP=()=>!0,yP=n=>dP.test(n)&&!fP.test(n),b0=()=>!1,_P=n=>mP.test(n),vP=n=>pP.test(n),bP=n=>!xe(n)&&!Ie(n),EP=n=>Wu(n,bA,b0),xe=n=>gA.test(n),No=n=>Wu(n,EA,yP),Qy=n=>Wu(n,PP,Je),wP=n=>Wu(n,_A,b0),TP=n=>Wu(n,vA,vP),xP=n=>Wu(n,b0,_P),Ie=n=>yA.test(n),Jf=n=>Yu(n,EA),IP=n=>Yu(n,kP),AP=n=>Yu(n,_A),SP=n=>Yu(n,bA),RP=n=>Yu(n,vA),CP=n=>Yu(n,OP,!0),Wu=(n,e,t)=>{const r=gA.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Yu=(n,e,t=!1)=>{const r=yA.exec(n);return r?r[1]?e(r[1]):t:!1},_A=n=>n==="position",DP=new Set(["image","url"]),vA=n=>DP.has(n),NP=new Set(["length","size","percentage"]),bA=n=>NP.has(n),EA=n=>n==="length",PP=n=>n==="number",kP=n=>n==="family-name",OP=n=>n==="shadow",VP=()=>{const n=Rn("color"),e=Rn("font"),t=Rn("text"),r=Rn("font-weight"),s=Rn("tracking"),o=Rn("leading"),u=Rn("breakpoint"),h=Rn("container"),d=Rn("spacing"),p=Rn("radius"),y=Rn("shadow"),v=Rn("inset-shadow"),x=Rn("drop-shadow"),R=Rn("blur"),N=Rn("perspective"),j=Rn("aspect"),U=Rn("ease"),B=Rn("animate"),te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ue=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto","contain","none"],J=()=>[Ie,xe,d],O=()=>[tu,"full","auto",...J()],T=()=>[Do,"none","subgrid",Ie,xe],w=()=>["auto",{span:["full",Do,Ie,xe]},Ie,xe],I=()=>[Do,"auto",Ie,xe],D=()=>["auto","min","max","fr",Ie,xe],M=()=>["start","end","center","between","around","evenly","stretch","baseline"],C=()=>["start","end","center","stretch"],ke=()=>["auto",...J()],Ue=()=>[tu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...J()],re=()=>[n,Ie,xe],me=()=>[NT,No],he=()=>["","none","full",p,Ie,xe],pe=()=>["",Je,Jf,No],L=()=>["solid","dashed","dotted","double"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ce=()=>["","none",R,Ie,xe],Z=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ie,xe],fe=()=>["none",Je,Ie,xe],ve=()=>["none",Je,Ie,xe],we=()=>[Je,Ie,xe],Be=()=>[tu,"full",...J()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ca],breakpoint:[ca],color:[gP],container:[ca],"drop-shadow":[ca],ease:["in","out","in-out"],font:[bP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ca],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ca],shadow:[ca],spacing:["px",Je],text:[ca],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",tu,xe,Ie,j]}],container:["container"],columns:[{columns:[Je,xe,Ie,h]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),xe,Ie]}],overflow:[{overflow:ue()}],"overflow-x":[{"overflow-x":ue()}],"overflow-y":[{"overflow-y":ue()}],overscroll:[{overscroll:ie()}],"overscroll-x":[{"overscroll-x":ie()}],"overscroll-y":[{"overscroll-y":ie()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Do,"auto",Ie,xe]}],basis:[{basis:[tu,"full","auto",h,...J()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Je,tu,"auto","initial","none",xe]}],grow:[{grow:["",Je,Ie,xe]}],shrink:[{shrink:["",Je,Ie,xe]}],order:[{order:[Do,"first","last","none",Ie,xe]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:w()}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:w()}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":D()}],"auto-rows":[{"auto-rows":D()}],gap:[{gap:J()}],"gap-x":[{"gap-x":J()}],"gap-y":[{"gap-y":J()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...C(),"normal"]}],"justify-self":[{"justify-self":["auto",...C()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...C(),"baseline"]}],"align-self":[{self:["auto",...C(),"baseline"]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...C(),"baseline"]}],"place-self":[{"place-self":["auto",...C()]}],p:[{p:J()}],px:[{px:J()}],py:[{py:J()}],ps:[{ps:J()}],pe:[{pe:J()}],pt:[{pt:J()}],pr:[{pr:J()}],pb:[{pb:J()}],pl:[{pl:J()}],m:[{m:ke()}],mx:[{mx:ke()}],my:[{my:ke()}],ms:[{ms:ke()}],me:[{me:ke()}],mt:[{mt:ke()}],mr:[{mr:ke()}],mb:[{mb:ke()}],ml:[{ml:ke()}],"space-x":[{"space-x":J()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":J()}],"space-y-reverse":["space-y-reverse"],size:[{size:Ue()}],w:[{w:[h,"screen",...Ue()]}],"min-w":[{"min-w":[h,"screen","none",...Ue()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[u]},...Ue()]}],h:[{h:["screen",...Ue()]}],"min-h":[{"min-h":["screen","none",...Ue()]}],"max-h":[{"max-h":["screen",...Ue()]}],"font-size":[{text:["base",t,Jf,No]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ie,Qy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",NT,xe]}],"font-family":[{font:[IP,xe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ie,xe]}],"line-clamp":[{"line-clamp":[Je,"none",Ie,Qy]}],leading:[{leading:[o,...J()]}],"list-image":[{"list-image":["none",Ie,xe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ie,xe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:re()}],"text-color":[{text:re()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:[Je,"from-font","auto",Ie,No]}],"text-decoration-color":[{decoration:re()}],"underline-offset":[{"underline-offset":[Je,"auto",Ie,xe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:J()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ie,xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ie,xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),AP,wP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",SP,EP]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Do,Ie,xe],radial:["",Ie,xe],conic:[Do,Ie,xe]},RP,TP]}],"bg-color":[{bg:re()}],"gradient-from-pos":[{from:me()}],"gradient-via-pos":[{via:me()}],"gradient-to-pos":[{to:me()}],"gradient-from":[{from:re()}],"gradient-via":[{via:re()}],"gradient-to":[{to:re()}],rounded:[{rounded:he()}],"rounded-s":[{"rounded-s":he()}],"rounded-e":[{"rounded-e":he()}],"rounded-t":[{"rounded-t":he()}],"rounded-r":[{"rounded-r":he()}],"rounded-b":[{"rounded-b":he()}],"rounded-l":[{"rounded-l":he()}],"rounded-ss":[{"rounded-ss":he()}],"rounded-se":[{"rounded-se":he()}],"rounded-ee":[{"rounded-ee":he()}],"rounded-es":[{"rounded-es":he()}],"rounded-tl":[{"rounded-tl":he()}],"rounded-tr":[{"rounded-tr":he()}],"rounded-br":[{"rounded-br":he()}],"rounded-bl":[{"rounded-bl":he()}],"border-w":[{border:pe()}],"border-w-x":[{"border-x":pe()}],"border-w-y":[{"border-y":pe()}],"border-w-s":[{"border-s":pe()}],"border-w-e":[{"border-e":pe()}],"border-w-t":[{"border-t":pe()}],"border-w-r":[{"border-r":pe()}],"border-w-b":[{"border-b":pe()}],"border-w-l":[{"border-l":pe()}],"divide-x":[{"divide-x":pe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":pe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...L(),"hidden","none"]}],"divide-style":[{divide:[...L(),"hidden","none"]}],"border-color":[{border:re()}],"border-color-x":[{"border-x":re()}],"border-color-y":[{"border-y":re()}],"border-color-s":[{"border-s":re()}],"border-color-e":[{"border-e":re()}],"border-color-t":[{"border-t":re()}],"border-color-r":[{"border-r":re()}],"border-color-b":[{"border-b":re()}],"border-color-l":[{"border-l":re()}],"divide-color":[{divide:re()}],"outline-style":[{outline:[...L(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Je,Ie,xe]}],"outline-w":[{outline:["",Je,Jf,No]}],"outline-color":[{outline:[n]}],shadow:[{shadow:["","none",y,CP,xP]}],"shadow-color":[{shadow:re()}],"inset-shadow":[{"inset-shadow":["none",Ie,xe,v]}],"inset-shadow-color":[{"inset-shadow":re()}],"ring-w":[{ring:pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:re()}],"ring-offset-w":[{"ring-offset":[Je,No]}],"ring-offset-color":[{"ring-offset":re()}],"inset-ring-w":[{"inset-ring":pe()}],"inset-ring-color":[{"inset-ring":re()}],opacity:[{opacity:[Je,Ie,xe]}],"mix-blend":[{"mix-blend":[...W(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none",Ie,xe]}],blur:[{blur:ce()}],brightness:[{brightness:[Je,Ie,xe]}],contrast:[{contrast:[Je,Ie,xe]}],"drop-shadow":[{"drop-shadow":["","none",x,Ie,xe]}],grayscale:[{grayscale:["",Je,Ie,xe]}],"hue-rotate":[{"hue-rotate":[Je,Ie,xe]}],invert:[{invert:["",Je,Ie,xe]}],saturate:[{saturate:[Je,Ie,xe]}],sepia:[{sepia:["",Je,Ie,xe]}],"backdrop-filter":[{"backdrop-filter":["","none",Ie,xe]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[Je,Ie,xe]}],"backdrop-contrast":[{"backdrop-contrast":[Je,Ie,xe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Je,Ie,xe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Je,Ie,xe]}],"backdrop-invert":[{"backdrop-invert":["",Je,Ie,xe]}],"backdrop-opacity":[{"backdrop-opacity":[Je,Ie,xe]}],"backdrop-saturate":[{"backdrop-saturate":[Je,Ie,xe]}],"backdrop-sepia":[{"backdrop-sepia":["",Je,Ie,xe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":J()}],"border-spacing-x":[{"border-spacing-x":J()}],"border-spacing-y":[{"border-spacing-y":J()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ie,xe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Je,"initial",Ie,xe]}],ease:[{ease:["linear","initial",U,Ie,xe]}],delay:[{delay:[Je,Ie,xe]}],animate:[{animate:["none",B,Ie,xe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[N,Ie,xe]}],"perspective-origin":[{"perspective-origin":Z()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[Ie,xe,"","none","gpu","cpu"]}],"transform-origin":[{origin:Z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Be()}],"translate-x":[{"translate-x":Be()}],"translate-y":[{"translate-y":Be()}],"translate-z":[{"translate-z":Be()}],"translate-none":["translate-none"],accent:[{accent:re()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:re()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie,xe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":J()}],"scroll-mx":[{"scroll-mx":J()}],"scroll-my":[{"scroll-my":J()}],"scroll-ms":[{"scroll-ms":J()}],"scroll-me":[{"scroll-me":J()}],"scroll-mt":[{"scroll-mt":J()}],"scroll-mr":[{"scroll-mr":J()}],"scroll-mb":[{"scroll-mb":J()}],"scroll-ml":[{"scroll-ml":J()}],"scroll-p":[{"scroll-p":J()}],"scroll-px":[{"scroll-px":J()}],"scroll-py":[{"scroll-py":J()}],"scroll-ps":[{"scroll-ps":J()}],"scroll-pe":[{"scroll-pe":J()}],"scroll-pt":[{"scroll-pt":J()}],"scroll-pr":[{"scroll-pr":J()}],"scroll-pb":[{"scroll-pb":J()}],"scroll-pl":[{"scroll-pl":J()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie,xe]}],fill:[{fill:["none",...re()]}],"stroke-w":[{stroke:[Je,Jf,No,Qy]}],stroke:[{stroke:["none",...re()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},Fn=uP(VP),wA="flex justify-center items-center h-10 rounded cursor-pointer bg-gray-50",Bt=n=>k.jsx("button",{...n,className:Fn(wA,"hover:opacity-80 active:opacity-50",n==null?void 0:n.className),type:(n==null?void 0:n.type)??"button"}),MP=n=>k.jsx(_0,{...n,to:n==null?void 0:n.href,className:Fn(wA,n==null?void 0:n.className)}),gt=n=>k.jsx("div",{...n,className:Fn("flex flex-col",n==null?void 0:n.className)}),cn=n=>k.jsx("div",{...n,className:Fn("flex",n==null?void 0:n.className)}),E0=n=>k.jsx("h1",{...n,className:Fn("text-2xl font-black",n==null?void 0:n.className)}),PT=n=>k.jsx("p",{...n,className:Fn("font-light",n==null?void 0:n.className)}),ll=n=>k.jsx("form",{...n,className:Fn("flex flex-col gap-y-2.5",n==null?void 0:n.className),onSubmit:e=>{e.preventDefault(),n.onSubmit&&n.onSubmit(e)}}),Dt=n=>k.jsx("label",{...n,className:Fn("text-gray-500 text-xs",n==null?void 0:n.className)}),TA="h-10 rounded bg-gray-50 outline-none focus:border focus:border-blue-500",_n=n=>k.jsx("input",{...n,className:Fn(TA,"px-2.5",n==null?void 0:n.className)}),Qo=n=>k.jsx("select",{...n,className:Fn(TA,n==null?void 0:n.className)});var LP="_8vd5n11";const ul=n=>k.jsx("div",{...n,className:Fn(LP,n==null?void 0:n.className)}),kT=n=>{let e;const t=new Set,r=(p,y)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const x=e;e=y??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(R=>R(e,x))}},s=()=>e,h={setState:r,getState:s,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=n(r,s,h);return h},UP=n=>n?kT(n):kT,jP=n=>n;function zP(n,e=jP){const t=gs.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return gs.useDebugValue(t),t}const OT=n=>{const e=UP(n),t=r=>zP(e,r);return Object.assign(t,e),t},FP=n=>n?OT(n):OT,Fa=FP(n=>({state:!1,alert:(e,t,r)=>n(s=>({...s,message:e,buttons:t,title:r,state:!0})),closeFn:()=>n(e=>({...e,state:!1}))})),w_={admin:null,init:!1,isInitialAdmin:!1,user:null},xA=P.createContext(w_),w0=()=>P.useContext(xA),BP=["남","녀","안알려줌"],qP=[25,50,75,100,150,200,300,500],HP=["가벼운 만남","개방된 연애","진지한 만남","친목도모"],GP=["날씬함","건강함","통통함","거대함","오버사이즈","안알려줌"],KP=["1회","2회","3회","4회","5회","6회","7회","직접입력"],$P=["말로 표현하는 사람","행동으로 표현하는 사람","선물로 표현하는 사람","시간을 함께 보내는 사람","스킨쉽"],QP=["음악","영화 & 예능","미술 & 그림","음식 & 요리","술자리","여행","운동 & 건강","캠핑","정의구현","문학","게임","명상","IT기술","창업"],xr=(n,e)=>n.length===0||!n?e??"입력해주세요.":null,yu=n=>/^[0-9]*$/.test(n.toString()),VT=(n,e=150)=>{//! dates.length !== 3 return
if(n.length!==3)return"날짜를 확인해주세요.";const t=String(n[0]);//! year의 길이가 4자리가 아닐때  return
let r="출생년도를 확인해주세요.";if(t.length!==4||!yu(t)||t.length!==4)return r;const s=Number(t);if(new Date().getFullYear()-s>e)return r;//! month 길이가 03월, 3월
const o=n[1].toString();if(r="출생월을 확인해주세요.",!yu(o))return r;//! month를 숫자로 바꾼 뒤 1-12 사이가 아니라면 return
const u=Number(o);if(u>12||u<1)return r;r="출생일을 확인해주세요.";//! date를 숫자로 바꿨을 때 NaN return
const h=n[2].toString();if(!yu(h))return r;const d=Number(h);//! date 길이가 해당 월의 마지막 날짜 보다 높으면 return
//! new Date() 날짜 관련 함수
//! 년도, 월, index
const p=new Date(s,u,0).getDate();return d>p?r:null},WP=n=>{let e="연락처를 확인해주세요.";return yu(n)?!n||n.length!==11?e:`${n[0]}${n[1]}${n[2]}`!="010"?(e="연락처는 010으로 시작해야합니다.",e):null:(e="숫자만 입력해주세요.",e)},T0=n=>n.length===0?"이메일을 입력해주세요.":/\S+@\S+\.\S+/.test(n)?null:"이메일을 확인해주세요.",Wy=(n,e)=>n.length===0?e??"목록을 입력해주세요.":null,MT=(n,e)=>{const t=n.toString().split(".");return yu(t[0])?Number(t[0])===0?e??"키 / 몸무게를 입력해주세요.":t[1]&&!yu(t[1])?e??"키 / 몸무게는 숫자만 입력해주세요.":null:e??"키 / 몸무게는 숫자만 입력해주세요."},YP=()=>{};var LT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},XP=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],u=n[t++],h=n[t++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},AA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],u=s+1<n.length,h=u?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let x=(h&15)<<2|p>>6,R=p&63;d||(R=64,u||(x=64)),r.push(t[y],t[v],t[x],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(IA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||h==null||p==null||v==null)throw new ZP;const x=o<<2|h>>4;if(r.push(x),p!==64){const R=h<<4&240|p>>2;if(r.push(R),v!==64){const N=p<<6&192|v;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ZP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JP=function(n){const e=IA(n);return AA.encodeByteArray(e,!0)},Sm=function(n){return JP(n).replace(/\./g,"")},x0=function(n){try{return AA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Rm(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!ek(t)||(n[t]=Rm(n[t],e[t]));return n}function ek(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=()=>SA().__FIREBASE_DEFAULTS__,nk=()=>{if(typeof process>"u"||typeof LT>"u")return;const n=LT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&x0(n[1]);return e&&JSON.parse(e)},I0=()=>{try{return YP()||tk()||nk()||rk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RA=()=>{var n;return(n=I0())===null||n===void 0?void 0:n.config},ik=n=>{var e;return(e=I0())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sm(JSON.stringify(t)),Sm(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ok(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function A0(){var n;const e=(n=I0())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lk(){return typeof window<"u"||CA()}function CA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function uk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function S0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NA(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PA(){return!A0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zh(){try{return typeof indexedDB=="object"}catch{return!1}}function ck(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="FirebaseError";class ar extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=hk,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?dk(o,r):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new ar(s,h,r)}}function dk(n,e){return n.replace(fk,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fk=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function mk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Sa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],u=e[s];if(jT(o)&&jT(u)){if(!Sa(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function jT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Eh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function kA(n,e){const t=new pk(n,e);return t.subscribe.bind(t)}class pk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");gk(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Yy),s.error===void 0&&(s.error=Yy),s.complete===void 0&&(s.complete=Yy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Yy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(n){return n&&n._delegate?n._delegate:n}class Oi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new sk;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vk(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_k(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _k(n){return n===ko?void 0:n}function vk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=[];var Ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ze||(Ze={}));const VA={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},bk=Ze.INFO,Ek={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},wk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Ek[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sp{constructor(e){this.name=e,this._logLevel=bk,this._logHandler=wk,this._userLogHandler=null,R0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}function Tk(n){R0.forEach(e=>{e.setLogLevel(n)})}function xk(n,e){for(const t of R0){let r=null;e&&e.level&&(r=VA[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,o,...u)=>{const h=u.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");o>=(r??s.logLevel)&&n({level:Ze[o].toLowerCase(),message:h,args:u,type:s.name})}}}const Ik=(n,e)=>e.some(t=>n instanceof t);let zT,FT;function Ak(){return zT||(zT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Sk(){return FT||(FT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MA=new WeakMap,T_=new WeakMap,LA=new WeakMap,Xy=new WeakMap,C0=new WeakMap;function Rk(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(Ea(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&MA.set(t,n)}).catch(()=>{}),C0.set(e,n),e}function Ck(n){if(T_.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});T_.set(n,e)}let x_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return T_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||LA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ea(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Dk(n){x_=n(x_)}function Nk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Zy(this),e,...t);return LA.set(r,e.sort?e.sort():[e]),Ea(r)}:Sk().includes(n)?function(...e){return n.apply(Zy(this),e),Ea(MA.get(this))}:function(...e){return Ea(n.apply(Zy(this),e))}}function Pk(n){return typeof n=="function"?Nk(n):(n instanceof IDBTransaction&&Ck(n),Ik(n,Ak())?new Proxy(n,x_):n)}function Ea(n){if(n instanceof IDBRequest)return Rk(n);if(Xy.has(n))return Xy.get(n);const e=Pk(n);return e!==n&&(Xy.set(n,e),C0.set(e,n)),e}const Zy=n=>C0.get(n);function kk(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(n,e),h=Ea(u);return r&&u.addEventListener("upgradeneeded",d=>{r(Ea(u.result),d.oldVersion,d.newVersion,Ea(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const Ok=["get","getKey","getAll","getAllKeys","count"],Vk=["put","add","delete","clear"],Jy=new Map;function BT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Jy.get(e))return Jy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Vk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ok.includes(t)))return;const o=async function(u,...h){const d=this.transaction(u,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&d.done]))[0]};return Jy.set(e,o),o}Dk(n=>({...n,get:(e,t,r)=>BT(e,t)||n.get(e,t,r),has:(e,t)=>!!BT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Lk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Lk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cm="@firebase/app",I_="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new sp("@firebase/app"),Uk="@firebase/app-compat",jk="@firebase/analytics-compat",zk="@firebase/analytics",Fk="@firebase/app-check-compat",Bk="@firebase/app-check",qk="@firebase/auth",Hk="@firebase/auth-compat",Gk="@firebase/database",Kk="@firebase/data-connect",$k="@firebase/database-compat",Qk="@firebase/functions",Wk="@firebase/functions-compat",Yk="@firebase/installations",Xk="@firebase/installations-compat",Zk="@firebase/messaging",Jk="@firebase/messaging-compat",eO="@firebase/performance",tO="@firebase/performance-compat",nO="@firebase/remote-config",rO="@firebase/remote-config-compat",iO="@firebase/storage",sO="@firebase/storage-compat",aO="@firebase/firestore",oO="@firebase/vertexai",lO="@firebase/firestore-compat",uO="firebase",cO="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="[DEFAULT]",hO={[Cm]:"fire-core",[Uk]:"fire-core-compat",[zk]:"fire-analytics",[jk]:"fire-analytics-compat",[Bk]:"fire-app-check",[Fk]:"fire-app-check-compat",[qk]:"fire-auth",[Hk]:"fire-auth-compat",[Gk]:"fire-rtdb",[Kk]:"fire-data-connect",[$k]:"fire-rtdb-compat",[Qk]:"fire-fn",[Wk]:"fire-fn-compat",[Yk]:"fire-iid",[Xk]:"fire-iid-compat",[Zk]:"fire-fcm",[Jk]:"fire-fcm-compat",[eO]:"fire-perf",[tO]:"fire-perf-compat",[nO]:"fire-rc",[rO]:"fire-rc-compat",[iO]:"fire-gcs",[sO]:"fire-gcs-compat",[aO]:"fire-fst",[lO]:"fire-fst-compat",[oO]:"fire-vertex","fire-js":"fire-js",[uO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new Map,xu=new Map,Iu=new Map;function Fh(n,e){try{n.container.addComponent(e)}catch(t){vs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function UA(n,e){n.container.addOrOverwriteComponent(e)}function Da(n){const e=n.name;if(Iu.has(e))return vs.debug(`There were multiple attempts to register component ${e}.`),!1;Iu.set(e,n);for(const t of Ca.values())Fh(t,n);for(const t of xu.values())Fh(t,n);return!0}function jA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dO(n,e,t=Ra){jA(n,e).clearInstance(t)}function zA(n){return n.options!==void 0}function kt(n){return n==null?!1:n.settings!==void 0}function fO(){Iu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new cl("app","Firebase",mO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FA=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(n,e){const t=x0(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,o=new Date().getTime();s-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class pO extends FA{constructor(e,t,r,s){const o=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,u={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,u,s);else{const h=e;super(h.options,u,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:o},t),this._serverConfig.authIdToken&&qT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&qT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ai(Cm,I_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){N0(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $r.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=cO;function D0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ra,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $r.create("bad-app-name",{appName:String(s)});if(t||(t=RA()),!t)throw $r.create("no-options");const o=Ca.get(s);if(o){if(Sa(t,o.options)&&Sa(r,o.config))return o;throw $r.create("duplicate-app",{appName:s})}const u=new OA(s);for(const d of Iu.values())u.addComponent(d);const h=new FA(t,r,u);return Ca.set(s,h),h}function gO(n,e){if(lk()&&!CA())throw $r.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;zA(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=p=>[...p].reduce((y,v)=>Math.imul(31,y)+v.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw $r.create("finalization-registry-not-supported",{});const o=""+s(JSON.stringify(r)),u=xu.get(o);if(u)return u.incRefCount(e.releaseOnDeref),u;const h=new OA(o);for(const p of Iu.values())h.addComponent(p);const d=new pO(t,e,o,h);return xu.set(o,d),d}function yO(n=Ra){const e=Ca.get(n);if(!e&&n===Ra&&RA())return D0();if(!e)throw $r.create("no-app",{appName:n});return e}function _O(){return Array.from(Ca.values())}async function N0(n){let e=!1;const t=n.name;Ca.has(t)?(e=!0,Ca.delete(t)):xu.has(t)&&n.decRefCount()<=0&&(xu.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function ai(n,e,t){var r;let s=(r=hO[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vs.warn(h.join(" "));return}Da(new Oi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function BA(n,e){if(n!==null&&typeof n!="function")throw $r.create("invalid-log-argument");xk(n,e)}function qA(n){Tk(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="firebase-heartbeat-database",bO=1,Bh="firebase-heartbeat-store";let e_=null;function HA(){return e_||(e_=kk(vO,bO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bh)}catch(t){console.warn(t)}}}}).catch(n=>{throw $r.create("idb-open",{originalErrorMessage:n.message})})),e_}async function EO(n){try{const t=(await HA()).transaction(Bh),r=await t.objectStore(Bh).get(GA(n));return await t.done,r}catch(e){if(e instanceof ar)vs.warn(e.message);else{const t=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vs.warn(t.message)}}}async function HT(n,e){try{const r=(await HA()).transaction(Bh,"readwrite");await r.objectStore(Bh).put(e,GA(n)),await r.done}catch(t){if(t instanceof ar)vs.warn(t.message);else{const r=$r.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vs.warn(r.message)}}}function GA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=1024,TO=30;class xO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AO(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=GT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>TO){const u=SO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){vs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=GT(),{heartbeatsToSend:r,unsentEntries:s}=IO(this._heartbeatsCache.heartbeats),o=Sm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return vs.warn(t),""}}}function GT(){return new Date().toISOString().substring(0,10)}function IO(n,e=wO){const t=[];let r=n.slice();for(const s of n){const o=t.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),KT(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),KT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class AO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zh()?ck().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await EO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return HT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return HT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function KT(n){return Sm(JSON.stringify({version:2,heartbeats:n})).length}function SO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(n){Da(new Oi("platform-logger",e=>new Mk(e),"PRIVATE")),Da(new Oi("heartbeat",e=>new xO(e),"PRIVATE")),ai(Cm,I_,n),ai(Cm,I_,"esm2017"),ai("fire-js","")}RO("");const CO=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ar,SDK_VERSION:Ba,_DEFAULT_ENTRY_NAME:Ra,_addComponent:Fh,_addOrOverwriteComponent:UA,_apps:Ca,_clearComponents:fO,_components:Iu,_getProvider:jA,_isFirebaseApp:zA,_isFirebaseServerApp:kt,_registerComponent:Da,_removeServiceInstance:dO,_serverApps:xu,deleteApp:N0,getApp:yO,getApps:_O,initializeApp:D0,initializeServerApp:gO,onLog:BA,registerVersion:ai,setLogLevel:qA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t){this._delegate=e,this.firebase=t,Fh(e,new Oi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),N0(this._delegate)))}_getService(e,t=Ra){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ra){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Fh(this._delegate,e)}_addOrOverwriteComponent(e){UA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},$T=new cl("app-compat","Firebase",NO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(n){const e={},t={__esModule:!0,initializeApp:o,app:s,registerVersion:ai,setLogLevel:qA,onLog:BA,apps:null,SDK_VERSION:Ba,INTERNAL:{registerComponent:h,removeApp:r,useAsService:d,modularAPIs:CO}};t.default=t,Object.defineProperty(t,"apps",{get:u});function r(p){delete e[p]}function s(p){if(p=p||Ra,!UT(e,p))throw $T.create("no-app",{appName:p});return e[p]}s.App=n;function o(p,y={}){const v=D0(p,y);if(UT(e,v.name))return e[v.name];const x=new n(v,t);return e[v.name]=x,x}function u(){return Object.keys(e).map(p=>e[p])}function h(p){const y=p.name,v=y.replace("-compat","");if(Da(p)&&p.type==="PUBLIC"){const x=(R=s())=>{if(typeof R[v]!="function")throw $T.create("invalid-app-argument",{appName:y});return R[v]()};p.serviceProps!==void 0&&Rm(x,p.serviceProps),t[v]=x,n.prototype[v]=function(...R){return this._getService.bind(this,y).apply(this,p.multipleInstances?R:[])}}return p.type==="PUBLIC"?t[v]:null}function d(p,y){return y==="serverAuth"?null:y}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){const n=PO(DO);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:KA,extendNamespace:e,createSubscribe:kA,ErrorFactory:cl,deepExtend:Rm});function e(t){Rm(n,t)}return n}const kO=KA();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=new sp("@firebase/app-compat"),OO="@firebase/app-compat",VO="0.2.51";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(n){ai(OO,VO,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=SA();if(n.firebase!==void 0){QT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&QT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const qa=kO;MO();var LO="firebase",UO="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qa.registerVersion(LO,UO,"app-compat");var WT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wa,$A;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,T){function w(){}w.prototype=T.prototype,O.D=T.prototype,O.prototype=new w,O.prototype.constructor=O,O.C=function(I,D,M){for(var C=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)C[ke-2]=arguments[ke];return T.prototype[D].apply(I,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,T,w){w||(w=0);var I=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)I[D]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(D=0;16>D;++D)I[D]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=O.g[0],w=O.g[1],D=O.g[2];var M=O.g[3],C=T+(M^w&(D^M))+I[0]+3614090360&4294967295;T=w+(C<<7&4294967295|C>>>25),C=M+(D^T&(w^D))+I[1]+3905402710&4294967295,M=T+(C<<12&4294967295|C>>>20),C=D+(w^M&(T^w))+I[2]+606105819&4294967295,D=M+(C<<17&4294967295|C>>>15),C=w+(T^D&(M^T))+I[3]+3250441966&4294967295,w=D+(C<<22&4294967295|C>>>10),C=T+(M^w&(D^M))+I[4]+4118548399&4294967295,T=w+(C<<7&4294967295|C>>>25),C=M+(D^T&(w^D))+I[5]+1200080426&4294967295,M=T+(C<<12&4294967295|C>>>20),C=D+(w^M&(T^w))+I[6]+2821735955&4294967295,D=M+(C<<17&4294967295|C>>>15),C=w+(T^D&(M^T))+I[7]+4249261313&4294967295,w=D+(C<<22&4294967295|C>>>10),C=T+(M^w&(D^M))+I[8]+1770035416&4294967295,T=w+(C<<7&4294967295|C>>>25),C=M+(D^T&(w^D))+I[9]+2336552879&4294967295,M=T+(C<<12&4294967295|C>>>20),C=D+(w^M&(T^w))+I[10]+4294925233&4294967295,D=M+(C<<17&4294967295|C>>>15),C=w+(T^D&(M^T))+I[11]+2304563134&4294967295,w=D+(C<<22&4294967295|C>>>10),C=T+(M^w&(D^M))+I[12]+1804603682&4294967295,T=w+(C<<7&4294967295|C>>>25),C=M+(D^T&(w^D))+I[13]+4254626195&4294967295,M=T+(C<<12&4294967295|C>>>20),C=D+(w^M&(T^w))+I[14]+2792965006&4294967295,D=M+(C<<17&4294967295|C>>>15),C=w+(T^D&(M^T))+I[15]+1236535329&4294967295,w=D+(C<<22&4294967295|C>>>10),C=T+(D^M&(w^D))+I[1]+4129170786&4294967295,T=w+(C<<5&4294967295|C>>>27),C=M+(w^D&(T^w))+I[6]+3225465664&4294967295,M=T+(C<<9&4294967295|C>>>23),C=D+(T^w&(M^T))+I[11]+643717713&4294967295,D=M+(C<<14&4294967295|C>>>18),C=w+(M^T&(D^M))+I[0]+3921069994&4294967295,w=D+(C<<20&4294967295|C>>>12),C=T+(D^M&(w^D))+I[5]+3593408605&4294967295,T=w+(C<<5&4294967295|C>>>27),C=M+(w^D&(T^w))+I[10]+38016083&4294967295,M=T+(C<<9&4294967295|C>>>23),C=D+(T^w&(M^T))+I[15]+3634488961&4294967295,D=M+(C<<14&4294967295|C>>>18),C=w+(M^T&(D^M))+I[4]+3889429448&4294967295,w=D+(C<<20&4294967295|C>>>12),C=T+(D^M&(w^D))+I[9]+568446438&4294967295,T=w+(C<<5&4294967295|C>>>27),C=M+(w^D&(T^w))+I[14]+3275163606&4294967295,M=T+(C<<9&4294967295|C>>>23),C=D+(T^w&(M^T))+I[3]+4107603335&4294967295,D=M+(C<<14&4294967295|C>>>18),C=w+(M^T&(D^M))+I[8]+1163531501&4294967295,w=D+(C<<20&4294967295|C>>>12),C=T+(D^M&(w^D))+I[13]+2850285829&4294967295,T=w+(C<<5&4294967295|C>>>27),C=M+(w^D&(T^w))+I[2]+4243563512&4294967295,M=T+(C<<9&4294967295|C>>>23),C=D+(T^w&(M^T))+I[7]+1735328473&4294967295,D=M+(C<<14&4294967295|C>>>18),C=w+(M^T&(D^M))+I[12]+2368359562&4294967295,w=D+(C<<20&4294967295|C>>>12),C=T+(w^D^M)+I[5]+4294588738&4294967295,T=w+(C<<4&4294967295|C>>>28),C=M+(T^w^D)+I[8]+2272392833&4294967295,M=T+(C<<11&4294967295|C>>>21),C=D+(M^T^w)+I[11]+1839030562&4294967295,D=M+(C<<16&4294967295|C>>>16),C=w+(D^M^T)+I[14]+4259657740&4294967295,w=D+(C<<23&4294967295|C>>>9),C=T+(w^D^M)+I[1]+2763975236&4294967295,T=w+(C<<4&4294967295|C>>>28),C=M+(T^w^D)+I[4]+1272893353&4294967295,M=T+(C<<11&4294967295|C>>>21),C=D+(M^T^w)+I[7]+4139469664&4294967295,D=M+(C<<16&4294967295|C>>>16),C=w+(D^M^T)+I[10]+3200236656&4294967295,w=D+(C<<23&4294967295|C>>>9),C=T+(w^D^M)+I[13]+681279174&4294967295,T=w+(C<<4&4294967295|C>>>28),C=M+(T^w^D)+I[0]+3936430074&4294967295,M=T+(C<<11&4294967295|C>>>21),C=D+(M^T^w)+I[3]+3572445317&4294967295,D=M+(C<<16&4294967295|C>>>16),C=w+(D^M^T)+I[6]+76029189&4294967295,w=D+(C<<23&4294967295|C>>>9),C=T+(w^D^M)+I[9]+3654602809&4294967295,T=w+(C<<4&4294967295|C>>>28),C=M+(T^w^D)+I[12]+3873151461&4294967295,M=T+(C<<11&4294967295|C>>>21),C=D+(M^T^w)+I[15]+530742520&4294967295,D=M+(C<<16&4294967295|C>>>16),C=w+(D^M^T)+I[2]+3299628645&4294967295,w=D+(C<<23&4294967295|C>>>9),C=T+(D^(w|~M))+I[0]+4096336452&4294967295,T=w+(C<<6&4294967295|C>>>26),C=M+(w^(T|~D))+I[7]+1126891415&4294967295,M=T+(C<<10&4294967295|C>>>22),C=D+(T^(M|~w))+I[14]+2878612391&4294967295,D=M+(C<<15&4294967295|C>>>17),C=w+(M^(D|~T))+I[5]+4237533241&4294967295,w=D+(C<<21&4294967295|C>>>11),C=T+(D^(w|~M))+I[12]+1700485571&4294967295,T=w+(C<<6&4294967295|C>>>26),C=M+(w^(T|~D))+I[3]+2399980690&4294967295,M=T+(C<<10&4294967295|C>>>22),C=D+(T^(M|~w))+I[10]+4293915773&4294967295,D=M+(C<<15&4294967295|C>>>17),C=w+(M^(D|~T))+I[1]+2240044497&4294967295,w=D+(C<<21&4294967295|C>>>11),C=T+(D^(w|~M))+I[8]+1873313359&4294967295,T=w+(C<<6&4294967295|C>>>26),C=M+(w^(T|~D))+I[15]+4264355552&4294967295,M=T+(C<<10&4294967295|C>>>22),C=D+(T^(M|~w))+I[6]+2734768916&4294967295,D=M+(C<<15&4294967295|C>>>17),C=w+(M^(D|~T))+I[13]+1309151649&4294967295,w=D+(C<<21&4294967295|C>>>11),C=T+(D^(w|~M))+I[4]+4149444226&4294967295,T=w+(C<<6&4294967295|C>>>26),C=M+(w^(T|~D))+I[11]+3174756917&4294967295,M=T+(C<<10&4294967295|C>>>22),C=D+(T^(M|~w))+I[2]+718787259&4294967295,D=M+(C<<15&4294967295|C>>>17),C=w+(M^(D|~T))+I[9]+3951481745&4294967295,O.g[0]=O.g[0]+T&4294967295,O.g[1]=O.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,O.g[2]=O.g[2]+D&4294967295,O.g[3]=O.g[3]+M&4294967295}r.prototype.u=function(O,T){T===void 0&&(T=O.length);for(var w=T-this.blockSize,I=this.B,D=this.h,M=0;M<T;){if(D==0)for(;M<=w;)s(this,O,M),M+=this.blockSize;if(typeof O=="string"){for(;M<T;)if(I[D++]=O.charCodeAt(M++),D==this.blockSize){s(this,I),D=0;break}}else for(;M<T;)if(I[D++]=O[M++],D==this.blockSize){s(this,I),D=0;break}}this.h=D,this.o+=T},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var T=1;T<O.length-8;++T)O[T]=0;var w=8*this.o;for(T=O.length-8;T<O.length;++T)O[T]=w&255,w/=256;for(this.u(O),O=Array(16),T=w=0;4>T;++T)for(var I=0;32>I;I+=8)O[w++]=this.g[T]>>>I&255;return O};function o(O,T){var w=h;return Object.prototype.hasOwnProperty.call(w,O)?w[O]:w[O]=T(O)}function u(O,T){this.h=T;for(var w=[],I=!0,D=O.length-1;0<=D;D--){var M=O[D]|0;I&&M==T||(w[D]=M,I=!1)}this.g=w}var h={};function d(O){return-128<=O&&128>O?o(O,function(T){return new u([T|0],0>T?-1:0)}):new u([O|0],0>O?-1:0)}function p(O){if(isNaN(O)||!isFinite(O))return v;if(0>O)return U(p(-O));for(var T=[],w=1,I=0;O>=w;I++)T[I]=O/w|0,w*=4294967296;return new u(T,0)}function y(O,T){if(O.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(O.charAt(0)=="-")return U(y(O.substring(1),T));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=p(Math.pow(T,8)),I=v,D=0;D<O.length;D+=8){var M=Math.min(8,O.length-D),C=parseInt(O.substring(D,D+M),T);8>M?(M=p(Math.pow(T,M)),I=I.j(M).add(p(C))):(I=I.j(w),I=I.add(p(C)))}return I}var v=d(0),x=d(1),R=d(16777216);n=u.prototype,n.m=function(){if(j(this))return-U(this).m();for(var O=0,T=1,w=0;w<this.g.length;w++){var I=this.i(w);O+=(0<=I?I:4294967296+I)*T,T*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(N(this))return"0";if(j(this))return"-"+U(this).toString(O);for(var T=p(Math.pow(O,6)),w=this,I="";;){var D=ue(w,T).g;w=B(w,D.j(T));var M=((0<w.g.length?w.g[0]:w.h)>>>0).toString(O);if(w=D,N(w))return M+I;for(;6>M.length;)M="0"+M;I=M+I}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function N(O){if(O.h!=0)return!1;for(var T=0;T<O.g.length;T++)if(O.g[T]!=0)return!1;return!0}function j(O){return O.h==-1}n.l=function(O){return O=B(this,O),j(O)?-1:N(O)?0:1};function U(O){for(var T=O.g.length,w=[],I=0;I<T;I++)w[I]=~O.g[I];return new u(w,~O.h).add(x)}n.abs=function(){return j(this)?U(this):this},n.add=function(O){for(var T=Math.max(this.g.length,O.g.length),w=[],I=0,D=0;D<=T;D++){var M=I+(this.i(D)&65535)+(O.i(D)&65535),C=(M>>>16)+(this.i(D)>>>16)+(O.i(D)>>>16);I=C>>>16,M&=65535,C&=65535,w[D]=C<<16|M}return new u(w,w[w.length-1]&-2147483648?-1:0)};function B(O,T){return O.add(U(T))}n.j=function(O){if(N(this)||N(O))return v;if(j(this))return j(O)?U(this).j(U(O)):U(U(this).j(O));if(j(O))return U(this.j(U(O)));if(0>this.l(R)&&0>O.l(R))return p(this.m()*O.m());for(var T=this.g.length+O.g.length,w=[],I=0;I<2*T;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<O.g.length;D++){var M=this.i(I)>>>16,C=this.i(I)&65535,ke=O.i(D)>>>16,Ue=O.i(D)&65535;w[2*I+2*D]+=C*Ue,te(w,2*I+2*D),w[2*I+2*D+1]+=M*Ue,te(w,2*I+2*D+1),w[2*I+2*D+1]+=C*ke,te(w,2*I+2*D+1),w[2*I+2*D+2]+=M*ke,te(w,2*I+2*D+2)}for(I=0;I<T;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=T;I<2*T;I++)w[I]=0;return new u(w,0)};function te(O,T){for(;(O[T]&65535)!=O[T];)O[T+1]+=O[T]>>>16,O[T]&=65535,T++}function K(O,T){this.g=O,this.h=T}function ue(O,T){if(N(T))throw Error("division by zero");if(N(O))return new K(v,v);if(j(O))return T=ue(U(O),T),new K(U(T.g),U(T.h));if(j(T))return T=ue(O,U(T)),new K(U(T.g),T.h);if(30<O.g.length){if(j(O)||j(T))throw Error("slowDivide_ only works with positive integers.");for(var w=x,I=T;0>=I.l(O);)w=ie(w),I=ie(I);var D=J(w,1),M=J(I,1);for(I=J(I,2),w=J(w,2);!N(I);){var C=M.add(I);0>=C.l(O)&&(D=D.add(w),M=C),I=J(I,1),w=J(w,1)}return T=B(O,D.j(T)),new K(D,T)}for(D=v;0<=O.l(T);){for(w=Math.max(1,Math.floor(O.m()/T.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),M=p(w),C=M.j(T);j(C)||0<C.l(O);)w-=I,M=p(w),C=M.j(T);N(M)&&(M=x),D=D.add(M),O=B(O,C)}return new K(D,O)}n.A=function(O){return ue(this,O).h},n.and=function(O){for(var T=Math.max(this.g.length,O.g.length),w=[],I=0;I<T;I++)w[I]=this.i(I)&O.i(I);return new u(w,this.h&O.h)},n.or=function(O){for(var T=Math.max(this.g.length,O.g.length),w=[],I=0;I<T;I++)w[I]=this.i(I)|O.i(I);return new u(w,this.h|O.h)},n.xor=function(O){for(var T=Math.max(this.g.length,O.g.length),w=[],I=0;I<T;I++)w[I]=this.i(I)^O.i(I);return new u(w,this.h^O.h)};function ie(O){for(var T=O.g.length+1,w=[],I=0;I<T;I++)w[I]=O.i(I)<<1|O.i(I-1)>>>31;return new u(w,O.h)}function J(O,T){var w=T>>5;T%=32;for(var I=O.g.length-w,D=[],M=0;M<I;M++)D[M]=0<T?O.i(M+w)>>>T|O.i(M+w+1)<<32-T:O.i(M+w);return new u(D,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$A=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,wa=u}).apply(typeof WT<"u"?WT:typeof self<"u"?self:typeof window<"u"?window:{});var em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QA,wh,WA,hm,A_,YA,XA,ZA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,b){return f==Array.prototype||f==Object.prototype||(f[_]=b.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof em=="object"&&em];for(var _=0;_<f.length;++_){var b=f[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function s(f,_){if(_)e:{var b=r;f=f.split(".");for(var S=0;S<f.length-1;S++){var H=f[S];if(!(H in b))break e;b=b[H]}f=f[f.length-1],S=b[f],_=_(S),_!=S&&_!=null&&e(b,f,{configurable:!0,writable:!0,value:_})}}function o(f,_){f instanceof String&&(f+="");var b=0,S=!1,H={next:function(){if(!S&&b<f.length){var X=b++;return{value:_(X,f[X]),done:!1}}return S=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(f){return f||function(){return o(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function p(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function y(f,_,b){return f.call.apply(f.bind,arguments)}function v(f,_,b){if(!f)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,S),f.apply(_,H)}}return function(){return f.apply(_,arguments)}}function x(f,_,b){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,x.apply(null,arguments)}function R(f,_){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),f.apply(this,S)}}function N(f,_){function b(){}b.prototype=_.prototype,f.aa=_.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(S,H,X){for(var ge=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)ge[ot-2]=arguments[ot];return _.prototype[H].apply(S,ge)}}function j(f){const _=f.length;if(0<_){const b=Array(_);for(let S=0;S<_;S++)b[S]=f[S];return b}return[]}function U(f,_){for(let b=1;b<arguments.length;b++){const S=arguments[b];if(d(S)){const H=f.length||0,X=S.length||0;f.length=H+X;for(let ge=0;ge<X;ge++)f[H+ge]=S[ge]}else f.push(S)}}class B{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function te(f){return/^[\s\xa0]*$/.test(f)}function K(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function ue(f){return ue[" "](f),f}ue[" "]=function(){};var ie=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function J(f,_,b){for(const S in f)_.call(b,f[S],S,f)}function O(f,_){for(const b in f)_.call(void 0,f[b],b,f)}function T(f){const _={};for(const b in f)_[b]=f[b];return _}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(f,_){let b,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(b in S)f[b]=S[b];for(let X=0;X<w.length;X++)b=w[X],Object.prototype.hasOwnProperty.call(S,b)&&(f[b]=S[b])}}function D(f){var _=1;f=f.split(":");const b=[];for(;0<_&&f.length;)b.push(f.shift()),_--;return f.length&&b.push(f.join(":")),b}function M(f){h.setTimeout(()=>{throw f},0)}function C(){var f=pe;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class ke{constructor(){this.h=this.g=null}add(_,b){const S=Ue.get();S.set(_,b),this.h?this.h.next=S:this.g=S,this.h=S}}var Ue=new B(()=>new re,f=>f.reset());class re{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let me,he=!1,pe=new ke,L=()=>{const f=h.Promise.resolve(void 0);me=()=>{f.then(W)}};var W=()=>{for(var f;f=C();){try{f.h.call(f.g)}catch(b){M(b)}var _=Ue;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}he=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};h.addEventListener("test",b,_),h.removeEventListener("test",b,_)}catch{}return f}();function ve(f,_){if(Z.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,S=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(ie){e:{try{ue(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else b=="mouseover"?_=f.fromElement:b=="mouseout"&&(_=f.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:we[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ve.aa.h.call(this)}}N(ve,Z);var we={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),be=0;function Se(f,_,b,S,H){this.listener=f,this.proxy=null,this.src=_,this.type=b,this.capture=!!S,this.ha=H,this.key=++be,this.da=this.fa=!1}function De(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Pe(f){this.src=f,this.g={},this.h=0}Pe.prototype.add=function(f,_,b,S,H){var X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);var ge=nt(f,_,S,H);return-1<ge?(_=f[ge],b||(_.fa=!1)):(_=new Se(_,this.src,X,!!S,H),_.fa=b,f.push(_)),_};function Oe(f,_){var b=_.type;if(b in f.g){var S=f.g[b],H=Array.prototype.indexOf.call(S,_,void 0),X;(X=0<=H)&&Array.prototype.splice.call(S,H,1),X&&(De(_),f.g[b].length==0&&(delete f.g[b],f.h--))}}function nt(f,_,b,S){for(var H=0;H<f.length;++H){var X=f[H];if(!X.da&&X.listener==_&&X.capture==!!b&&X.ha==S)return H}return-1}var We="closure_lm_"+(1e6*Math.random()|0),Ge={};function Me(f,_,b,S,H){if(Array.isArray(_)){for(var X=0;X<_.length;X++)Me(f,_[X],b,S,H);return null}return b=hn(b),f&&f[Be]?f.K(_,b,p(S)?!!S.capture:!1,H):It(f,_,b,!1,S,H)}function It(f,_,b,S,H,X){if(!_)throw Error("Invalid event type");var ge=p(H)?!!H.capture:!!H,ot=Zn(f);if(ot||(f[We]=ot=new Pe(f)),b=ot.add(_,b,S,ge,X),b.proxy)return b;if(S=ze(),b.proxy=S,S.src=f,S.listener=b,f.addEventListener)fe||(H=ge),H===void 0&&(H=!1),f.addEventListener(_.toString(),S,H);else if(f.attachEvent)f.attachEvent(Pn(_.toString()),S);else if(f.addListener&&f.removeListener)f.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ze(){function f(b){return _.call(f.src,f.listener,b)}const _=En;return f}function rt(f,_,b,S,H){if(Array.isArray(_))for(var X=0;X<_.length;X++)rt(f,_[X],b,S,H);else S=p(S)?!!S.capture:!!S,b=hn(b),f&&f[Be]?(f=f.i,_=String(_).toString(),_ in f.g&&(X=f.g[_],b=nt(X,b,S,H),-1<b&&(De(X[b]),Array.prototype.splice.call(X,b,1),X.length==0&&(delete f.g[_],f.h--)))):f&&(f=Zn(f))&&(_=f.g[_.toString()],f=-1,_&&(f=nt(_,b,S,H)),(b=-1<f?_[f]:null)&&_t(b))}function _t(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[Be])Oe(_.i,f);else{var b=f.type,S=f.proxy;_.removeEventListener?_.removeEventListener(b,S,f.capture):_.detachEvent?_.detachEvent(Pn(b),S):_.addListener&&_.removeListener&&_.removeListener(S),(b=Zn(_))?(Oe(b,f),b.h==0&&(b.src=null,_[We]=null)):De(f)}}}function Pn(f){return f in Ge?Ge[f]:Ge[f]="on"+f}function En(f,_){if(f.da)f=!0;else{_=new ve(_,this);var b=f.listener,S=f.ha||f.src;f.fa&&_t(f),f=b.call(S,_)}return f}function Zn(f){return f=f[We],f instanceof Pe?f:null}var it="__closure_events_fn_"+(1e9*Math.random()>>>0);function hn(f){return typeof f=="function"?f:(f[it]||(f[it]=function(_){return f.handleEvent(_)}),f[it])}function qe(){ce.call(this),this.i=new Pe(this),this.M=this,this.F=null}N(qe,ce),qe.prototype[Be]=!0,qe.prototype.removeEventListener=function(f,_,b,S){rt(this,f,_,b,S)};function Ye(f,_){var b,S=f.F;if(S)for(b=[];S;S=S.F)b.push(S);if(f=f.M,S=_.type||_,typeof _=="string")_=new Z(_,f);else if(_ instanceof Z)_.target=_.target||f;else{var H=_;_=new Z(S,f),I(_,H)}if(H=!0,b)for(var X=b.length-1;0<=X;X--){var ge=_.g=b[X];H=Lt(ge,S,!0,_)&&H}if(ge=_.g=f,H=Lt(ge,S,!0,_)&&H,H=Lt(ge,S,!1,_)&&H,b)for(X=0;X<b.length;X++)ge=_.g=b[X],H=Lt(ge,S,!1,_)&&H}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var b=f.g[_],S=0;S<b.length;S++)De(b[S]);delete f.g[_],f.h--}}this.F=null},qe.prototype.K=function(f,_,b,S){return this.i.add(String(f),_,!1,b,S)},qe.prototype.L=function(f,_,b,S){return this.i.add(String(f),_,!0,b,S)};function Lt(f,_,b,S){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,X=0;X<_.length;++X){var ge=_[X];if(ge&&!ge.da&&ge.capture==b){var ot=ge.listener,mn=ge.ha||ge.src;ge.fa&&Oe(f.i,ge),H=ot.call(mn,S)!==!1&&H}}return H&&!S.defaultPrevented}function Cr(f,_,b){if(typeof f=="function")b&&(f=x(f,b));else if(f&&typeof f.handleEvent=="function")f=x(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(f,_||0)}function Dr(f){f.g=Cr(()=>{f.g=null,f.i&&(f.i=!1,Dr(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class ht extends ce{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rn(f){ce.call(this),this.h=f,this.g={}}N(rn,ce);var dt=[];function at(f){J(f.g,function(_,b){this.g.hasOwnProperty(b)&&_t(_)},f),f.g={}}rn.prototype.N=function(){rn.aa.N.call(this),at(this)},rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=h.JSON.stringify,kn=h.JSON.parse,dn=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function Ns(){}Ns.prototype.h=null;function Ya(f){return f.h||(f.h=f.i())}function Xa(){}var gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wr(){Z.call(this,"d")}N(Wr,Z);function ur(){Z.call(this,"c")}N(ur,Z);var Jn={},Yr=null;function zi(){return Yr=Yr||new qe}Jn.La="serverreachability";function Ps(f){Z.call(this,Jn.La,f)}N(Ps,Z);function Xr(f){const _=zi();Ye(_,new Ps(_))}Jn.STAT_EVENT="statevent";function Fi(f,_){Z.call(this,Jn.STAT_EVENT,f),this.stat=_}N(Fi,Z);function Nt(f){const _=zi();Ye(_,new Fi(_,f))}Jn.Ma="timingevent";function Za(f,_){Z.call(this,Jn.Ma,f),this.size=_}N(Za,Z);function ks(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},_)}function Os(){this.g=!0}Os.prototype.xa=function(){this.g=!1};function Vd(f,_,b,S,H,X){f.info(function(){if(f.g)if(X)for(var ge="",ot=X.split("&"),mn=0;mn<ot.length;mn++){var lt=ot[mn].split("=");if(1<lt.length){var xn=lt[0];lt=lt[1];var pn=xn.split("_");ge=2<=pn.length&&pn[1]=="type"?ge+(xn+"="+lt+"&"):ge+(xn+"=redacted&")}}else ge=null;else ge=X;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+_+`
`+b+`
`+ge})}function Md(f,_,b,S,H,X,ge){f.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+_+`
`+b+`
`+X+" "+ge})}function Vs(f,_,b,S){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+wn(f,b)+(S?" "+S:"")})}function ui(f,_){f.info(function(){return"TIMEOUT: "+_})}Os.prototype.info=function(){};function wn(f,_){if(!f.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var S=b[f];if(!(2>S.length)){var H=S[1];if(Array.isArray(H)&&!(1>H.length)){var X=H[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ge=1;ge<H.length;ge++)H[ge]=""}}}}return Gn(b)}catch{return _}}var fn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ja;function gl(){}N(gl,Ns),gl.prototype.g=function(){return new XMLHttpRequest},gl.prototype.i=function(){return{}},Ja=new gl;function ci(f,_,b,S){this.j=f,this.i=_,this.l=b,this.R=S||1,this.U=new rn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uc}function uc(){this.i=null,this.g="",this.h=!1}var Ms={},eo={};function Zr(f,_,b){f.L=1,f.v=ro(Kt(_)),f.m=b,f.P=!0,qi(f,null)}function qi(f,_){f.F=Date.now(),Ut(f),f.A=Kt(f.v);var b=f.A,S=f.R;Array.isArray(S)||(S=[String(S)]),Ki(b.i,"t",S),f.C=0,b=f.j.J,f.h=new uc,f.g=Yd(f.j,b?_:null,!f.m),0<f.O&&(f.M=new ht(x(f.Y,f,f.g),f.O)),_=f.U,b=f.g,S=f.ca;var H="readystatechange";Array.isArray(H)||(H&&(dt[0]=H.toString()),H=dt);for(var X=0;X<H.length;X++){var ge=Me(b,H[X],S||_.handleEvent,!1,_.h||_);if(!ge)break;_.g[ge.key]=ge}_=f.H?T(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),Xr(),Vd(f.i,f.u,f.A,f.l,f.R,f.m)}ci.prototype.ca=function(f){f=f.target;const _=this.M;_&&Vr(f)==3?_.j():this.Y(f)},ci.prototype.Y=function(f){try{if(f==this.g)e:{const pn=Vr(this.g);var _=this.g.Ba();const Yi=this.g.Z();if(!(3>pn)&&(pn!=3||this.g&&(this.h.h||this.g.oa()||Bd(this.g)))){this.J||pn!=4||_==7||(_==8||0>=Yi?Xr(3):Xr(2)),yl(this);var b=this.g.Z();this.X=b;t:if(Ls(this)){var S=Bd(this.g);f="";var H=S.length,X=Vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cr(this),yr(this);var ge="";break t}this.h.i=new h.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,f+=this.h.i.decode(S[_],{stream:!(X&&_==H-1)});S.length=0,this.h.g+=f,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=b==200,Md(this.i,this.u,this.A,this.l,this.R,pn,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,mn=this.g;if((ot=mn.g?mn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(ot)){var lt=ot;break t}}lt=null}if(b=lt)Vs(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_r(this,b);else{this.o=!1,this.s=3,Nt(12),cr(this),yr(this);break e}}if(this.P){b=!0;let On;for(;!this.J&&this.C<ge.length;)if(On=Us(this,ge),On==eo){pn==4&&(this.s=4,Nt(14),b=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(On==Ms){this.s=4,Nt(15),Vs(this.i,this.l,ge,"[Invalid Chunk]"),b=!1;break}else Vs(this.i,this.l,On,null),_r(this,On);if(Ls(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pn!=4||ge.length!=0||this.h.h||(this.s=1,Nt(16),b=!1),this.o=this.o&&b,!b)Vs(this.i,this.l,ge,"[Invalid Chunked Response]"),cr(this),yr(this);else if(0<ge.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),co(xn),xn.M=!0,Nt(11))}}else Vs(this.i,this.l,ge,null),_r(this,ge);pn==4&&cr(this),this.o&&!this.J&&(pn==4?$d(this.j,this):(this.o=!1,Ut(this)))}else Wp(this.g),b==400&&0<ge.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),cr(this),yr(this)}}}catch{}finally{}};function Ls(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Us(f,_){var b=f.C,S=_.indexOf(`
`,b);return S==-1?eo:(b=Number(_.substring(b,S)),isNaN(b)?Ms:(S+=1,S+b>_.length?eo:(_=_.slice(S,S+b),f.C=S+b,_)))}ci.prototype.cancel=function(){this.J=!0,cr(this)};function Ut(f){f.S=Date.now()+f.I,cc(f,f.I)}function cc(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ks(x(f.ba,f),_)}function yl(f){f.B&&(h.clearTimeout(f.B),f.B=null)}ci.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ui(this.i,this.A),this.L!=2&&(Xr(),Nt(17)),cr(this),this.s=2,yr(this)):cc(this,this.S-f)};function yr(f){f.j.G==0||f.J||$d(f.j,f)}function cr(f){yl(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,at(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function _r(f,_){try{var b=f.j;if(b.G!=0&&(b.g==f||js(b.h,f))){if(!f.K&&js(b.h,f)&&b.G==3){try{var S=b.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<f.F)Sl(b),Il(b);else break e;Ec(b),Nt(18)}}else b.za=H[1],0<b.za-b.T&&37500>H[2]&&b.F&&b.v==0&&!b.C&&(b.C=ks(x(b.Za,b),6e3));if(1>=Ld(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Wi(b,11)}else if((f.K||b.g==f)&&Sl(b),!te(_))for(H=b.Da.g.parse(_),_=0;_<H.length;_++){let lt=H[_];if(b.T=lt[0],lt=lt[1],b.G==2)if(lt[0]=="c"){b.K=lt[1],b.ia=lt[2];const xn=lt[3];xn!=null&&(b.la=xn,b.j.info("VER="+b.la));const pn=lt[4];pn!=null&&(b.Aa=pn,b.j.info("SVER="+b.Aa));const Yi=lt[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(S=1.5*Yi,b.L=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const On=f.g;if(On){const yi=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yi){var X=S.h;X.g||yi.indexOf("spdy")==-1&&yi.indexOf("quic")==-1&&yi.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(zs(X,X.h),X.h=null))}if(S.D){const Tc=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;Tc&&(S.ya=Tc,ft(S.I,S.D,Tc))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms")),S=b;var ge=f;if(S.qa=Wd(S,S.J?S.ia:null,S.W),ge.K){Nr(S.h,ge);var ot=ge,mn=S.L;mn&&(ot.I=mn),ot.B&&(yl(ot),Ut(ot)),S.g=ge}else Gd(S);0<b.i.length&&Al(b)}else lt[0]!="stop"&&lt[0]!="close"||Wi(b,7);else b.G==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Wi(b,7):vc(b):lt[0]!="noop"&&b.l&&b.l.ta(lt),b.v=0)}}Xr(4)}catch{}}var Hp=class{constructor(f,_){this.g=f,this.map=_}};function hc(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ld(f){return f.h?1:f.g?f.g.size:0}function js(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function zs(f,_){f.g?f.g.add(_):f.h=_}function Nr(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}hc.prototype.cancel=function(){if(this.i=er(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function er(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const b of f.g.values())_=_.concat(b.D);return _}return j(f.i)}function Ud(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var _=[],b=f.length,S=0;S<b;S++)_.push(f[S]);return _}_=[],b=0;for(S in f)_[b++]=f[S];return _}function Gp(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var _=[];f=f.length;for(var b=0;b<f;b++)_.push(b);return _}_=[],b=0;for(const S in f)_[b++]=S;return _}}}function to(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var b=Gp(f),S=Ud(f),H=S.length,X=0;X<H;X++)_.call(void 0,S[X],b&&b[X],f)}var fc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _l(f,_){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var S=f[b].indexOf("="),H=null;if(0<=S){var X=f[b].substring(0,S);H=f[b].substring(S+1)}else X=f[b];_(X,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Hi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Hi){this.h=f.h,Fs(this,f.j),this.o=f.o,this.g=f.g,no(this,f.s),this.l=f.l;var _=f.i,b=new hi;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),vl(this,b),this.m=f.m}else f&&(_=String(f).match(fc))?(this.h=!1,Fs(this,_[1]||"",!0),this.o=Bs(_[2]||""),this.g=Bs(_[3]||"",!0),no(this,_[4]),this.l=Bs(_[5]||"",!0),vl(this,_[6]||"",!0),this.m=Bs(_[7]||"")):(this.h=!1,this.i=new hi(null,this.h))}Hi.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Pr(_,mc,!0),":");var b=this.g;return(b||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Pr(_,mc,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&f.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(Pr(b,b.charAt(0)=="/"?pc:jd,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",Pr(b,Qp)),f.join("")};function Kt(f){return new Hi(f)}function Fs(f,_,b){f.j=b?Bs(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function no(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function vl(f,_,b){_ instanceof hi?(f.i=_,gc(f.i,f.h)):(b||(_=Pr(_,$p)),f.i=new hi(_,f.h))}function ft(f,_,b){f.i.set(_,b)}function ro(f){return ft(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Bs(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Pr(f,_,b){return typeof f=="string"?(f=encodeURI(f).replace(_,Kp),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Kp(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var mc=/[#\/\?@]/g,jd=/[#\?:]/g,pc=/[#\?]/g,$p=/[#\?@]/g,Qp=/#/g;function hi(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function kr(f){f.g||(f.g=new Map,f.h=0,f.i&&_l(f.i,function(_,b){f.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=hi.prototype,n.add=function(f,_){kr(this),this.i=null,f=$i(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(_),this.h+=1,this};function bl(f,_){kr(f),_=$i(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Gi(f,_){return kr(f),_=$i(f,_),f.g.has(_)}n.forEach=function(f,_){kr(this),this.g.forEach(function(b,S){b.forEach(function(H){f.call(_,H,S,this)},this)},this)},n.na=function(){kr(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let S=0;S<_.length;S++){const H=f[S];for(let X=0;X<H.length;X++)b.push(_[S])}return b},n.V=function(f){kr(this);let _=[];if(typeof f=="string")Gi(this,f)&&(_=_.concat(this.g.get($i(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)_=_.concat(f[b])}return _},n.set=function(f,_){return kr(this),this.i=null,f=$i(this,f),Gi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function Ki(f,_,b){bl(f,_),0<b.length&&(f.i=null,f.g.set($i(f,_),j(b)),f.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var S=_[b];const X=encodeURIComponent(String(S)),ge=this.V(S);for(S=0;S<ge.length;S++){var H=X;ge[S]!==""&&(H+="="+encodeURIComponent(String(ge[S]))),f.push(H)}}return this.i=f.join("&")};function $i(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function gc(f,_){_&&!f.j&&(kr(f),f.i=null,f.g.forEach(function(b,S){var H=S.toLowerCase();S!=H&&(bl(this,S),Ki(this,H,b))},f)),f.j=_}function zd(f,_){const b=new Os;if(h.Image){const S=new Image;S.onload=R(Or,b,"TestLoadImage: loaded",!0,_,S),S.onerror=R(Or,b,"TestLoadImage: error",!1,_,S),S.onabort=R(Or,b,"TestLoadImage: abort",!1,_,S),S.ontimeout=R(Or,b,"TestLoadImage: timeout",!1,_,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=f}else _(!1)}function io(f,_){const b=new Os,S=new AbortController,H=setTimeout(()=>{S.abort(),Or(b,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:S.signal}).then(X=>{clearTimeout(H),X.ok?Or(b,"TestPingServer: ok",!0,_):Or(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),Or(b,"TestPingServer: error",!1,_)})}function Or(f,_,b,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(b)}catch{}}function so(){this.g=new dn}function di(f,_,b){const S=b||"";try{to(f,function(H,X){let ge=H;p(H)&&(ge=Gn(H)),_.push(S+X+"="+encodeURIComponent(ge))})}catch(H){throw _.push(S+"type="+encodeURIComponent("_badmap")),H}}function qs(f){this.l=f.Ub||null,this.j=f.eb||!1}N(qs,Ns),qs.prototype.g=function(){return new Qi(this.l,this.j)},qs.prototype.i=function(f){return function(){return f}}({});function Qi(f,_){qe.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Qi,qe),n=Qi.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,mi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function yc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?fi(this):mi(this),this.readyState==3&&yc(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,fi(this))},n.Qa=function(f){this.g&&(this.response=f,fi(this))},n.ga=function(){this.g&&fi(this)};function fi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,mi(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=_.next();return f.join(`\r
`)};function mi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function _c(f){let _="";return J(f,function(b,S){_+=S,_+=":",_+=b,_+=`\r
`}),_}function Tn(f,_,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=_c(b),typeof f=="string"?b!=null&&encodeURIComponent(String(b)):ft(f,_,b))}function vt(f){qe.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(vt,qe);var El=/^https?$/i,ao=["POST","PUT"];n=vt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ja.g(),this.v=this.o?Ya(this.o):Ya(Ja),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(X){Fd(this,X);return}if(f=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)b.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const X of S.keys())b.set(X,S.get(X));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),H=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ao,_,void 0))||S||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ge]of b)this.g.setRequestHeader(X,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oo(this),this.u=!0,this.g.send(f),this.u=!1}catch(X){Fd(this,X)}};function Fd(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,wl(f),pi(f)}function wl(f){f.A||(f.A=!0,Ye(f,"complete"),Ye(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ye(this,"complete"),Ye(this,"abort"),pi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pi(this,!0)),vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tl(this):this.bb())},n.bb=function(){Tl(this)};function Tl(f){if(f.h&&typeof u<"u"&&(!f.v[1]||Vr(f)!=4||f.Z()!=2)){if(f.u&&Vr(f)==4)Cr(f.Ea,0,f);else if(Ye(f,"readystatechange"),Vr(f)==4){f.h=!1;try{const ge=f.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var S;if(S=ge===0){var H=String(f.D).match(fc)[1]||null;!H&&h.self&&h.self.location&&(H=h.self.location.protocol.slice(0,-1)),S=!El.test(H?H.toLowerCase():"")}b=S}if(b)Ye(f,"complete"),Ye(f,"success");else{f.m=6;try{var X=2<Vr(f)?f.g.statusText:""}catch{X=""}f.l=X+" ["+f.Z()+"]",wl(f)}}finally{pi(f)}}}}function pi(f,_){if(f.g){oo(f);const b=f.g,S=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Ye(f,"ready");try{b.onreadystatechange=S}catch{}}}function oo(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Vr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Vr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),kn(_)}};function Bd(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Wp(f){const _={};f=(f.g&&2<=Vr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<f.length;S++){if(te(f[S]))continue;var b=D(f[S]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=_[H]||[];_[H]=X,X.push(b)}O(_,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(f,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||_}function xl(f){this.Aa=0,this.i=[],this.j=new Os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,f),this.cb=lo("retryDelaySeedMs",1e4,f),this.Wa=lo("forwardChannelMaxRetries",2,f),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new hc(f&&f.concurrentRequestLimit),this.Da=new so,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xl.prototype,n.la=8,n.G=1,n.connect=function(f,_,b,S){Nt(0),this.W=f,this.H=_||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.I=Wd(this,null,this.W),Al(this)};function vc(f){if(qd(f),f.G==3){var _=f.U++,b=Kt(f.I);if(ft(b,"SID",f.K),ft(b,"RID",_),ft(b,"TYPE","terminate"),uo(f,b),_=new ci(f,f.j,_),_.L=2,_.v=ro(Kt(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=_.v,b=!0),b||(_.g=Yd(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ut(_)}Qd(f)}function Il(f){f.g&&(co(f),f.g.cancel(),f.g=null)}function qd(f){Il(f),f.u&&(h.clearTimeout(f.u),f.u=null),Sl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Al(f){if(!dc(f.h)&&!f.s){f.s=!0;var _=f.Ga;me||L(),he||(me(),he=!0),pe.add(_,f),f.B=0}}function Yp(f,_){return Ld(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ks(x(f.Ga,f,_),wc(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const H=new ci(this,this.j,f);let X=this.o;if(this.S&&(X?(X=T(X),I(X,this.S)):X=this.S),this.m!==null||this.O||(H.H=X,X=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Hd(this,H,_),b=Kt(this.I),ft(b,"RID",f),ft(b,"CVER",22),this.D&&ft(b,"X-HTTP-Session-Id",this.D),uo(this,b),X&&(this.O?_="headers="+encodeURIComponent(String(_c(X)))+"&"+_:this.m&&Tn(b,this.m,X)),zs(this.h,H),this.Ua&&ft(b,"TYPE","init"),this.P?(ft(b,"$req",_),ft(b,"SID","null"),H.T=!0,Zr(H,b,null)):Zr(H,b,_),this.G=2}}else this.G==3&&(f?bc(this,f):this.i.length==0||dc(this.h)||bc(this))};function bc(f,_){var b;_?b=_.l:b=f.U++;const S=Kt(f.I);ft(S,"SID",f.K),ft(S,"RID",b),ft(S,"AID",f.T),uo(f,S),f.m&&f.o&&Tn(S,f.m,f.o),b=new ci(f,f.j,b,f.B+1),f.m===null&&(b.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Hd(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),zs(f.h,b),Zr(b,S,_)}function uo(f,_){f.H&&J(f.H,function(b,S){ft(_,S,b)}),f.l&&to({},function(b,S){ft(_,S,b)})}function Hd(f,_,b){b=Math.min(f.i.length,b);var S=f.l?x(f.l.Na,f.l,f):null;e:{var H=f.i;let X=-1;for(;;){const ge=["count="+b];X==-1?0<b?(X=H[0].g,ge.push("ofs="+X)):X=0:ge.push("ofs="+X);let ot=!0;for(let mn=0;mn<b;mn++){let lt=H[mn].g;const xn=H[mn].map;if(lt-=X,0>lt)X=Math.max(0,H[mn].g-100),ot=!1;else try{di(xn,ge,"req"+lt+"_")}catch{S&&S(xn)}}if(ot){S=ge.join("&");break e}}}return f=f.i.splice(0,b),_.D=f,S}function Gd(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;me||L(),he||(me(),he=!0),pe.add(_,f),f.v=0}}function Ec(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ks(x(f.Fa,f),wc(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Kd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ks(x(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),Il(this),Kd(this))};function co(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Kd(f){f.g=new ci(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Kt(f.qa);ft(_,"RID","rpc"),ft(_,"SID",f.K),ft(_,"AID",f.T),ft(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&ft(_,"TO",f.ja),ft(_,"TYPE","xmlhttp"),uo(f,_),f.m&&f.o&&Tn(_,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=ro(Kt(_)),b.m=null,b.P=!0,qi(b,f)}n.Za=function(){this.C!=null&&(this.C=null,Il(this),Ec(this),Nt(19))};function Sl(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function $d(f,_){var b=null;if(f.g==_){Sl(f),co(f),f.g=null;var S=2}else if(js(f.h,_))b=_.D,Nr(f.h,_),S=1;else return;if(f.G!=0){if(_.o)if(S==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var H=f.B;S=zi(),Ye(S,new Za(S,b)),Al(f)}else Gd(f);else if(H=_.s,H==3||H==0&&0<_.X||!(S==1&&Yp(f,_)||S==2&&Ec(f)))switch(b&&0<b.length&&(_=f.h,_.i=_.i.concat(b)),H){case 1:Wi(f,5);break;case 4:Wi(f,10);break;case 3:Wi(f,6);break;default:Wi(f,2)}}}function wc(f,_){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*_}function Wi(f,_){if(f.j.info("Error code "+_),_==2){var b=x(f.fb,f),S=f.Xa;const H=!S;S=new Hi(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Fs(S,"https"),ro(S),H?zd(S.toString(),b):io(S.toString(),b)}else Nt(2);f.G=0,f.l&&f.l.sa(_),Qd(f),qd(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Qd(f){if(f.G=0,f.ka=[],f.l){const _=er(f.h);(_.length!=0||f.i.length!=0)&&(U(f.ka,_),U(f.ka,f.i),f.h.i.length=0,j(f.i),f.i.length=0),f.l.ra()}}function Wd(f,_,b){var S=b instanceof Hi?Kt(b):new Hi(b);if(S.g!="")_&&(S.g=_+"."+S.g),no(S,S.s);else{var H=h.location;S=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var X=new Hi(null);S&&Fs(X,S),_&&(X.g=_),H&&no(X,H),b&&(X.l=b),S=X}return b=f.D,_=f.ya,b&&_&&ft(S,b,_),ft(S,"VER",f.la),uo(f,S),S}function Yd(f,_,b){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new vt(new qs({eb:b})):new vt(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xd(){}n=Xd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Rl(){}Rl.prototype.g=function(f,_){return new tr(f,_)};function tr(f,_){qe.call(this),this.g=new xl(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!te(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!te(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new gi(this)}N(tr,qe),tr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tr.prototype.close=function(){vc(this.g)},tr.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.u&&(b={},b.__data__=Gn(f),f=b);_.i.push(new Hp(_.Ya++,f)),_.G==3&&Al(_)},tr.prototype.N=function(){this.g.l=null,delete this.j,vc(this.g),delete this.g,tr.aa.N.call(this)};function Zd(f){Wr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const b in _){f=b;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}N(Zd,Wr);function Jd(){ur.call(this),this.status=1}N(Jd,ur);function gi(f){this.g=f}N(gi,Xd),gi.prototype.ua=function(){Ye(this.g,"a")},gi.prototype.ta=function(f){Ye(this.g,new Zd(f))},gi.prototype.sa=function(f){Ye(this.g,new Jd)},gi.prototype.ra=function(){Ye(this.g,"b")},Rl.prototype.createWebChannel=Rl.prototype.g,tr.prototype.send=tr.prototype.o,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,ZA=function(){return new Rl},XA=function(){return zi()},YA=Jn,A_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fn.NO_ERROR=0,fn.TIMEOUT=8,fn.HTTP_ERROR=6,hm=fn,Bi.COMPLETE="complete",WA=Bi,Xa.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",qe.prototype.listen=qe.prototype.K,wh=Xa,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,QA=vt}).apply(typeof em<"u"?em:typeof self<"u"?self:typeof window<"u"?window:{});const YT="@firebase/firestore",XT="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zu="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new sp("@firebase/firestore");function cu(){return Na.logLevel}function jO(n){Na.setLogLevel(n)}function le(n,...e){if(Na.logLevel<=Ze.DEBUG){const t=e.map(P0);Na.debug(`Firestore (${Zu}): ${n}`,...t)}}function en(n,...e){if(Na.logLevel<=Ze.ERROR){const t=e.map(P0);Na.error(`Firestore (${Zu}): ${n}`,...t)}}function Vi(n,...e){if(Na.logLevel<=Ze.WARN){const t=e.map(P0);Na.warn(`Firestore (${Zu}): ${n}`,...t)}}function P0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n="Unexpected state"){const e=`FIRESTORE (${Zu}) INTERNAL ASSERTION FAILED: `+n;throw en(e),new Error(e)}function Ae(n,e){n||Ee()}function zO(n,e){n||Ee()}function _e(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dn.UNAUTHENTICATED))}shutdown(){}}class BO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qO{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Bn,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Bn)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new JA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new Dn(e)}}class HO{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class GO{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new HO(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KO{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,kt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0);const r=o=>{o.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.R;return this.R=o.token,le("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new ZT(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string"),this.R=t.token,new ZT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=$O(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function je(n,e){return n<e?-1:n>e?1:0}function Au(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function tS(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=-62135596800,ex=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ex);return new Mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<JT)throw new ae(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ex}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-JT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Mt(0,0))}static max(){return new Ce(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="__name__";class Ti{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(),r===void 0?r=e.length-t:r>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Ti.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=Ti.isNumericId(e),s=Ti.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ti.extractNumericId(e).compare(Ti.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wa.fromString(e.substring(4,e.length-2))}}class et extends Ti{construct(e,t,r){return new et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new et(t)}static emptyPath(){return new et([])}}const QO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends Ti{construct(e,t,r){return new Ot(e,t,r)}static isValidIdentifier(e){return QO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tx}static keyField(){return new Ot([tx])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ae(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ae(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ae(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else h==="`"?(u=!u,s++):h!=="."||u?(r+=h,s++):(o(),s++)}if(o(),u)throw new ae(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(et.fromString(e))}static fromName(e){return new ye(et.fromString(e).popFirst(5))}static empty(){return new ye(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;class Dm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function S_(n){return n.fields.find(e=>e.kind===2)}function Oo(n){return n.fields.filter(e=>e.kind!==2)}Dm.UNKNOWN_ID=-1;class dm{constructor(e,t){this.fieldPath=e,this.kind=t}}class qh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qh(0,Rr.min())}}function nS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ce.fromTimestamp(r===1e9?new Mt(t+1,0):new Mt(t,r));return new Rr(s,ye.empty(),e)}function rS(n){return new Rr(n.readTime,n.key,Su)}class Rr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Rr(Ce.min(),ye.empty(),Su)}static max(){return new Rr(Ce.max(),ye.empty(),Su)}}function k0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==iS)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,r)=>{t(e)})}static reject(e){return new G((t,r)=>{r(e)})}static waitFor(e){return new G((t,r)=>{let s=0,o=0,u=!1;e.forEach(h=>{++s,h.next(()=>{++o,u&&o===s&&t()},d=>r(d))}),u=!0,o===s&&t()})}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next(s=>s?G.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new G((r,s)=>{const o=e.length,u=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;t(e[p]).next(y=>{u[p]=y,++h,h===o&&r(u)},y=>s(y))}})}static doWhile(e,t){return new G((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="SimpleDb";class ap{static open(e,t,r,s){try{return new ap(t,e.transaction(s,r))}catch(o){throw new Sh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Bn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Sh(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const s=O0(r.target.error);this.m.reject(new Sh(e,s))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(le(Ir,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new YO(t)}}class Pi{static delete(e){return le(Ir,"Removing database:",e),Mo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!zh())return!1;if(Pi.v())return!0;const e=Ht(),t=Pi.C(e),r=0<t&&t<10,s=aS(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,Pi.C(Ht())===12.2&&en("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(le(Ir,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const u=o.target.result;t(u)},s.onblocked=()=>{r(new Sh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const u=o.target.error;u.name==="VersionError"?r(new ae(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new ae(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new Sh(e,u))},s.onupgradeneeded=o=>{le(Ir,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const u=o.target.result;this.O.B(u,s.transaction,o.oldVersion,this.version).next(()=>{le(Ir,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const o=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.N(e);const h=ap.open(this.db,e,o?"readonly":"readwrite",r),d=s(h).next(p=>(h.S(),p)).catch(p=>(h.abort(p),G.reject(p))).toPromise();return d.catch(()=>{}),await h.p,d}catch(h){const d=h,p=d.name!=="FirebaseError"&&u<3;if(le(Ir,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class WO{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return Mo(this.q.delete())}}class Sh extends ae{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ga(n){return n.name==="IndexedDbTransactionError"}class YO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(le(Ir,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(le(Ir,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mo(r)}add(e){return le(Ir,"ADD",this.store.name,e,e),Mo(this.store.add(e))}get(e){return Mo(this.store.get(e)).next(t=>(t===void 0&&(t=null),le(Ir,"GET",this.store.name,e,t),t))}delete(e){return le(Ir,"DELETE",this.store.name,e),Mo(this.store.delete(e))}count(){return le(Ir,"COUNT",this.store.name),Mo(this.store.count())}G(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new G((u,h)=>{o.onerror=d=>{h(d.target.error)},o.onsuccess=d=>{u(d.target.result)}})}{const o=this.cursor(r),u=[];return this.j(o,(h,d)=>{u.push(d)}).next(()=>u)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new G((s,o)=>{r.onerror=u=>{o(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}J(e,t){le(Ir,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.j(s,(o,u,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.j(s,t)}X(e){const t=this.cursor({});return new G((r,s)=>{t.onerror=o=>{const u=O0(o.target.error);s(u)},t.onsuccess=o=>{const u=o.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}j(e,t){const r=[];return new G((s,o)=>{e.onerror=u=>{o(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void s();const d=new WO(h),p=t(h.primaryKey,h.value,d);if(p instanceof G){const y=p.catch(v=>(d.done(),G.reject(v)));r.push(y)}d.isDone?s():d.U===null?h.continue():h.continue(d.U)}}).next(()=>G.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Mo(n){return new G((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=O0(r.target.error);t(s)}})}let nx=!1;function O0(n){const e=Pi.C(Ht());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nx||(nx=!0,setTimeout(()=>{throw r},0)),r}}return n}const Rh="IndexBackfiller";class XO{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){le(Rh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();le(Rh,`Documents written: ${t}`)}catch(t){Ga(t)?le(Rh,"Ignoring IndexedDB error during index backfill: ",t):await Ha(t)}await this.te(6e4)})}}class ZO{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let s=t,o=!0;return G.doWhile(()=>o===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(u!==null&&!r.has(u))return le(Rh,`Processing collection: ${u}`),this.ie(e,u,s).next(h=>{s-=h,r.add(u)});o=!1})).next(()=>t-s)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(o=>{const u=o.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.se(s,o)).next(h=>(le(Rh,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}se(e,t){let r=e;return t.changes.forEach((s,o)=>{const u=rS(o);k0(u,r)>0&&(r=u)}),new Rr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}fr.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=-1;function md(n){return n==null}function Hh(n){return n===0&&1/n==-1/0}function oS(n){return typeof n=="number"&&Number.isInteger(n)&&!Hh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="";function Yn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rx(e)),e=JO(n.get(t),e);return rx(e)}function JO(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Nm:t+="";break;default:t+=o}}return t}function rx(n){return n+Nm+""}function Ci(n){const e=n.length;if(Ae(e>=2),e===2)return Ae(n.charAt(0)===Nm&&n.charAt(1)===""),et.emptyPath();const t=e-2,r=[];let s="";for(let o=0;o<e;){const u=n.indexOf(Nm,o);switch((u<0||u>t)&&Ee(),n.charAt(u+1)){case"":const h=n.substring(o,u);let d;s.length===0?d=h:(s+=h,d=s,s=""),r.push(d);break;case"":s+=n.substring(o,u),s+="\0";break;case"":s+=n.substring(o,u+1);break;default:Ee()}o=u+2}return new et(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="remoteDocuments",pd="owner",nu="owner",Gh="mutationQueues",eV="userId",ii="mutations",ix="batchId",Fo="userMutationsIndex",sx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(n,e){return[n,Yn(e)]}function lS(n,e,t){return[n,Yn(e),t]}const tV={},Ru="documentMutations",Pm="remoteDocumentsV14",nV=["prefixPath","collectionGroup","readTime","documentId"],mm="documentKeyIndex",rV=["prefixPath","collectionGroup","documentId"],uS="collectionGroupIndex",iV=["collectionGroup","readTime","prefixPath","documentId"],Kh="remoteDocumentGlobal",R_="remoteDocumentGlobalKey",Cu="targets",cS="queryTargetsIndex",sV=["canonicalId","targetId"],Du="targetDocuments",aV=["targetId","path"],V0="documentTargetsIndex",oV=["path","targetId"],km="targetGlobalKey",Go="targetGlobal",$h="collectionParents",lV=["collectionId","parent"],Nu="clientMetadata",uV="clientId",op="bundles",cV="bundleId",lp="namedQueries",hV="name",M0="indexConfiguration",dV="indexId",C_="collectionGroupIndex",fV="collectionGroup",Om="indexState",mV=["indexId","uid"],hS="sequenceNumberIndex",pV=["uid","sequenceNumber"],Vm="indexEntries",gV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dS="documentKeyIndex",yV=["indexId","uid","orderedDocumentKey"],up="documentOverlays",_V=["userId","collectionPath","documentId"],D_="collectionPathOverlayIndex",vV=["userId","collectionPath","largestBatchId"],fS="collectionGroupOverlayIndex",bV=["userId","collectionGroup","largestBatchId"],L0="globals",EV="name",mS=[Gh,ii,Ru,Vo,Cu,pd,Go,Du,Nu,Kh,$h,op,lp],wV=[...mS,up],pS=[Gh,ii,Ru,Pm,Cu,pd,Go,Du,Nu,Kh,$h,op,lp,up],gS=pS,U0=[...gS,M0,Om,Vm],TV=U0,xV=[...U0,L0];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_ extends sS{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function bn(n,e){const t=_e(n);return Pi.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ka(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||jn.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tm(this.root,e,this.comparator,!1)}getReverseIterator(){return new tm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tm(this.root,e,this.comparator,!0)}}class tm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jn{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??jn.RED,this.left=s??jn.EMPTY,this.right=o??jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new jn(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return jn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}jn.EMPTY=null,jn.RED=!0,jn.BLACK=!1;jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,r,s,o){return this}insert(e,t,r){return new jn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ox(this.data.getIterator())}getIteratorFrom(e){return new ox(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class ox{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ru(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new mr([])}unionWith(e){let t=new Et(Ot.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new mr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Au(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _S("Invalid base64 string: "+o):o}}(e);return new Yt(t)}static fromUint8Array(e){const t=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const AV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(n){if(Ae(!!n),typeof n=="string"){let e=0;const t=AV.exec(n);if(Ae(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Es(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="server_timestamp",bS="__type__",ES="__previous_value__",wS="__local_write_time__";function cp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[bS])===null||t===void 0?void 0:t.stringValue)===vS}function hp(n){const e=n.mapValue.fields[ES];return cp(e)?hp(e):e}function Qh(n){const e=bs(n.mapValue.fields[wS].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,t,r,s,o,u,h,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p}}const P_="(default)";class Pa{constructor(e,t){this.projectId=e,this.database=t||P_}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===P_}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="__type__",TS="__max__",_a={mapValue:{fields:{__type__:{stringValue:TS}}}},z0="__vector__",Pu="value",pm={nullValue:"NULL_VALUE"};function ka(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cp(n)?4:xS(n)?9007199254740991:dp(n)?10:11:Ee()}function Mi(n,e){if(n===e)return!0;const t=ka(n);if(t!==ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qh(n).isEqual(Qh(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=bs(s.timestampValue),h=bs(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Es(s.bytesValue).isEqual(Es(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Pt(s.geoPointValue.latitude)===Pt(o.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Pt(s.integerValue)===Pt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=Pt(s.doubleValue),h=Pt(o.doubleValue);return u===h?Hh(u)===Hh(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Au(n.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},h=o.mapValue.fields||{};if(ax(u)!==ax(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!Mi(u[d],h[d])))return!1;return!0}(n,e);default:return Ee()}}function Wh(n,e){return(n.values||[]).find(t=>Mi(t,e))!==void 0}function Oa(n,e){if(n===e)return 0;const t=ka(n),r=ka(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=Pt(o.integerValue||o.doubleValue),d=Pt(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,e);case 3:return lx(n.timestampValue,e.timestampValue);case 4:return lx(Qh(n),Qh(e));case 5:return je(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Es(o),d=Es(u);return h.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),d=u.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=je(h[p],d[p]);if(y!==0)return y}return je(h.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=je(Pt(o.latitude),Pt(u.latitude));return h!==0?h:je(Pt(o.longitude),Pt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ux(n.arrayValue,e.arrayValue);case 10:return function(o,u){var h,d,p,y;const v=o.fields||{},x=u.fields||{},R=(h=v[Pu])===null||h===void 0?void 0:h.arrayValue,N=(d=x[Pu])===null||d===void 0?void 0:d.arrayValue,j=je(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0);return j!==0?j:ux(R,N)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===_a.mapValue&&u===_a.mapValue)return 0;if(o===_a.mapValue)return 1;if(u===_a.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=u.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let v=0;v<d.length&&v<y.length;++v){const x=je(d[v],y[v]);if(x!==0)return x;const R=Oa(h[d[v]],p[y[v]]);if(R!==0)return R}return je(d.length,y.length)}(n.mapValue,e.mapValue);default:throw Ee()}}function lx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);const t=bs(n),r=bs(e),s=je(t.seconds,r.seconds);return s!==0?s:je(t.nanos,r.nanos)}function ux(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Oa(t[s],r[s]);if(o)return o}return je(t.length,r.length)}function ku(n){return k_(n)}function k_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=bs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Es(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=k_(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${k_(t.fields[u])}`;return s+"}"}(n.mapValue):Ee()}function gm(n){switch(ka(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hp(n);return e?16+gm(e):16;case 5:return 2*n.stringValue.length;case 6:return Es(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+gm(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Ka(r.fields,(o,u)=>{s+=o.length+gm(u)}),s}(n.mapValue);default:throw Ee()}}function Wo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function O_(n){return!!n&&"integerValue"in n}function Yh(n){return!!n&&"arrayValue"in n}function cx(n){return!!n&&"nullValue"in n}function hx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ym(n){return!!n&&"mapValue"in n}function dp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[j0])===null||t===void 0?void 0:t.stringValue)===z0}function Ch(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ka(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ch(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ch(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TS}const IS={mapValue:{fields:{[j0]:{stringValue:z0},[Pu]:{arrayValue:{}}}}};function RV(n){return"nullValue"in n?pm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wo(Pa.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?dp(n)?IS:{mapValue:{}}:Ee()}function CV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wo(Pa.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?IS:"mapValue"in n?dp(n)?{mapValue:{}}:_a:Ee()}function dx(n,e){const t=Oa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function fx(n,e){const t=Oa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ym(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ch(t)}setAll(e){let t=Ot.emptyPath(),r={},s=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=h.popLast()}u?r[h.lastSegment()]=Ch(u):s.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());ym(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ym(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ka(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new zn(Ch(this.value))}}function AS(n){const e=[];return Ka(n.fields,(t,r)=>{const s=new Ot([t]);if(ym(r)){const o=AS(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,t,r,s,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Ct(e,0,Ce.min(),Ce.min(),Ce.min(),zn.empty(),0)}static newFoundDocument(e,t,r,s){return new Ct(e,1,t,Ce.min(),r,s,0)}static newNoDocument(e,t){return new Ct(e,2,t,Ce.min(),Ce.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new Ct(e,3,t,Ce.min(),Ce.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,t){this.position=e,this.inclusive=t}}function mx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],u=n.position[s];if(o.field.isKeyField()?r=ye.comparator(ye.fromName(u.referenceValue),t.key):r=Oa(u,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function px(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t="asc"){this.field=e,this.dir=t}}function DV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{}class tt extends SS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new NV(e,t,r):t==="array-contains"?new OV(e,r):t==="in"?new kS(e,r):t==="not-in"?new VV(e,r):t==="array-contains-any"?new MV(e,r):new tt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PV(e,r):new kV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Oa(t,this.value)):t!==null&&ka(this.value)===ka(t)&&this.matchesComparison(Oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bt extends SS{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new bt(e,t)}matches(e){return Ou(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Ou(n){return n.op==="and"}function V_(n){return n.op==="or"}function F0(n){return RS(n)&&Ou(n)}function RS(n){for(const e of n.filters)if(e instanceof bt)return!1;return!0}function M_(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+ku(n.value);if(F0(n))return n.filters.map(e=>M_(e)).join(",");{const e=n.filters.map(t=>M_(t)).join(",");return`${n.op}(${e})`}}function CS(n,e){return n instanceof tt?function(r,s){return s instanceof tt&&r.op===s.op&&r.field.isEqual(s.field)&&Mi(r.value,s.value)}(n,e):n instanceof bt?function(r,s){return s instanceof bt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,h)=>o&&CS(u,s.filters[h]),!0):!1}(n,e):void Ee()}function DS(n,e){const t=n.filters.concat(e);return bt.create(t,n.op)}function NS(n){return n instanceof tt?function(t){return`${t.field.canonicalString()} ${t.op} ${ku(t.value)}`}(n):n instanceof bt?function(t){return t.op.toString()+" {"+t.getFilters().map(NS).join(" ,")+"}"}(n):"Filter"}class NV extends tt{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class PV extends tt{constructor(e,t){super(e,"in",t),this.keys=PS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kV extends tt{constructor(e,t){super(e,"not-in",t),this.keys=PS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function PS(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class OV extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yh(t)&&Wh(t.arrayValue,this.value)}}class kS extends tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wh(this.value.arrayValue,t)}}class VV extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Wh(this.value.arrayValue,t)}}class MV extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,t=null,r=[],s=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=h,this.le=null}}function L_(n,e=null,t=[],r=[],s=null,o=null,u=null){return new LV(n,e,t,r,s,o,u)}function Yo(n){const e=_e(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>M_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ku(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ku(r)).join(",")),e.le=t}return e.le}function gd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!DV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!px(n.startAt,e.startAt)&&px(n.endAt,e.endAt)}function Mm(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Lm(n,e){return n.filters.filter(t=>t instanceof tt&&t.field.isEqual(e))}function gx(n,e,t){let r=pm,s=!0;for(const o of Lm(n,e)){let u=pm,h=!0;switch(o.op){case"<":case"<=":u=RV(o.value);break;case"==":case"in":case">=":u=o.value;break;case">":u=o.value,h=!1;break;case"!=":case"not-in":u=pm}dx({value:r,inclusive:s},{value:u,inclusive:h})<0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];dx({value:r,inclusive:s},{value:u,inclusive:t.inclusive})<0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}function yx(n,e,t){let r=_a,s=!0;for(const o of Lm(n,e)){let u=_a,h=!0;switch(o.op){case">=":case">":u=CV(o.value),h=!1;break;case"==":case"in":case"<=":u=o.value;break;case"<":u=o.value,h=!1;break;case"!=":case"not-in":u=_a}fx({value:r,inclusive:s},{value:u,inclusive:h})>0&&(r=u,s=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const u=t.position[o];fx({value:r,inclusive:s},{value:u,inclusive:t.inclusive})>0&&(r=u,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t=null,r=[],s=[],o=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function OS(n,e,t,r,s,o,u,h){return new Is(n,e,t,r,s,o,u,h)}function Ju(n){return new Is(n)}function _x(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function B0(n){return n.collectionGroup!==null}function _u(n){const e=_e(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Et(Ot.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Xh(o,r))}),t.has(Ot.keyField().canonicalString())||e.he.push(new Xh(Ot.keyField(),r))}return e.he}function or(n){const e=_e(n);return e.Pe||(e.Pe=UV(e,_u(n))),e.Pe}function UV(n,e){if(n.limitType==="F")return L_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Xh(s.field,o)});const t=n.endAt?new Va(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Va(n.startAt.position,n.startAt.inclusive):null;return L_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function U_(n,e){const t=n.filters.concat([e]);return new Is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Um(n,e,t){return new Is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yd(n,e){return gd(or(n),or(e))&&n.limitType===e.limitType}function VS(n){return`${Yo(or(n))}|lt:${n.limitType}`}function hu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>NS(s)).join(", ")}]`),md(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>ku(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>ku(s)).join(",")),`Target(${r})`}(or(n))}; limitType=${n.limitType})`}function _d(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ye.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of _u(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,h,d){const p=mx(u,h,d);return u.inclusive?p<=0:p<0}(r.startAt,_u(r),s)||r.endAt&&!function(u,h,d){const p=mx(u,h,d);return u.inclusive?p>=0:p>0}(r.endAt,_u(r),s))}(n,e)}function MS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LS(n){return(e,t)=>{let r=!1;for(const s of _u(n)){const o=jV(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function jV(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(o,u,h){const d=u.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Oa(d,p):Ee()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return yS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=new Rt(ye.comparator);function pr(){return zV}const US=new Rt(ye.comparator);function Th(...n){let e=US;for(const t of n)e=e.insert(t.key,t);return e}function jS(n){let e=US;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Di(){return Dh()}function zS(){return Dh()}function Dh(){return new As(n=>n.toString(),(n,e)=>n.isEqual(e))}const FV=new Rt(ye.comparator),BV=new Et(ye.comparator);function He(...n){let e=BV;for(const t of n)e=e.add(t);return e}const qV=new Et(je);function q0(){return qV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(e)?"-0":e}}function FS(n){return{integerValue:""+n}}function BS(n,e){return oS(e)?FS(e):H0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this._=void 0}}function HV(n,e,t){return n instanceof Vu?function(s,o){const u={fields:{[bS]:{stringValue:vS},[wS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&cp(o)&&(o=hp(o)),o&&(u.fields[ES]=o),{mapValue:u}}(t,e):n instanceof Xo?HS(n,e):n instanceof Zo?GS(n,e):function(s,o){const u=qS(s,o),h=vx(u)+vx(s.Ie);return O_(u)&&O_(s.Ie)?FS(h):H0(s.serializer,h)}(n,e)}function GV(n,e,t){return n instanceof Xo?HS(n,e):n instanceof Zo?GS(n,e):t}function qS(n,e){return n instanceof Mu?function(r){return O_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Vu extends fp{}class Xo extends fp{constructor(e){super(),this.elements=e}}function HS(n,e){const t=KS(e);for(const r of n.elements)t.some(s=>Mi(s,r))||t.push(r);return{arrayValue:{values:t}}}class Zo extends fp{constructor(e){super(),this.elements=e}}function GS(n,e){let t=KS(e);for(const r of n.elements)t=t.filter(s=>!Mi(s,r));return{arrayValue:{values:t}}}class Mu extends fp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function vx(n){return Pt(n.integerValue||n.doubleValue)}function KS(n){return Yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t){this.field=e,this.transform=t}}function KV(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Xo&&s instanceof Xo||r instanceof Zo&&s instanceof Zo?Au(r.elements,s.elements,Mi):r instanceof Mu&&s instanceof Mu?Mi(r.Ie,s.Ie):r instanceof Vu&&s instanceof Vu}(n.transform,e.transform)}class $V{constructor(e,t){this.version=e,this.transformResults=t}}class Vt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vt}static exists(e){return new Vt(void 0,e)}static updateTime(e){return new Vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _m(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class mp{}function $S(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tc(n.key,Vt.none()):new ec(n.key,n.data,Vt.none());{const t=n.data,r=zn.empty();let s=new Et(Ot.comparator);for(let o of e.fields)if(!s.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Ss(n.key,r,new mr(s.toArray()),Vt.none())}}function QV(n,e,t){n instanceof ec?function(s,o,u){const h=s.value.clone(),d=Ex(s.fieldTransforms,o,u.transformResults);h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Ss?function(s,o,u){if(!_m(s.precondition,o))return void o.convertToUnknownDocument(u.version);const h=Ex(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(QS(s)),d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Nh(n,e,t,r){return n instanceof ec?function(o,u,h,d){if(!_m(o.precondition,u))return h;const p=o.value.clone(),y=wx(o.fieldTransforms,d,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ss?function(o,u,h,d){if(!_m(o.precondition,u))return h;const p=wx(o.fieldTransforms,d,u),y=u.data;return y.setAll(QS(o)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,u,h){return _m(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function WV(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=qS(r.transform,s||null);o!=null&&(t===null&&(t=zn.empty()),t.set(r.field,o))}return t||null}function bx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Au(r,s,(o,u)=>KV(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ec extends mp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ss extends mp{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function QS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ex(n,e,t){const r=new Map;Ae(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],u=o.transform,h=e.data.field(o.field);r.set(o.field,GV(u,h,t[s]))}return r}function wx(n,e,t){const r=new Map;for(const s of n){const o=s.transform,u=t.data.field(s.field);r.set(s.field,HV(o,u,e))}return r}class tc extends mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G0 extends mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&QV(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Nh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=zS();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(s.key)?null:h;const d=$S(u,h);d!==null&&r.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),He())}isEqual(e){return this.batchId===e.batchId&&Au(this.mutations,e.mutations,(t,r)=>bx(t,r))&&Au(this.baseMutations,e.baseMutations,(t,r)=>bx(t,r))}}class $0{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ae(e.mutations.length===r.length);let s=function(){return FV}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new $0(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,ct;function WS(n){switch(n){case Y.OK:return Ee();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Ee()}}function YS(n){if(n===void 0)return en("GRPC error has no .code"),Y.UNKNOWN;switch(n){case ln.OK:return Y.OK;case ln.CANCELLED:return Y.CANCELLED;case ln.UNKNOWN:return Y.UNKNOWN;case ln.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case ln.INTERNAL:return Y.INTERNAL;case ln.UNAVAILABLE:return Y.UNAVAILABLE;case ln.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case ln.NOT_FOUND:return Y.NOT_FOUND;case ln.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case ln.ABORTED:return Y.ABORTED;case ln.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case ln.DATA_LOSS:return Y.DATA_LOSS;default:return Ee()}}(ct=ln||(ln={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=new wa([4294967295,4294967295],0);function Tx(n){const e=XS().encode(n),t=new $A;return t.update(e),new Uint8Array(t.digest())}function xx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wa([t,r],0),new wa([s,o],0)]}class W0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new xh(`Invalid padding: ${t}`);if(r<0)throw new xh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new xh(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=wa.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(wa.fromNumber(r)));return s.compare(XV)===1&&(s=new wa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Tx(e),[r,s]=xx(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,s,o);if(!this.Re(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new W0(o,s,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ee===0)return;const t=Tx(e),[r,s]=xx(t);for(let o=0;o<this.hashCount;o++){const u=this.Ae(r,s,o);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class xh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ed.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bd(Ce.min(),s,new Rt(je),pr(),He())}}class Ed{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ed(r,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class ZS{constructor(e,t){this.targetId=e,this.ge=t}}class JS{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Ix{constructor(){this.pe=0,this.ye=Ax(),this.we=Yt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=He(),t=He(),r=He();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ee()}}),new Ed(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=Ax()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ae(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class ZV{constructor(e){this.ke=e,this.qe=new Map,this.Qe=pr(),this.$e=nm(),this.Ke=nm(),this.Ue=new Rt(je)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Mm(o))if(r===0){const u=new ye(o.path);this.ze(t,u,Ct.newNoDocument(u,Ce.min()))}else Ae(r===1);else{const u=this.et(t);if(u!==r){const h=this.tt(e),d=h?this.nt(h,e,u):1;if(d!==0){this.Ye(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,p)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let u,h;try{u=Es(r).toUint8Array()}catch(d){if(d instanceof _S)return Vi("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new W0(u,s,o)}catch(d){return Vi(d instanceof xh?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ee===0?null:h}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const u=this.ke.it(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,u)=>{const h=this.Xe(u);if(h){if(o.current&&Mm(h.target)){const d=new ye(h.target.path);this._t(d).has(u)||this.ut(u,d)||this.ze(u,d,Ct.newNoDocument(d,e))}o.ve&&(t.set(u,o.Fe()),o.Me())}});let r=He();this.Ke.forEach((o,u)=>{let h=!0;u.forEachWhile(d=>{const p=this.Xe(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.Qe.forEach((o,u)=>u.setReadTime(e));const s=new bd(e,t,this.Ue,this.Qe,r);return this.Qe=pr(),this.$e=nm(),this.Ke=nm(),this.Ue=new Rt(je),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Ix,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Et(je),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Et(je),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Ix),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function nm(){return new Rt(ye.comparator)}function Ax(){return new Rt(ye.comparator)}const JV={asc:"ASCENDING",desc:"DESCENDING"},e4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t4={and:"AND",or:"OR"};class n4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function j_(n,e){return n.useProto3Json||md(e)?e:{value:e}}function Lu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function r4(n,e){return Lu(n,e.toTimestamp())}function tn(n){return Ae(!!n),Ce.fromTimestamp(function(t){const r=bs(t);return new Mt(r.seconds,r.nanos)}(n))}function Y0(n,e){return z_(n,e).canonicalString()}function z_(n,e){const t=function(s){return new et(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function t1(n){const e=et.fromString(n);return Ae(h1(e)),e}function Zh(n,e){return Y0(n.databaseId,e.path)}function ki(n,e){const t=t1(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(i1(t))}function n1(n,e){return Y0(n.databaseId,e)}function r1(n){const e=t1(n);return e.length===4?et.emptyPath():i1(e)}function F_(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function i1(n){return Ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Sx(n,e,t){return{name:Zh(n,e),fields:t.value.mapValue.fields}}function s1(n,e,t){const r=ki(n,e.name),s=tn(e.updateTime),o=e.createTime?tn(e.createTime):Ce.min(),u=new zn({mapValue:{fields:e.fields}}),h=Ct.newFoundDocument(r,s,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function i4(n,e){return"found"in e?function(r,s){Ae(!!s.found),s.found.name,s.found.updateTime;const o=ki(r,s.found.name),u=tn(s.found.updateTime),h=s.found.createTime?tn(s.found.createTime):Ce.min(),d=new zn({mapValue:{fields:s.found.fields}});return Ct.newFoundDocument(o,u,h,d)}(n,e):"missing"in e?function(r,s){Ae(!!s.missing),Ae(!!s.readTime);const o=ki(r,s.missing),u=tn(s.readTime);return Ct.newNoDocument(o,u)}(n,e):Ee()}function s4(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(Ae(y===void 0||typeof y=="string"),Yt.fromBase64String(y||"")):(Ae(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Yt.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=p.code===void 0?Y.UNKNOWN:YS(p.code);return new ae(y,p.message||"")}(u);t=new JS(r,s,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ki(n,r.document.name),o=tn(r.document.updateTime),u=r.document.createTime?tn(r.document.createTime):Ce.min(),h=new zn({mapValue:{fields:r.document.fields}}),d=Ct.newFoundDocument(s,o,u,h),p=r.targetIds||[],y=r.removedTargetIds||[];t=new vm(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ki(n,r.document),o=r.readTime?tn(r.readTime):Ce.min(),u=Ct.newNoDocument(s,o),h=r.removedTargetIds||[];t=new vm([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ki(n,r.document),o=r.removedTargetIds||[];t=new vm([],o,s,null)}else{if(!("filter"in e))return Ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new YV(s,o),h=r.targetId;t=new ZS(h,u)}}return t}function Jh(n,e){let t;if(e instanceof ec)t={update:Sx(n,e.key,e.value)};else if(e instanceof tc)t={delete:Zh(n,e.key)};else if(e instanceof Ss)t={update:Sx(n,e.key,e.data),updateMask:h4(e.fieldMask)};else{if(!(e instanceof G0))return Ee();t={verify:Zh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof Vu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Xo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Zo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Mu)return{fieldPath:u.field.canonicalString(),increment:h.Ie};throw Ee()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:r4(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ee()}(n,e.precondition)),t}function B_(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?Vt.updateTime(tn(o.updateTime)):o.exists!==void 0?Vt.exists(o.exists):Vt.none()}(e.currentDocument):Vt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,h){let d=null;if("setToServerValue"in h)Ae(h.setToServerValue==="REQUEST_TIME"),d=new Vu;else if("appendMissingElements"in h){const y=h.appendMissingElements.values||[];d=new Xo(y)}else if("removeAllFromArray"in h){const y=h.removeAllFromArray.values||[];d=new Zo(y)}else"increment"in h?d=new Mu(u,h.increment):Ee();const p=Ot.fromServerFormat(h.fieldPath);return new vd(p,d)}(n,s)):[];if(e.update){e.update.name;const s=ki(n,e.update.name),o=new zn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=function(d){const p=d.fieldPaths||[];return new mr(p.map(y=>Ot.fromServerFormat(y)))}(e.updateMask);return new Ss(s,o,u,t,r)}return new ec(s,o,t,r)}if(e.delete){const s=ki(n,e.delete);return new tc(s,t)}if(e.verify){const s=ki(n,e.verify);return new G0(s,t)}return Ee()}function a4(n,e){return n&&n.length>0?(Ae(e!==void 0),n.map(t=>function(s,o){let u=s.updateTime?tn(s.updateTime):tn(o);return u.isEqual(Ce.min())&&(u=tn(o)),new $V(u,s.transformResults||[])}(t,e))):[]}function a1(n,e){return{documents:[n1(n,e.path)]}}function o1(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=n1(n,s);const o=function(p){if(p.length!==0)return c1(bt.create(p,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(p){if(p.length!==0)return p.map(y=>function(x){return{field:du(x.field),direction:l4(x.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=j_(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:t,parent:s}}function l1(n){let e=r1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ae(r===1);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(v){const x=u1(v);return x instanceof bt&&F0(x)?x.getFilters():[x]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(x=>function(N){return new Xh(fu(N.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(x))}(t.orderBy));let h=null;t.limit&&(h=function(v){let x;return x=typeof v=="object"?v.value:v,md(x)?null:x}(t.limit));let d=null;t.startAt&&(d=function(v){const x=!!v.before,R=v.values||[];return new Va(R,x)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const x=!v.before,R=v.values||[];return new Va(R,x)}(t.endAt)),OS(e,s,u,o,h,"F",d,p)}function o4(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function u1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fu(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=fu(t.unaryFilter.field);return tt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=fu(t.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fu(t.unaryFilter.field);return tt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(n):n.fieldFilter!==void 0?function(t){return tt.create(fu(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return bt.create(t.compositeFilter.filters.map(r=>u1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(n):Ee()}function l4(n){return JV[n]}function u4(n){return e4[n]}function c4(n){return t4[n]}function du(n){return{fieldPath:n.canonicalString()}}function fu(n){return Ot.fromServerFormat(n.fieldPath)}function c1(n){return n instanceof tt?function(t){if(t.op==="=="){if(hx(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NAN"}};if(cx(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hx(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NOT_NAN"}};if(cx(t.value))return{unaryFilter:{field:du(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:du(t.field),op:u4(t.op),value:t.value}}}(n):n instanceof bt?function(t){const r=t.getFilters().map(s=>c1(s));return r.length===1?r[0]:{compositeFilter:{op:c4(t.op),filters:r}}}(n):Ee()}function h4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function h1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t,r,s,o=Ce.min(),u=Ce.min(),h=Yt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.Tt=e}}function d4(n,e){let t;if(e.document)t=s1(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),s=el(e.noDocument.readTime);t=Ct.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee();{const r=ye.fromSegments(e.unknownDocument.path),s=el(e.unknownDocument.version);t=Ct.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(s){const o=new Mt(s[0],s[1]);return Ce.fromTimestamp(o)}(e.readTime)),t}function Rx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,u){return{name:Zh(o,u.key),fields:u.data.value.mapValue.fields,updateTime:Lu(o,u.version.toTimestamp()),createTime:Lu(o,u.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jo(e.version)};else{if(!e.isUnknownDocument())return Ee();r.unknownDocument={path:t.path.toArray(),version:Jo(e.version)}}return r}function jm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function el(n){const e=new Mt(n.seconds,n.nanoseconds);return Ce.fromTimestamp(e)}function Lo(n,e){const t=(e.baseMutations||[]).map(o=>B_(n.Tt,o));for(let o=0;o<e.mutations.length-1;++o){const u=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];u.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>B_(n.Tt,o)),s=Mt.fromMillis(e.localWriteTimeMs);return new K0(e.batchId,s,t,r)}function Ih(n){const e=el(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?el(n.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Ae(o.documents.length===1),or(Ju(r1(o.documents[0])))}(n.query):function(o){return or(l1(o))}(n.query),new ds(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Yt.fromBase64String(n.resumeToken))}function f1(n,e){const t=Jo(e.snapshotVersion),r=Jo(e.lastLimboFreeSnapshotVersion);let s;s=Mm(e.target)?a1(n.Tt,e.target):o1(n.Tt,e.target).ht;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yo(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function X0(n){const e=l1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Um(e,e.limit,"L"):e}function t_(n,e){return new Q0(e.largestBatchId,B_(n.Tt,e.overlayMutation))}function Cx(n,e){const t=e.path.lastSegment();return[n,Yn(e.path.popLast()),t]}function Dx(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Jo(r.readTime),documentKey:Yn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{getBundleMetadata(e,t){return Nx(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:el(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return Nx(e).put(function(s){return{bundleId:s.id,createTime:Jo(tn(s.createTime)),version:s.version}}(t))}getNamedQuery(e,t){return Px(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:X0(o.bundledQuery),readTime:el(o.readTime)}}(r)})}saveNamedQuery(e,t){return Px(e).put(function(s){return{name:s.name,readTime:Jo(tn(s.readTime)),bundledQuery:s.bundledQuery}}(t))}}function Nx(n){return bn(n,op)}function Px(n){return bn(n,lp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new pp(e,r)}getOverlay(e,t){return dh(e).get(Cx(this.userId,t)).next(r=>r?t_(this.serializer,r):null)}getOverlays(e,t){const r=Di();return G.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((o,u)=>{const h=new Q0(t,u);s.push(this.Et(e,h))}),G.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(u=>s.add(Yn(u.getCollectionPath())));const o=[];return s.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);o.push(dh(e).J(D_,h))}),G.waitFor(o)}getOverlaysForCollection(e,t,r){const s=Di(),o=Yn(t),u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return dh(e).G(D_,u).next(h=>{for(const d of h){const p=t_(this.serializer,d);s.set(p.getKey(),p)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const o=Di();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dh(e).Z({index:fS,range:h},(d,p,y)=>{const v=t_(this.serializer,p);o.size()<s||v.largestBatchId===u?(o.set(v.getKey(),v),u=v.largestBatchId):y.done()}).next(()=>o)}Et(e,t){return dh(e).put(function(s,o,u){const[h,d,p]=Cx(o,u.mutation.key);return{userId:o,collectionPath:d,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Jh(s.Tt,u.mutation)}}(this.serializer,this.userId,t))}}function dh(n){return bn(n,up)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{dt(e){return bn(e,L0)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Yt.fromUint8Array(r):Yt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Pt(e.integerValue));else if("doubleValue"in e){const r=Pt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),Hh(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=bs(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(Es(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?xS(e)?this.ft(t,Number.MAX_SAFE_INTEGER):dp(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):Ee()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const s of Object.keys(r))this.wt(s,t),this.Rt(r[s],t)}vt(e,t){var r,s;const o=e.fields||{};this.ft(t,53);const u=Pu,h=((s=(r=o[u].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.ft(t,15),t.gt(Pt(h)),this.wt(u,t),this.Rt(o[u],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const s of r)this.Rt(s,t)}Dt(e,t){this.ft(t,37),ye.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}Uo.xt=new Uo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=255;function p4(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function kx(n){const e=64-function(r){let s=0;for(let o=0;o<8;++o){const u=p4(255&r[o]);if(s+=u,u!==8)break}return s}(n);return Math.ceil(e/8)}class g4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const s=t.codePointAt(0);this.Nt(240|s>>>18),this.Nt(128|63&s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const s=t.codePointAt(0);this.kt(240|s>>>18),this.kt(128|63&s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s)}}this.qt()}Kt(e){const t=this.Ut(e),r=kx(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Gt(e){const t=this.Ut(e),r=kx(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}zt(){this.jt(iu),this.jt(255)}Ht(){this.Jt(iu),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===iu?(this.jt(iu),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===iu?(this.Jt(iu),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class y4{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class _4{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class fh{constructor(){this.Zt=new g4,this.Xt=new y4(this.Zt),this.en=new _4(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new jo(this.indexId,this.documentKey,this.arrayValue,r)}}function ha(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Ox(n.arrayValue,e.arrayValue),t!==0?t:(t=Ox(n.directionalValue,e.directionalValue),t!==0?t:ye.comparator(n.documentKey,e.documentKey)))}function Ox(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.rn=new Et((t,r)=>Ot.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(Ae(e.collectionGroup===this.collectionId),this.an)return!1;const t=S_(e);if(t!==void 0&&!this.cn(t))return!1;const r=Oo(e);let s=new Set,o=0,u=0;for(;o<r.length&&this.cn(r[o]);++o)s=s.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.rn.size>0){const h=this.rn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const d=r[o];if(!this.ln(h,d)||!this.hn(this.sn[u++],d))return!1}++o}for(;o<r.length;++o){const h=r[o];if(u>=this.sn.length||!this.hn(this.sn[u++],h))return!1}return!0}Pn(){if(this.an)return null;let e=new Et(Ot.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new dm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new dm(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new dm(r.field,r.dir==="asc"?0:1)));return new Dm(Dm.UNKNOWN_ID,this.collectionId,t,qh.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(n){var e,t;if(Ae(n instanceof tt||n instanceof bt),n instanceof tt){if(n instanceof kS){const s=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>tt.create(n.field,"==",o)))||[];return bt.create(s,"or")}return n}const r=n.filters.map(s=>m1(s));return bt.create(r,n.op)}function v4(n){if(n.getFilters().length===0)return[];const e=G_(m1(n));return Ae(p1(e)),q_(e)||H_(e)?[e]:e.getFilters()}function q_(n){return n instanceof tt}function H_(n){return n instanceof bt&&F0(n)}function p1(n){return q_(n)||H_(n)||function(t){if(t instanceof bt&&V_(t)){for(const r of t.getFilters())if(!q_(r)&&!H_(r))return!1;return!0}return!1}(n)}function G_(n){if(Ae(n instanceof tt||n instanceof bt),n instanceof tt)return n;if(n.filters.length===1)return G_(n.filters[0]);const e=n.filters.map(r=>G_(r));let t=bt.create(e,n.op);return t=zm(t),p1(t)?t:(Ae(t instanceof bt),Ae(Ou(t)),Ae(t.filters.length>1),t.filters.reduce((r,s)=>Z0(r,s)))}function Z0(n,e){let t;return Ae(n instanceof tt||n instanceof bt),Ae(e instanceof tt||e instanceof bt),t=n instanceof tt?e instanceof tt?function(s,o){return bt.create([s,o],"and")}(n,e):Mx(n,e):e instanceof tt?Mx(e,n):function(s,o){if(Ae(s.filters.length>0&&o.filters.length>0),Ou(s)&&Ou(o))return DS(s,o.getFilters());const u=V_(s)?s:o,h=V_(s)?o:s,d=u.filters.map(p=>Z0(p,h));return bt.create(d,"or")}(n,e),zm(t)}function Mx(n,e){if(Ou(e))return DS(e,n.getFilters());{const t=e.filters.map(r=>Z0(n,r));return bt.create(t,"or")}}function zm(n){if(Ae(n instanceof tt||n instanceof bt),n instanceof tt)return n;const e=n.getFilters();if(e.length===1)return zm(e[0]);if(RS(n))return n;const t=e.map(s=>zm(s)),r=[];return t.forEach(s=>{s instanceof tt?r.push(s):s instanceof bt&&(s.op===n.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:bt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.Tn=new J0}addToCollectionParentIndex(e,t){return this.Tn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Rr.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class J0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Et(et.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="IndexedDbIndexManager",rm=new Uint8Array(0);class E4{constructor(e,t){this.databaseId=t,this.In=new J0,this.En=new As(r=>Yo(r),(r,s)=>gd(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const o={collectionId:r,parent:Yn(s)};return Ux(e).put(o)}return G.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[tS(t),""],!1,!0);return Ux(e).G(s).next(o=>{for(const u of o){if(u.collectionId!==t)break;r.push(Ci(u.parent))}return r})}addFieldIndex(e,t){const r=mh(e),s=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete s.indexId;const o=r.add(s);if(t.indexState){const u=au(e);return o.next(h=>{u.put(Dx(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=mh(e),s=au(e),o=su(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=mh(e),r=su(e),s=au(e);return t.J().next(()=>r.J()).next(()=>s.J())}createTargetIndexes(e,t){return G.forEach(this.dn(t),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const o=new Vx(r).Pn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=su(e);let s=!0;const o=new Map;return G.forEach(this.dn(t),u=>this.An(e,u).next(h=>{s&&(s=!!h),o.set(u,h)})).next(()=>{if(s){let u=He();const h=[];return G.forEach(o,(d,p)=>{le(Lx,`Using index ${function(K){return`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map(ue=>`${ue.fieldPath}:${ue.kind}`).join(",")}`}(d)} to execute ${Yo(t)}`);const y=function(K,ue){const ie=S_(ue);if(ie===void 0)return null;for(const J of Lm(K,ie.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null}(p,d),v=function(K,ue){const ie=new Map;for(const J of Oo(ue))for(const O of Lm(K,J.fieldPath))switch(O.op){case"==":case"in":ie.set(J.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return ie.set(J.fieldPath.canonicalString(),O.value),Array.from(ie.values())}return null}(p,d),x=function(K,ue){const ie=[];let J=!0;for(const O of Oo(ue)){const T=O.kind===0?gx(K,O.fieldPath,K.startAt):yx(K,O.fieldPath,K.startAt);ie.push(T.value),J&&(J=T.inclusive)}return new Va(ie,J)}(p,d),R=function(K,ue){const ie=[];let J=!0;for(const O of Oo(ue)){const T=O.kind===0?yx(K,O.fieldPath,K.endAt):gx(K,O.fieldPath,K.endAt);ie.push(T.value),J&&(J=T.inclusive)}return new Va(ie,J)}(p,d),N=this.Rn(d,p,x),j=this.Rn(d,p,R),U=this.Vn(d,p,v),B=this.mn(d.indexId,y,N,x.inclusive,j,R.inclusive,U);return G.forEach(B,te=>r.H(te,t.limit).next(K=>{K.forEach(ue=>{const ie=ye.fromSegments(ue.documentKey);u.has(ie)||(u=u.add(ie),h.push(ie))})}))}).next(()=>h)}return G.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=v4(bt.create(e.filters,"and")).map(r=>L_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,s,o,u,h){const d=(t!=null?t.length:1)*Math.max(r.length,o.length),p=d/(t!=null?t.length:1),y=[];for(let v=0;v<d;++v){const x=t?this.fn(t[v/p]):rm,R=this.gn(e,x,r[v%p],s),N=this.pn(e,x,o[v%p],u),j=h.map(U=>this.gn(e,x,U,!0));y.push(...this.createRange(R,N,j))}return y}gn(e,t,r,s){const o=new jo(e,ye.empty(),t,r);return s?o:o.nn()}pn(e,t,r,s){const o=new jo(e,ye.empty(),t,r);return s?o.nn():o}An(e,t){const r=new Vx(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(o=>{let u=null;for(const h of o)r.un(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;const s=this.dn(t);return G.forEach(s,o=>this.An(e,o).next(u=>{u?r!==0&&u.fields.length<function(d){let p=new Et(Ot.comparator),y=!1;for(const v of d.filters)for(const x of v.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?y=!0:p=p.add(x.field));for(const v of d.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>function(u){return u.limit!==null}(t)&&s.length>1&&r===2?1:r)}yn(e,t){const r=new fh;for(const s of Oo(e)){const o=t.data.field(s.fieldPath);if(o==null)return null;const u=r.tn(s.kind);Uo.xt.At(o,u)}return r.Yt()}fn(e){const t=new fh;return Uo.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new fh;return Uo.xt.At(Wo(this.databaseId,t),r.tn(function(o){const u=Oo(o);return u.length===0?0:u[u.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let s=[];s.push(new fh);let o=0;for(const u of Oo(e)){const h=r[o++];for(const d of s)if(this.bn(t,u.fieldPath)&&Yh(h))s=this.Sn(s,u,h);else{const p=d.tn(u.kind);Uo.xt.At(h,p)}}return this.Dn(s)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}Sn(e,t,r){const s=[...e],o=[];for(const u of r.arrayValue.values||[])for(const h of s){const d=new fh;d.seed(h.Yt()),Uo.xt.At(u,d.tn(t.kind)),o.push(d)}return o}bn(e,t){return!!e.filters.find(r=>r instanceof tt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=mh(e),s=au(e);return(t?r.G(C_,IDBKeyRange.bound(t,t)):r.G()).next(o=>{const u=[];return G.forEach(o,h=>s.get([h.indexId,this.uid]).next(d=>{u.push(function(y,v){const x=v?new qh(v.sequenceNumber,new Rr(el(v.readTime),new ye(Ci(v.documentKey)),v.largestBatchId)):qh.empty(),R=y.fields.map(([N,j])=>new dm(Ot.fromServerFormat(N),j));return new Dm(y.indexId,y.collectionGroup,R,x)}(h,d))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,s)=>{const o=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return o!==0?o:je(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=mh(e),o=au(e);return this.vn(e).next(u=>s.G(C_,IDBKeyRange.bound(t,t)).next(h=>G.forEach(h,d=>o.put(Dx(d.indexId,this.uid,u,r)))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,(s,o)=>{const u=r.get(s.collectionGroup);return(u?G.resolve(u):this.getFieldIndexes(e,s.collectionGroup)).next(h=>(r.set(s.collectionGroup,h),G.forEach(h,d=>this.Cn(e,s,d).next(p=>{const y=this.Fn(o,d);return p.isEqual(y)?G.resolve():this.Mn(e,o,d,p,y)}))))})}xn(e,t,r,s){return su(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,s){return su(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const s=su(e);let o=new Et(ha);return s.Z({index:dS,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(u,h)=>{o=o.add(new jo(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}Fn(e,t){let r=new Et(ha);const s=this.yn(t,e);if(s==null)return r;const o=S_(t);if(o!=null){const u=e.data.field(o.fieldPath);if(Yh(u))for(const h of u.arrayValue.values||[])r=r.add(new jo(t.indexId,e.key,this.fn(h),s))}else r=r.add(new jo(t.indexId,e.key,rm,s));return r}Mn(e,t,r,s,o){le(Lx,"Updating index entries for document '%s'",t.key);const u=[];return function(d,p,y,v,x){const R=d.getIterator(),N=p.getIterator();let j=ru(R),U=ru(N);for(;j||U;){let B=!1,te=!1;if(j&&U){const K=y(j,U);K<0?te=!0:K>0&&(B=!0)}else j!=null?te=!0:B=!0;B?(v(U),U=ru(N)):te?(x(j),j=ru(R)):(j=ru(R),U=ru(N))}}(s,o,ha,h=>{u.push(this.xn(e,t,r,h))},h=>{u.push(this.On(e,t,r,h))}),G.waitFor(u)}vn(e){let t=1;return au(e).Z({index:hS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,o)=>{o.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>ha(u,h)).filter((u,h,d)=>!h||ha(u,d[h-1])!==0);const s=[];s.push(e);for(const u of r){const h=ha(u,e),d=ha(u,t);if(h===0)s[0]=e.nn();else if(h>0&&d<0)s.push(u),s.push(u.nn());else if(d>0)break}s.push(t);const o=[];for(let u=0;u<s.length;u+=2){if(this.Nn(s[u],s[u+1]))return[];const h=[s[u].indexId,this.uid,s[u].arrayValue,s[u].directionalValue,rm,[]],d=[s[u+1].indexId,this.uid,s[u+1].arrayValue,s[u+1].directionalValue,rm,[]];o.push(IDBKeyRange.bound(h,d))}return o}Nn(e,t){return ha(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jx)}getMinOffset(e,t){return G.mapArray(this.dn(t),r=>this.An(e,r).next(s=>s||Ee())).next(jx)}}function Ux(n){return bn(n,$h)}function su(n){return bn(n,Vm)}function mh(n){return bn(n,M0)}function au(n){return bn(n,Om)}function jx(n){Ae(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;k0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Rr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},g1=41943040;class Wn{static withCacheSize(e){return new Wn(e,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(n,e,t){const r=n.store(ii),s=n.store(Ru),o=[],u=IDBKeyRange.only(t.batchId);let h=0;const d=r.Z({range:u},(y,v,x)=>(h++,x.delete()));o.push(d.next(()=>{Ae(h===1)}));const p=[];for(const y of t.mutations){const v=lS(e,y.key.path,t.batchId);o.push(s.delete(v)),p.push(y.key)}return G.waitFor(o).next(()=>p)}function Fm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ee();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(g1,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);class gp{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Bn={}}static It(e,t,r,s){Ae(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new gp(o,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return da(e).Z({index:Fo,range:r},(s,o,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const o=mu(e),u=da(e);return u.add({}).next(h=>{Ae(typeof h=="number");const d=new K0(h,t,r,s),p=function(R,N,j){const U=j.baseMutations.map(te=>Jh(R.Tt,te)),B=j.mutations.map(te=>Jh(R.Tt,te));return{userId:N,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:U,mutations:B}}(this.serializer,this.userId,d),y=[];let v=new Et((x,R)=>je(x.canonicalString(),R.canonicalString()));for(const x of s){const R=lS(this.userId,x.key.path,h);v=v.add(x.key.path.popLast()),y.push(u.put(p)),y.push(o.put(R,tV))}return v.forEach(x=>{y.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.Bn[h]=d.keys()}),G.waitFor(y).next(()=>d)})}lookupMutationBatch(e,t){return da(e).get(t).next(r=>r?(Ae(r.userId===this.userId),Lo(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?G.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Bn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return da(e).Z({index:Fo,range:s},(u,h,d)=>{h.userId===this.userId&&(Ae(h.batchId>=r),o=Lo(this.serializer,h)),d.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ta;return da(e).Z({index:Fo,range:t,reverse:!0},(s,o,u)=>{r=o.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ta],[this.userId,Number.POSITIVE_INFINITY]);return da(e).G(Fo,t).next(r=>r.map(s=>Lo(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=fm(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=[];return mu(e).Z({range:s},(u,h,d)=>{const[p,y,v]=u,x=Ci(y);if(p===this.userId&&t.path.isEqual(x))return da(e).get(v).next(R=>{if(!R)throw Ee();Ae(R.userId===this.userId),o.push(Lo(this.serializer,R))});d.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Et(je);const s=[];return t.forEach(o=>{const u=fm(this.userId,o.path),h=IDBKeyRange.lowerBound(u),d=mu(e).Z({range:h},(p,y,v)=>{const[x,R,N]=p,j=Ci(R);x===this.userId&&o.path.isEqual(j)?r=r.add(N):v.done()});s.push(d)}),G.waitFor(s).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,o=fm(this.userId,r),u=IDBKeyRange.lowerBound(o);let h=new Et(je);return mu(e).Z({range:u},(d,p,y)=>{const[v,x,R]=d,N=Ci(x);v===this.userId&&r.isPrefixOf(N)?N.length===s&&(h=h.add(R)):y.done()}).next(()=>this.kn(e,h))}kn(e,t){const r=[],s=[];return t.forEach(o=>{s.push(da(e).get(o).next(u=>{if(u===null)throw Ee();Ae(u.userId===this.userId),r.push(Lo(this.serializer,u))}))}),G.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return y1(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),G.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound(function(u){return[u]}(this.userId)),s=[];return mu(e).Z({range:r},(o,u,h)=>{if(o[0]===this.userId){const d=Ci(o[1]);s.push(d)}else h.done()}).next(()=>{Ae(s.length===0)})})}containsKey(e,t){return _1(e,this.userId,t)}Qn(e){return v1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ta,lastStreamToken:""})}}function _1(n,e,t){const r=fm(e,t.path),s=r[1],o=IDBKeyRange.lowerBound(r);let u=!1;return mu(n).Z({range:o,Y:!0},(h,d,p)=>{const[y,v,x]=h;y===e&&v===s&&(u=!0),p.done()}).next(()=>u)}function da(n){return bn(n,ii)}function mu(n){return bn(n,Ru)}function v1(n){return bn(n,Gh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new tl(0)}static Un(){return new tl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new tl(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Ce.fromTimestamp(new Mt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Gn(e,s)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ou(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let s=0;const o=[];return ou(e).Z((u,h)=>{const d=Ih(h);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,o.push(this.removeTargetData(e,d)))}).next(()=>G.waitFor(o)).next(()=>s)}forEachTarget(e,t){return ou(e).Z((r,s)=>{const o=Ih(s);t(o)})}Wn(e){return Fx(e).get(km).next(t=>(Ae(t!==null),t))}Gn(e,t){return Fx(e).put(km,t)}zn(e,t){return ou(e).put(f1(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return ou(e).Z({range:s,index:cS},(u,h,d)=>{const p=Ih(h);gd(t,p.target)&&(o=p,d.done())}).next(()=>o)}addMatchingKeys(e,t,r){const s=[],o=ya(e);return t.forEach(u=>{const h=Yn(u.path);s.push(o.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,u))}),G.waitFor(s)}removeMatchingKeys(e,t,r){const s=ya(e);return G.forEach(t,o=>{const u=Yn(o.path);return G.waitFor([s.delete([r,u]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=ya(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ya(e);let o=He();return s.Z({range:r,Y:!0},(u,h,d)=>{const p=Ci(u[1]),y=new ye(p);o=o.add(y)}).next(()=>o)}containsKey(e,t){const r=Yn(t.path),s=IDBKeyRange.bound([r],[tS(r)],!1,!0);let o=0;return ya(e).Z({index:V0,Y:!0,range:s},([u,h],d,p)=>{u!==0&&(o++,p.done())}).next(()=>o>0)}lt(e,t){return ou(e).get(t).next(r=>r?Ih(r):null)}}function ou(n){return bn(n,Cu)}function Fx(n){return bn(n,Go)}function ya(n){return bn(n,Du)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="LruGarbageCollector",T4=1048576;function qx([n,e],[t,r]){const s=je(n,t);return s===0?je(e,r):s}class x4{constructor(e){this.Hn=e,this.buffer=new Et(qx),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class b1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){le(Bx,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ga(t)?le(Bx,"Ignoring IndexedDB error during garbage collection: ",t):await Ha(t)}await this.er(3e5)})}}class I4{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(fr.ae);const r=new x4(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(zx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zx):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,u,h,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,u=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,h=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),cu()<=Ze.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${s} in `+(h-u)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function E1(n,e){return new I4(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,t){this.db=e,this.garbageCollector=E1(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,s)=>t(s))}addReference(e,t,r){return im(e,r)}removeReference(e,t,r){return im(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return im(e,t)}ar(e,t){return function(s,o){let u=!1;return v1(s).X(h=>_1(s,h,o).next(d=>(d&&(u=!0),G.resolve(!d)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let o=0;return this._r(e,(u,h)=>{if(h<=t){const d=this.ar(e,u).next(p=>{if(!p)return o++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ce.min()),ya(e).delete(function(v){return[0,Yn(v.path)]}(u))))});s.push(d)}}).next(()=>G.waitFor(s)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return im(e,t)}_r(e,t){const r=ya(e);let s,o=fr.ae;return r.Z({index:V0},([u,h],{path:d,sequenceNumber:p})=>{u===0?(o!==fr.ae&&t(new ye(Ci(s)),o),o=p,s=d):o=fr.ae}).next(()=>{o!==fr.ae&&t(new ye(Ci(s)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function im(n,e){return ya(n).put(function(r,s){return{targetId:0,path:Yn(r.path),sequenceNumber:s}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.changes=new As(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Po(e).put(r)}removeEntry(e,t,r){return Po(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],jm(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=Ct.newInvalidDocument(t);return Po(e).Z({index:mm,range:IDBKeyRange.only(ph(t))},(s,o)=>{r=this.cr(t,o)}).next(()=>r)}lr(e,t){let r={size:0,document:Ct.newInvalidDocument(t)};return Po(e).Z({index:mm,range:IDBKeyRange.only(ph(t))},(s,o)=>{r={document:this.cr(t,o),size:Fm(o)}}).next(()=>r)}getEntries(e,t){let r=pr();return this.hr(e,t,(s,o)=>{const u=this.cr(s,o);r=r.insert(s,u)}).next(()=>r)}Pr(e,t){let r=pr(),s=new Rt(ye.comparator);return this.hr(e,t,(o,u)=>{const h=this.cr(o,u);r=r.insert(o,h),s=s.insert(o,Fm(u))}).next(()=>({documents:r,Tr:s}))}hr(e,t,r){if(t.isEmpty())return G.resolve();let s=new Et(Kx);t.forEach(d=>s=s.add(d));const o=IDBKeyRange.bound(ph(s.first()),ph(s.last())),u=s.getIterator();let h=u.getNext();return Po(e).Z({index:mm,range:o},(d,p,y)=>{const v=ye.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&Kx(h,v)<0;)r(h,null),h=u.getNext();h&&h.isEqual(v)&&(r(h,p),h=u.hasNext()?u.getNext():null),h?y.W(ph(h)):y.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,s,o){const u=t.path,h=[u.popLast().toArray(),u.lastSegment(),jm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Po(e).G(IDBKeyRange.bound(h,d,!0)).next(p=>{o==null||o.incrementDocumentReadCount(p.length);let y=pr();for(const v of p){const x=this.cr(ye.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);x.isFoundDocument()&&(_d(t,x)||s.has(x.key))&&(y=y.insert(x.key,x))}return y})}getAllFromCollectionGroup(e,t,r,s){let o=pr();const u=Gx(t,r),h=Gx(t,Rr.max());return Po(e).Z({index:uS,range:IDBKeyRange.bound(u,h,!0)},(d,p,y)=>{const v=this.cr(ye.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(v.key,v),o.size===s&&y.done()}).next(()=>o)}newChangeBuffer(e){return new R4(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Hx(e).get(R_).next(t=>(Ae(!!t),t))}ur(e,t){return Hx(e).put(R_,t)}cr(e,t){if(t){const r=d4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return Ct.newInvalidDocument(e)}}function T1(n){return new S4(n)}class R4 extends w1{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new As(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Et((o,u)=>je(o.canonicalString(),u.canonicalString()));return this.changes.forEach((o,u)=>{const h=this.Er.get(o);if(t.push(this.Ir.removeEntry(e,o,h.readTime)),u.isValidDocument()){const d=Rx(this.Ir.serializer,u);s=s.add(o.path.popLast());const p=Fm(d);r+=p-h.size,t.push(this.Ir.addEntry(e,o,d))}else if(r-=h.size,this.trackRemovals){const d=Rx(this.Ir.serializer,u.convertToNoDocument(Ce.min()));t.push(this.Ir.addEntry(e,o,d))}}),s.forEach(o=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Ir.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:s})=>(s.forEach((o,u)=>{this.Er.set(o,{size:u,readTime:r.get(o).readTime})}),r))}}function Hx(n){return bn(n,Kh)}function Po(n){return bn(n,Pm)}function ph(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gx(n,e){const t=e.documentKey.path.toArray();return[n,jm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Kx(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(s=je(t[o],r[o]),s)return s;return s=je(t.length,r.length),s||(s=je(t[t.length-2],r[r.length-2]),s||je(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Nh(r.mutation,s,mr.empty(),Mt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,t,r=He()){const s=Di();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let u=Th();return o.forEach((h,d)=>{u=u.insert(h,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Di();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,He()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,s){let o=pr();const u=Dh(),h=function(){return Dh()}();return t.forEach((d,p)=>{const y=r.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof Ss)?o=o.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),Nh(y.mutation,p,y.mutation.getFieldMask(),Mt.now())):u.set(p.key,mr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((p,y)=>u.set(p,y)),t.forEach((p,y)=>{var v;return h.set(p,new C4(y,(v=u.get(p))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Dh();let s=new Rt((u,h)=>u-h),o=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(d=>{const p=t.get(d);if(p===null)return;let y=r.get(d)||mr.empty();y=h.applyToLocalView(p,y),r.set(d,y);const v=(s.get(h.batchId)||He()).add(d);s=s.insert(h.batchId,v)})}).next(()=>{const u=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,v=zS();y.forEach(x=>{if(!o.has(x)){const R=$S(t.get(x),r.get(x));R!==null&&v.set(x,R),o=o.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return G.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return ye.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):B0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):G.resolve(Di());let h=Su,d=o;return u.next(p=>G.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?G.resolve():this.remoteDocumentCache.getEntry(e,y).next(x=>{d=d.insert(y,x)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,d,p,He())).next(y=>({batchId:h,changes:jS(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let s=Th();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let u=Th();return this.indexManager.getCollectionParents(e,o).next(h=>G.forEach(h,d=>{const p=function(v,x){return new Is(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(y=>{y.forEach((v,x)=>{u=u.insert(v,x)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(u=>{o.forEach((d,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,Ct.newInvalidDocument(y)))});let h=Th();return u.forEach((d,p)=>{const y=o.get(d);y!==void 0&&Nh(y.mutation,p,mr.empty(),Mt.now()),_d(t,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return G.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:tn(s.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:X0(s.bundledQuery),readTime:tn(s.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this.overlays=new Rt(ye.comparator),this.Rr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Di();return G.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),G.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const s=Di(),o=t.length+1,u=new ye(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return G.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Rt((p,y)=>p-y);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=Di(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Di(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=s)););return G.resolve(h)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Q0(t,r));let o=this.Rr.get(t);o===void 0&&(o=He(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.Vr=new Et(Cn.mr),this.gr=new Et(Cn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Cn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Cn(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new ye(new et([])),r=new Cn(t,e),s=new Cn(t,e+1),o=[];return this.gr.forEachInRange([r,s],u=>{this.wr(u),o.push(u.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ye(new et([])),r=new Cn(t,e),s=new Cn(t,e+1);let o=He();return this.gr.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new Cn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Cn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ye.comparator(e.key,t.key)||je(e.Cr,t.Cr)}static pr(e,t){return je(e.Cr,t.Cr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Et(Cn.mr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new K0(o,t,r,s);this.mutationQueue.push(u);for(const h of s)this.Mr=this.Mr.add(new Cn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return G.resolve(u)}lookupMutationBatch(e,t){return G.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Ta:this.Fr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cn(t,0),s=new Cn(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],u=>{const h=this.Or(u.Cr);o.push(h)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Et(je);return t.forEach(s=>{const o=new Cn(s,0),u=new Cn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,u],h=>{r=r.add(h.Cr)})}),G.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;ye.isDocumentKey(o)||(o=o.child(""));const u=new Cn(new ye(o),0);let h=new Et(je);return this.Mr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(d.Cr)),!0)},u),G.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ae(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return G.forEach(t.mutations,s=>{const o=new Cn(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Cn(t,0),s=this.Mr.firstAfterOrEqual(r);return G.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.kr=e,this.docs=function(){return new Rt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():Ct.newInvalidDocument(t))}getEntries(e,t){let r=pr();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Ct.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=pr();const u=t.path,h=new ye(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||k0(rS(y),r)<=0||(s.has(y.key)||_d(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ee()}qr(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new V4(this)}getSize(e){return G.resolve(this.size)}}class V4 extends w1{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.persistence=e,this.Qr=new As(t=>Yo(t),gd),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.$r=0,this.Kr=new ev,this.targetCount=0,this.Ur=tl.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),G.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.zn(t),G.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Qr.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),G.waitFor(o).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new fr(0),this.zr=!1,this.zr=!0,this.jr=new P4,this.referenceDelegate=e(this),this.Hr=new M4(this),this.indexManager=new b4,this.remoteDocumentCache=function(s){return new O4(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new d1(t),this.Yr=new D4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new N4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new k4(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const s=new L4(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return G.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class L4 extends sS{constructor(e){super(),this.currentSequenceNumber=e}}class yp{constructor(e){this.persistence=e,this.ti=new ev,this.ni=null}static ri(e){return new yp(e)}get ii(){if(this.ni)return this.ni;throw Ee()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),G.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ii,r=>{const s=ye.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,Ce.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return G.or([()=>G.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Bm{constructor(e,t){this.persistence=e,this.oi=new As(r=>Yn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=E1(this,t)}static ri(e,t){return new Bm(e,t)}Zr(){}Xr(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return G.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?G.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,u=>this.ar(e,u,t).next(h=>{h||(r++,o.removeEntry(u,Ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),G.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gm(e.data.value)),t}ar(e,t,r){return G.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.serializer=e}B(e,t,r,s){const o=new ap("createOrUpgrade",t);r<1&&s>=1&&(function(d){d.createObjectStore(pd)}(e),function(d){d.createObjectStore(Gh,{keyPath:eV}),d.createObjectStore(ii,{keyPath:ix,autoIncrement:!0}).createIndex(Fo,sx,{unique:!0}),d.createObjectStore(Ru)}(e),$x(e),function(d){d.createObjectStore(Vo)}(e));let u=G.resolve();return r<3&&s>=3&&(r!==0&&(function(d){d.deleteObjectStore(Du),d.deleteObjectStore(Cu),d.deleteObjectStore(Go)}(e),$x(e)),u=u.next(()=>function(d){const p=d.store(Go),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return p.put(km,y)}(o))),r<4&&s>=4&&(r!==0&&(u=u.next(()=>function(d,p){return p.store(ii).G().next(v=>{d.deleteObjectStore(ii),d.createObjectStore(ii,{keyPath:ix,autoIncrement:!0}).createIndex(Fo,sx,{unique:!0});const x=p.store(ii),R=v.map(N=>x.put(N));return G.waitFor(R)})}(e,o))),u=u.next(()=>{(function(d){d.createObjectStore(Nu,{keyPath:uV})})(e)})),r<5&&s>=5&&(u=u.next(()=>this._i(o))),r<6&&s>=6&&(u=u.next(()=>(function(d){d.createObjectStore(Kh)}(e),this.ai(o)))),r<7&&s>=7&&(u=u.next(()=>this.ui(o))),r<8&&s>=8&&(u=u.next(()=>this.ci(e,o))),r<9&&s>=9&&(u=u.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(u=u.next(()=>this.li(o))),r<11&&s>=11&&(u=u.next(()=>{(function(d){d.createObjectStore(op,{keyPath:cV})})(e),function(d){d.createObjectStore(lp,{keyPath:hV})}(e)})),r<12&&s>=12&&(u=u.next(()=>{(function(d){const p=d.createObjectStore(up,{keyPath:_V});p.createIndex(D_,vV,{unique:!1}),p.createIndex(fS,bV,{unique:!1})})(e)})),r<13&&s>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore(Pm,{keyPath:nV});p.createIndex(mm,rV),p.createIndex(uS,iV)}(e)).next(()=>this.hi(e,o)).next(()=>e.deleteObjectStore(Vo))),r<14&&s>=14&&(u=u.next(()=>this.Pi(e,o))),r<15&&s>=15&&(u=u.next(()=>function(d){d.createObjectStore(M0,{keyPath:dV,autoIncrement:!0}).createIndex(C_,fV,{unique:!1}),d.createObjectStore(Om,{keyPath:mV}).createIndex(hS,pV,{unique:!1}),d.createObjectStore(Vm,{keyPath:gV}).createIndex(dS,yV,{unique:!1})}(e))),r<16&&s>=16&&(u=u.next(()=>{t.objectStore(Om).clear()}).next(()=>{t.objectStore(Vm).clear()})),r<17&&s>=17&&(u=u.next(()=>{(function(d){d.createObjectStore(L0,{keyPath:EV})})(e)})),u}ai(e){let t=0;return e.store(Vo).Z((r,s)=>{t+=Fm(s)}).next(()=>{const r={byteSize:t};return e.store(Kh).put(R_,r)})}_i(e){const t=e.store(Gh),r=e.store(ii);return t.G().next(s=>G.forEach(s,o=>{const u=IDBKeyRange.bound([o.userId,Ta],[o.userId,o.lastAcknowledgedBatchId]);return r.G(Fo,u).next(h=>G.forEach(h,d=>{Ae(d.userId===o.userId);const p=Lo(this.serializer,d);return y1(e,o.userId,p).next(()=>{})}))}))}ui(e){const t=e.store(Du),r=e.store(Vo);return e.store(Go).get(km).next(s=>{const o=[];return r.Z((u,h)=>{const d=new et(u),p=function(v){return[0,Yn(v)]}(d);o.push(t.get(p).next(y=>y?G.resolve():(v=>t.put({targetId:0,path:Yn(v),sequenceNumber:s.highestListenSequenceNumber}))(d)))}).next(()=>G.waitFor(o))})}ci(e,t){e.createObjectStore($h,{keyPath:lV});const r=t.store($h),s=new J0,o=u=>{if(s.add(u)){const h=u.lastSegment(),d=u.popLast();return r.put({collectionId:h,parent:Yn(d)})}};return t.store(Vo).Z({Y:!0},(u,h)=>{const d=new et(u);return o(d.popLast())}).next(()=>t.store(Ru).Z({Y:!0},([u,h,d],p)=>{const y=Ci(h);return o(y.popLast())}))}li(e){const t=e.store(Cu);return t.Z((r,s)=>{const o=Ih(s),u=f1(this.serializer,o);return t.put(u)})}hi(e,t){const r=t.store(Vo),s=[];return r.Z((o,u)=>{const h=t.store(Pm),d=function(v){return v.document?new ye(et.fromString(v.document.name).popFirst(5)):v.noDocument?ye.fromSegments(v.noDocument.path):v.unknownDocument?ye.fromSegments(v.unknownDocument.path):Ee()}(u).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};s.push(h.put(p))}).next(()=>G.waitFor(s))}Pi(e,t){const r=t.store(ii),s=T1(this.serializer),o=new tv(yp.ri,this.serializer.Tt);return r.G().next(u=>{const h=new Map;return u.forEach(d=>{var p;let y=(p=h.get(d.userId))!==null&&p!==void 0?p:He();Lo(this.serializer,d).keys().forEach(v=>y=y.add(v)),h.set(d.userId,y)}),G.forEach(h,(d,p)=>{const y=new Dn(p),v=pp.It(this.serializer,y),x=o.getIndexManager(y),R=gp.It(y,this.serializer,x,o.referenceDelegate);return new x1(s,R,v,x).recalculateAndSaveOverlaysForDocumentKeys(new N_(t,fr.ae),d).next()})})}}function $x(n){n.createObjectStore(Du,{keyPath:aV}).createIndex(V0,oV,{unique:!0}),n.createObjectStore(Cu,{keyPath:"targetId"}).createIndex(cS,sV,{unique:!0}),n.createObjectStore(Go)}const fa="IndexedDbPersistence",n_=18e5,r_=5e3,i_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",I1="main";class nv{constructor(e,t,r,s,o,u,h,d,p,y,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=o,this.window=u,this.document=h,this.Ii=p,this.Ei=y,this.di=v,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=x=>Promise.resolve(),!nv.D())throw new ae(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new A4(this,s),this.gi=t+I1,this.serializer=new d1(d),this.pi=new Pi(this.gi,this.di,new U4(this.serializer)),this.jr=new m4,this.Hr=new w4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=T1(this.serializer),this.Yr=new f4,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,y===!1&&en(fa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(Y.FAILED_PRECONDITION,i_);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new fr(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(Ga(e))return le(fa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(fa,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return gh(e).get(nu).next(t=>G.resolve(this.Ni(t)))}Bi(e){return sm(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,n_)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=bn(t,Nu);return r.G().next(s=>{const o=this.qi(s,n_),u=s.filter(h=>o.indexOf(h)===-1);return G.forEach(u,h=>r.delete(h.clientId)).next(()=>u)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?G.resolve(!0):gh(e).get(nu).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,r_)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ae(Y.FAILED_PRECONDITION,i_);return!1}}return!(!this.networkEnabled||!this.inForeground)||sm(e).G().next(r=>this.qi(r,r_).find(s=>{if(this.clientId!==s.clientId){const o=!this.networkEnabled&&s.networkEnabled,u=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(o||u&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&le(fa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[pd,Nu],e=>{const t=new N_(e,fr.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>sm(e).G().next(t=>this.qi(t,n_).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return gp.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new E4(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return pp.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){le(fa,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",o=function(d){return d===17?xV:d===16?TV:d===15?U0:d===14?gS:d===13?pS:d===12?wV:d===11?mS:void Ee()}(this.di);let u;return this.pi.runTransaction(e,s,o,h=>(u=new N_(h,this.Gr?this.Gr.next():fr.ae),t==="readwrite-primary"?this.Fi(u).next(d=>!!d||this.Mi(u)).next(d=>{if(!d)throw en(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ae(Y.FAILED_PRECONDITION,iS);return r(u)}).next(d=>this.Oi(u).next(()=>d)):this.ji(u).next(()=>r(u)))).then(h=>(u.raiseOnCommittedEvent(),h))}ji(e){return gh(e).get(nu).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,r_)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(Y.FAILED_PRECONDITION,i_)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gh(e).put(nu,t)}static D(){return Pi.D()}xi(e){const t=gh(e);return t.get(nu).next(r=>this.Ni(r)?(le(fa,"Releasing primary lease."),t.delete(nu)):G.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(en(`Detected an update time that is in the future: ${e} > ${r}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;PA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return le(fa,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return en(fa,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){en("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gh(n){return bn(n,pd)}function sm(n){return bn(n,Nu)}function rv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=He(),s=He();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new iv(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return PA()?8:aS(Ht())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new j4;return this._s(e,t,u).next(h=>{if(o.result=h,this.Xi)return this.us(e,t,u,h.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(cu()<=Ze.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",hu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),G.resolve()):(cu()<=Ze.DEBUG&&le("QueryEngine","Query:",hu(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(cu()<=Ze.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",hu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(t))):G.resolve())}rs(e,t){if(_x(t))return G.resolve(null);let r=or(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Um(t,null,"F"),r=or(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=He(...o);return this.ns.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.cs(t,h);return this.ls(t,p,u,d.readTime)?this.rs(e,Um(t,null,"F")):this.hs(e,p,t,d)}))})))}ss(e,t,r,s){return _x(t)||s.isEqual(Ce.min())?G.resolve(null):this.ns.getDocuments(e,r).next(o=>{const u=this.cs(t,o);return this.ls(t,u,r,s)?G.resolve(null):(cu()<=Ze.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hu(t)),this.hs(e,u,t,nS(s,Su)).next(h=>h))})}cs(e,t){let r=new Et(LS(e));return t.forEach((s,o)=>{_d(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return cu()<=Ze.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",hu(t)),this.ns.getDocumentsMatchingQuery(e,t,Rr.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="LocalStore",z4=3e8;class F4{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new Rt(je),this.Is=new As(o=>Yo(o),gd),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function S1(n,e,t,r){return new F4(n,e,t,r)}async function R1(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],h=[];let d=He();for(const p of s){u.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(r,d).next(p=>({Rs:p,removedBatchIds:u,addedBatchIds:h}))})})}function B4(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,d,p,y){const v=p.batch,x=v.keys();let R=G.resolve();return x.forEach(N=>{R=R.next(()=>y.getEntry(d,N)).next(j=>{const U=p.docVersions.get(N);Ae(U!==null),j.version.compareTo(U)<0&&(v.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),y.addEntry(j)))})}),R.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=He();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function C1(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function q4(n,e){const t=_e(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const h=[];e.targetChanges.forEach((y,v)=>{const x=s.get(v);if(!x)return;h.push(t.Hr.removeMatchingKeys(o,y.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,y.addedDocuments,v)));let R=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(Yt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),s=s.insert(v,R),function(j,U,B){return j.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=z4?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(x,R,y)&&h.push(t.Hr.updateTargetData(o,R))});let d=pr(),p=He();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(D1(o,u,e.documentUpdates).next(y=>{d=y.Vs,p=y.fs})),!r.isEqual(Ce.min())){const y=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(y)}return G.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(t.Ts=s,o))}function D1(n,e,t){let r=He(),s=He();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=pr();return t.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(Ce.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):le(sv,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{Vs:u,fs:s}})}function H4(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ta),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Uu(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,G.resolve(s)):t.Hr.allocateTargetId(r).next(u=>(s=new ds(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function ju(n,e,t){const r=_e(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Ga(u))throw u;le(sv,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function qm(n,e,t){const r=_e(n);let s=Ce.min(),o=He();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,p,y){const v=_e(d),x=v.Is.get(y);return x!==void 0?G.resolve(v.Ts.get(x)):v.Hr.getTargetData(p,y)}(r,u,or(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,h.targetId).next(d=>{o=d})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?s:Ce.min(),t?o:He())).next(h=>(k1(r,MS(e),h),{documents:h,gs:o})))}function N1(n,e){const t=_e(n),r=_e(t.Hr),s=t.Ts.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",o=>r.lt(o,e).next(u=>u?u.target:null))}function P1(n,e){const t=_e(n),r=t.Es.get(e)||Ce.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.ds.getAllFromCollectionGroup(s,e,nS(r,Su),Number.MAX_SAFE_INTEGER)).then(s=>(k1(t,e,s),s))}function k1(n,e,t){let r=n.Es.get(e)||Ce.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}async function G4(n,e,t,r){const s=_e(n);let o=He(),u=pr();for(const p of t){const y=e.ps(p.metadata.name);p.document&&(o=o.add(y));const v=e.ys(p);v.setReadTime(e.ws(p.metadata.readTime)),u=u.insert(y,v)}const h=s.ds.newChangeBuffer({trackRemovals:!0}),d=await Uu(s,function(y){return or(Ju(et.fromString(`__bundle__/docs/${y}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",p=>D1(p,h,u).next(y=>(h.apply(p),y)).next(y=>s.Hr.removeMatchingKeysForTargetId(p,d.targetId).next(()=>s.Hr.addMatchingKeys(p,o,d.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(p,y.Vs,y.fs)).next(()=>y.Vs)))}async function K4(n,e,t=He()){const r=await Uu(n,or(X0(e.bundledQuery))),s=_e(n);return s.persistence.runTransaction("Save named query","readwrite",o=>{const u=tn(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return s.Yr.saveNamedQuery(o,e);const h=r.withResumeToken(Yt.EMPTY_BYTE_STRING,u);return s.Ts=s.Ts.insert(h.targetId,h),s.Hr.updateTargetData(o,h).next(()=>s.Hr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>s.Hr.addMatchingKeys(o,t,r.targetId)).next(()=>s.Yr.saveNamedQuery(o,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="firestore_clients";function Qx(n,e){return`${O1}_${n}_${e}`}const V1="firestore_mutations";function Wx(n,e,t){let r=`${V1}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const M1="firestore_targets";function s_(n,e){return`${M1}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="SharedClientState";class Hm{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static bs(e,t,r){const s=JSON.parse(r);let o,u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string",u&&(o=new ae(s.error.code,s.error.message))),u?new Hm(e,t,s.state,o):(en(xi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ph{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static bs(e,t){const r=JSON.parse(t);let s,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new ae(r.error.code,r.error.message))),o?new Ph(e,r.state,s):(en(xi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static bs(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,o=q0();for(let u=0;s&&u<r.activeTargetIds.length;++u)s=oS(r.activeTargetIds[u]),o=o.add(r.activeTargetIds[u]);return s?new Gm(e,o):(en(xi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class av{constructor(e,t){this.clientId=e,this.onlineState=t}static bs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new av(t.clientId,t.onlineState):(en(xi,`Failed to parse online state: ${e}`),null)}}class K_{constructor(){this.activeTargetIds=q0()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a_{constructor(e,t,r,s,o){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new Rt(je),this.started=!1,this.Os=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ns=Qx(this.persistenceKey,this.Cs),this.Bs=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new K_),this.Ls=new RegExp(`^${O1}_${u}_([^_]*)$`),this.ks=new RegExp(`^${V1}_${u}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${M1}_${u}_(\\d+)$`),this.Qs=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.$s=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const s=this.getItem(Qx(this.persistenceKey,r));if(s){const o=Gm.bs(r,s);o&&(this.xs=this.xs.insert(o.clientId,o))}}this.Ks();const t=this.storage.getItem(this.Qs);if(t){const r=this.Us(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(s_(this.persistenceKey,e));if(s){const o=Ph.bs(e,s);o&&(r=o.state)}}return t&&this.Hs.Ds(e),this.Ks(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Ks()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(s_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.js(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return le(xi,"READ",e,t),t}setItem(e,t){le(xi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){le(xi,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(le(xi,"EVENT",t.key,t.newValue),t.key===this.Ns)return void en("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Us(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(o){let u=fr.ae;if(o!=null)try{const h=JSON.parse(o);Ae(typeof h=="number"),u=h}catch(h){en(xi,"Failed to read sequence number from WebStorage",h)}return u}(t.newValue);r!==fr.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(s=>this.syncEngine.ao(s)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(e,t,r){const s=new Hm(this.currentUser,e,t,r),o=Wx(this.persistenceKey,this.currentUser,e);this.setItem(o,s.Ss())}js(e){const t=Wx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const s=s_(this.persistenceKey,e),o=new Ph(e,t,r);this.setItem(s,o.Ss())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return Gm.bs(r,t)}ro(e,t){const r=this.ks.exec(e),s=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Hm.bs(new Dn(o),s,t)}so(e,t){const r=this.qs.exec(e),s=Number(r[1]);return Ph.bs(s,t)}Us(e){return av.bs(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);le(xi,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),s=this.Gs(this.xs),o=this.Gs(r),u=[],h=[];return o.forEach(d=>{s.has(d)||u.push(d)}),s.forEach(d=>{o.has(d)||h.push(d)}),this.syncEngine.lo(u,h).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=q0();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class L1{constructor(){this.ho=new K_,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new K_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="ConnectivityMonitor";class Xx{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){le(Yx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){le(Yx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let am=null;function $_(){return am===null?am=function(){return 268435456+Math.round(2147483648*Math.random())}():am++,"0x"+am.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="RestConnection",Q4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W4{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===P_?`project_id=${r}`:`project_id=${r}&database_id=${s}`}bo(e,t,r,s,o){const u=$_(),h=this.So(e,t.toUriEncodedString());le(o_,`Sending RPC '${e}' ${u}:`,h,r);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,s,o),this.vo(e,h,d,r).then(p=>(le(o_,`Received RPC '${e}' ${u}: `,p),p),p=>{throw Vi(o_,`RPC '${e}' ${u} failed with error: `,p,"url: ",h,"request:",r),p})}Co(e,t,r,s,o,u){return this.bo(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}So(e,t){const r=Q4[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class X4 extends W4{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=$_();return new Promise((u,h)=>{const d=new QA;d.setWithCredentials(!0),d.listenOnce(WA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case hm.NO_ERROR:const y=d.getResponseJson();le(Qn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),u(y);break;case hm.TIMEOUT:le(Qn,`RPC '${e}' ${o} timed out`),h(new ae(Y.DEADLINE_EXCEEDED,"Request time out"));break;case hm.HTTP_ERROR:const v=d.getStatus();if(le(Qn,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const R=x==null?void 0:x.error;if(R&&R.status&&R.message){const N=function(U){const B=U.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(B)>=0?B:Y.UNKNOWN}(R.status);h(new ae(N,R.message))}else h(new ae(Y.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new ae(Y.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{le(Qn,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(s);le(Qn,`RPC '${e}' ${o} sending request:`,s),d.send(t,"POST",p,r,15)})}Wo(e,t,r){const s=$_(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ZA(),h=XA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const y=o.join("");le(Qn,`Creating RPC '${e}' stream ${s}: ${y}`,d);const v=u.createWebChannel(y,d);let x=!1,R=!1;const N=new Y4({Fo:U=>{R?le(Qn,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(x||(le(Qn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),x=!0),le(Qn,`RPC '${e}' stream ${s} sending:`,U),v.send(U))},Mo:()=>v.close()}),j=(U,B,te)=>{U.listen(B,K=>{try{te(K)}catch(ue){setTimeout(()=>{throw ue},0)}})};return j(v,wh.EventType.OPEN,()=>{R||(le(Qn,`RPC '${e}' stream ${s} transport opened.`),N.Qo())}),j(v,wh.EventType.CLOSE,()=>{R||(R=!0,le(Qn,`RPC '${e}' stream ${s} transport closed`),N.Ko())}),j(v,wh.EventType.ERROR,U=>{R||(R=!0,Vi(Qn,`RPC '${e}' stream ${s} transport errored:`,U),N.Ko(new ae(Y.UNAVAILABLE,"The operation could not be completed")))}),j(v,wh.EventType.MESSAGE,U=>{var B;if(!R){const te=U.data[0];Ae(!!te);const K=te,ue=(K==null?void 0:K.error)||((B=K[0])===null||B===void 0?void 0:B.error);if(ue){le(Qn,`RPC '${e}' stream ${s} received error:`,ue);const ie=ue.status;let J=function(w){const I=ln[w];if(I!==void 0)return YS(I)}(ie),O=ue.message;J===void 0&&(J=Y.INTERNAL,O="Unknown error status: "+ie+" with message "+ue.message),R=!0,N.Ko(new ae(J,O)),v.close()}else le(Qn,`RPC '${e}' stream ${s} received:`,te),N.Uo(te)}}),j(h,YA.STAT_EVENT,U=>{U.stat===A_.PROXY?le(Qn,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===A_.NOPROXY&&le(Qn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.$o()},0),N}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(){return typeof window<"u"?window:null}function bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(n){return new n4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="PersistentStream";class j1{constructor(e,t,r,s,o,u,h,d){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new ov(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(en(t.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new ae(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return le(Zx,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(le(Zx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z4 extends j1{constructor(e,t,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=s4(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ce.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?tn(u.readTime):Ce.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=F_(this.serializer),t.addTarget=function(o,u){let h;const d=u.target;if(h=Mm(d)?{documents:a1(o,d)}:{query:o1(o,d).ht},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=e1(o,u.resumeToken);const p=j_(o,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ce.min())>0){h.readTime=Lu(o,u.snapshotVersion.toTimestamp());const p=j_(o,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=o4(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=F_(this.serializer),t.removeTarget=e,this.I_(t)}}class J4 extends j1{constructor(e,t,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=a4(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=F_(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jh(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{}class tM extends eM{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ae(Y.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.bo(e,z_(t,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ae(Y.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Co(e,z_(t,r),s,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ae(Y.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class nM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(en(t),this.N_=!1):le("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class rM{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(u=>{r.enqueueAndForget(async()=>{$a(this)&&(le(nl,"Restarting streams for network reachability change."),await async function(d){const p=_e(d);p.W_.add(4),await nc(p),p.j_.set("Unknown"),p.W_.delete(4),await Td(p)}(this))})}),this.j_=new nM(r,s)}}async function Td(n){if($a(n))for(const e of n.G_)await e(!0)}async function nc(n){for(const e of n.G_)await e(!1)}function _p(n,e){const t=_e(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),cv(t)?uv(t):ic(t).c_()&&lv(t,e))}function zu(n,e){const t=_e(n),r=ic(t);t.U_.delete(e),r.c_()&&z1(t,e),t.U_.size===0&&(r.c_()?r.P_():$a(t)&&t.j_.set("Unknown"))}function lv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ic(n).y_(e)}function z1(n,e){n.H_.Ne(e),ic(n).w_(e)}function uv(n){n.H_=new ZV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),ic(n).start(),n.j_.B_()}function cv(n){return $a(n)&&!ic(n).u_()&&n.U_.size>0}function $a(n){return _e(n).W_.size===0}function F1(n){n.H_=void 0}async function iM(n){n.j_.set("Online")}async function sM(n){n.U_.forEach((e,t)=>{lv(n,e)})}async function aM(n,e){F1(n),cv(n)?(n.j_.q_(e),uv(n)):n.j_.set("Unknown")}async function oM(n,e,t){if(n.j_.set("Online"),e instanceof JS&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const h of o.targetIds)s.U_.has(h)&&(await s.remoteSyncer.rejectListen(h,u),s.U_.delete(h),s.H_.removeTarget(h))}(n,e)}catch(r){le(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Km(n,r)}else if(e instanceof vm?n.H_.We(e):e instanceof ZS?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Ce.min()))try{const r=await C1(n.localStore);t.compareTo(r)>=0&&await function(o,u){const h=o.H_.ot(u);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.U_.get(p);y&&o.U_.set(p,y.withResumeToken(d.resumeToken,u))}}),h.targetMismatches.forEach((d,p)=>{const y=o.U_.get(d);if(!y)return;o.U_.set(d,y.withResumeToken(Yt.EMPTY_BYTE_STRING,y.snapshotVersion)),z1(o,d);const v=new ds(y.target,d,p,y.sequenceNumber);lv(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){le(nl,"Failed to raise snapshot:",r),await Km(n,r)}}async function Km(n,e,t){if(!Ga(e))throw e;n.W_.add(1),await nc(n),n.j_.set("Offline"),t||(t=()=>C1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{le(nl,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Td(n)})}function B1(n,e){return e().catch(t=>Km(n,t,e))}async function rc(n){const e=_e(n),t=Ma(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:Ta;for(;lM(e);)try{const s=await H4(e.localStore,r);if(s===null){e.K_.length===0&&t.P_();break}r=s.batchId,uM(e,s)}catch(s){await Km(e,s)}q1(e)&&H1(e)}function lM(n){return $a(n)&&n.K_.length<10}function uM(n,e){n.K_.push(e);const t=Ma(n);t.c_()&&t.b_&&t.S_(e.mutations)}function q1(n){return $a(n)&&!Ma(n).u_()&&n.K_.length>0}function H1(n){Ma(n).start()}async function cM(n){Ma(n).C_()}async function hM(n){const e=Ma(n);for(const t of n.K_)e.S_(t.mutations)}async function dM(n,e,t){const r=n.K_.shift(),s=$0.from(r,e,t);await B1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await rc(n)}async function fM(n,e){e&&Ma(n).b_&&await async function(r,s){if(function(u){return WS(u)&&u!==Y.ABORTED}(s.code)){const o=r.K_.shift();Ma(r).h_(),await B1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await rc(r)}}(n,e),q1(n)&&H1(n)}async function Jx(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),le(nl,"RemoteStore received new credentials");const r=$a(t);t.W_.add(3),await nc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Td(t)}async function Q_(n,e){const t=_e(n);e?(t.W_.delete(2),await Td(t)):e||(t.W_.add(2),await nc(t),t.j_.set("Unknown"))}function ic(n){return n.J_||(n.J_=function(t,r,s){const o=_e(t);return o.M_(),new Z4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:iM.bind(null,n),No:sM.bind(null,n),Lo:aM.bind(null,n),p_:oM.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),cv(n)?uv(n):n.j_.set("Unknown")):(await n.J_.stop(),F1(n))})),n.J_}function Ma(n){return n.Y_||(n.Y_=function(t,r,s){const o=_e(t);return o.M_(),new J4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:cM.bind(null,n),Lo:fM.bind(null,n),D_:hM.bind(null,n),v_:dM.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await rc(n)):(await n.Y_.stop(),n.K_.length>0&&(le(nl,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const u=Date.now()+r,h=new hv(e,t,u,s,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sc(n,e){if(en("AsyncQueue",`${e}: ${n}`),Ga(n))return new ae(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{static emptySet(e){return new vu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=Th(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new vu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.Z_=new Rt(ye.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ee():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Fu{constructor(e,t,r,s,o,u,h,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Fu(e,t,vu.emptySet(t),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class pM{constructor(){this.queries=tI(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=_e(t),o=s.queries;s.queries=tI(),o.forEach((u,h)=>{for(const d of h.ta)d.onError(r)})})(this,new ae(Y.ABORTED,"Firestore shutting down"))}}function tI(){return new As(n=>VS(n),yd)}async function dv(n,e){const t=_e(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new mM,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const h=sc(u,`Initialization of query '${hu(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&mv(t)}async function fv(n,e){const t=_e(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const u=o.ta.indexOf(e);u>=0&&(o.ta.splice(u,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function gM(n,e){const t=_e(n);let r=!1;for(const s of e){const o=s.query,u=t.queries.get(o);if(u){for(const h of u.ta)h.oa(s)&&(r=!0);u.ea=s}}r&&mv(t)}function yM(n,e,t){const r=_e(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function mv(n){n.ia.forEach(e=>{e.next()})}var W_,nI;(nI=W_||(W_={}))._a="default",nI.Cache="cache";class pv{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Fu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==W_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.serializer=e}ps(e){return ki(this.serializer,e)}ys(e){return e.metadata.exists?s1(this.serializer,e.document,!1):Ct.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return tn(e)}}class vM{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=G1(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=et.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new rI(this.serializer);for(const s of e)if(s.metadata.queries){const o=r.ps(s.metadata.name);for(const u of s.metadata.queries){const h=(t.get(u)||He()).add(o);t.set(u,h)}}return t}async complete(){const e=await G4(this.localStore,new rI(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await K4(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function G1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.key=e}}class $1{constructor(e){this.key=e}}class Q1{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=He(),this.mutatedKeys=He(),this.ya=LS(e),this.wa=new vu(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new eI,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,u=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const x=s.get(y),R=_d(this.query,v)?v:null,N=!!x&&this.mutatedKeys.has(x.key),j=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let U=!1;x&&R?x.data.isEqual(R.data)?N!==j&&(r.track({type:3,doc:R}),U=!0):this.va(x,R)||(r.track({type:2,doc:R}),U=!0,(d&&this.ya(R,d)>0||p&&this.ya(R,p)<0)&&(h=!0)):!x&&R?(r.track({type:0,doc:R}),U=!0):x&&!R&&(r.track({type:1,doc:x}),U=!0,(d||p)&&(h=!0)),U&&(R?(u=u.add(R),o=j?o.add(y):o.delete(y)):(u=u.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{wa:u,Da:r,ls:h,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((y,v)=>function(R,N){const j=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return j(R)-j(N)}(y.type,v.type)||this.ya(y.doc,v.doc)),this.Ca(r),s=s!=null&&s;const h=t&&!s?this.Fa():[],d=this.pa.size===0&&this.current&&!s?1:0,p=d!==this.ga;return this.ga=d,u.length!==0||p?{snapshot:new Fu(this.query,e.wa,o,u,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new eI,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=He(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new $1(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new K1(r))}),t}Oa(e){this.fa=e.gs,this.pa=He();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Fu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Qa="SyncEngine";class bM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class EM{constructor(e){this.key=e,this.Ba=!1}}class wM{constructor(e,t,r,s,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new As(h=>VS(h),yd),this.qa=new Map,this.Qa=new Set,this.$a=new Rt(ye.comparator),this.Ka=new Map,this.Ua=new ev,this.Wa={},this.Ga=new Map,this.za=tl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function TM(n,e,t=!0){const r=vp(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await W1(r,e,t,!0),s}async function xM(n,e){const t=vp(n);await W1(t,e,!0,!1)}async function W1(n,e,t,r){const s=await Uu(n.localStore,or(e)),o=s.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await gv(n,e,o,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&_p(n.remoteStore,s),h}async function gv(n,e,t,r,s){n.Ha=(v,x,R)=>async function(j,U,B,te){let K=U.view.Sa(B);K.ls&&(K=await qm(j.localStore,U.query,!1).then(({documents:O})=>U.view.Sa(O,K)));const ue=te&&te.targetChanges.get(U.targetId),ie=te&&te.targetMismatches.get(U.targetId)!=null,J=U.view.applyChanges(K,j.isPrimaryClient,ue,ie);return Y_(j,U.targetId,J.Ma),J.snapshot}(n,v,x,R);const o=await qm(n.localStore,e,!0),u=new Q1(e,o.gs),h=u.Sa(o.documents),d=Ed.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=u.applyChanges(h,n.isPrimaryClient,d);Y_(n,t,p.Ma);const y=new bM(e,t,u);return n.ka.set(e,y),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),p.snapshot}async function IM(n,e,t){const r=_e(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(u=>!yd(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ju(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&zu(r.remoteStore,s.targetId),Bu(r,s.targetId)}).catch(Ha)):(Bu(r,s.targetId),await ju(r.localStore,s.targetId,!0))}async function AM(n,e){const t=_e(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zu(t.remoteStore,r.targetId))}async function SM(n,e,t){const r=bv(n);try{const s=await function(u,h){const d=_e(u),p=Mt.now(),y=h.reduce((R,N)=>R.add(N.key),He());let v,x;return d.persistence.runTransaction("Locally write mutations","readwrite",R=>{let N=pr(),j=He();return d.ds.getEntries(R,y).next(U=>{N=U,N.forEach((B,te)=>{te.isValidDocument()||(j=j.add(B))})}).next(()=>d.localDocuments.getOverlayedDocuments(R,N)).next(U=>{v=U;const B=[];for(const te of h){const K=WV(te,v.get(te.key).overlayedDocument);K!=null&&B.push(new Ss(te.key,K,AS(K.value.mapValue),Vt.exists(!0)))}return d.mutationQueue.addMutationBatch(R,p,B,h)}).next(U=>{x=U;const B=U.applyToLocalDocumentSet(v,j);return d.documentOverlayCache.saveOverlays(R,U.batchId,B)})}).then(()=>({batchId:x.batchId,changes:jS(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,d){let p=u.Wa[u.currentUser.toKey()];p||(p=new Rt(je)),p=p.insert(h,d),u.Wa[u.currentUser.toKey()]=p}(r,s.batchId,t),await Rs(r,s.changes),await rc(r.remoteStore)}catch(s){const o=sc(s,"Failed to persist write");t.reject(o)}}async function Y1(n,e){const t=_e(n);try{const r=await q4(t.localStore,e);e.targetChanges.forEach((s,o)=>{const u=t.Ka.get(o);u&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Ba=!0:s.modifiedDocuments.size>0?Ae(u.Ba):s.removedDocuments.size>0&&(Ae(u.Ba),u.Ba=!1))}),await Rs(t,r,e)}catch(r){await Ha(r)}}function iI(n,e,t){const r=_e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,u)=>{const h=u.view.sa(e);h.snapshot&&s.push(h.snapshot)}),function(u,h){const d=_e(u);d.onlineState=h;let p=!1;d.queries.forEach((y,v)=>{for(const x of v.ta)x.sa(h)&&(p=!0)}),p&&mv(d)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RM(n,e,t){const r=_e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ka.get(e),o=s&&s.key;if(o){let u=new Rt(ye.comparator);u=u.insert(o,Ct.newNoDocument(o,Ce.min()));const h=He().add(o),d=new bd(Ce.min(),new Map,new Rt(je),u,h);await Y1(r,d),r.$a=r.$a.remove(o),r.Ka.delete(e),vv(r)}else await ju(r.localStore,e,!1).then(()=>Bu(r,e,t)).catch(Ha)}async function CM(n,e){const t=_e(n),r=e.batch.batchId;try{const s=await B4(t.localStore,e);_v(t,r,null),yv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Rs(t,s)}catch(s){await Ha(s)}}async function DM(n,e,t){const r=_e(n);try{const s=await function(u,h){const d=_e(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(Ae(v!==null),y=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);_v(r,e,t),yv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Rs(r,s)}catch(s){await Ha(s)}}async function NM(n,e){const t=_e(n);$a(t.remoteStore)||le(Qa,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(u){const h=_e(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>h.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(r===Ta)return void e.resolve();const s=t.Ga.get(r)||[];s.push(e),t.Ga.set(r,s)}catch(r){const s=sc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function yv(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function _v(n,e,t){const r=_e(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function Bu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||X1(n,r)})}function X1(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(zu(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),vv(n))}function Y_(n,e,t){for(const r of t)r instanceof K1?(n.Ua.addReference(r.key,e),PM(n,r)):r instanceof $1?(le(Qa,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||X1(n,r.key)):Ee()}function PM(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(le(Qa,"New document in limbo: "+t),n.Qa.add(r),vv(n))}function vv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new ye(et.fromString(e)),r=n.za.next();n.Ka.set(r,new EM(t)),n.$a=n.$a.insert(t,r),_p(n.remoteStore,new ds(or(Ju(t.path)),r,"TargetPurposeLimboResolution",fr.ae))}}async function Rs(n,e,t){const r=_e(n),s=[],o=[],u=[];r.ka.isEmpty()||(r.ka.forEach((h,d)=>{u.push(r.Ha(d,e,t).then(p=>{var y;if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(p){s.push(p);const v=iv.Yi(d.targetId,p);o.push(v)}}))}),await Promise.all(u),r.La.p_(s),await async function(d,p){const y=_e(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>G.forEach(p,x=>G.forEach(x.Hi,R=>y.persistence.referenceDelegate.addReference(v,x.targetId,R)).next(()=>G.forEach(x.Ji,R=>y.persistence.referenceDelegate.removeReference(v,x.targetId,R)))))}catch(v){if(!Ga(v))throw v;le(sv,"Failed to update sequence numbers: "+v)}for(const v of p){const x=v.targetId;if(!v.fromCache){const R=y.Ts.get(x),N=R.snapshotVersion,j=R.withLastLimboFreeSnapshotVersion(N);y.Ts=y.Ts.insert(x,j)}}}(r.localStore,o))}async function kM(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){le(Qa,"User change. New user:",e.toKey());const r=await R1(t.localStore,e);t.currentUser=e,function(o,u){o.Ga.forEach(h=>{h.forEach(d=>{d.reject(new ae(Y.CANCELLED,u))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rs(t,r.Rs)}}function OM(n,e){const t=_e(n),r=t.Ka.get(e);if(r&&r.Ba)return He().add(r.key);{let s=He();const o=t.qa.get(e);if(!o)return s;for(const u of o){const h=t.ka.get(u);s=s.unionWith(h.view.ba)}return s}}async function VM(n,e){const t=_e(n),r=await qm(t.localStore,e.query,!0),s=e.view.Oa(r);return t.isPrimaryClient&&Y_(t,e.targetId,s.Ma),s}async function MM(n,e){const t=_e(n);return P1(t.localStore,e).then(r=>Rs(t,r))}async function LM(n,e,t,r){const s=_e(n),o=await function(h,d){const p=_e(h),y=_e(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",v=>y.Ln(v,d).next(x=>x?p.localDocuments.getDocuments(v,x):G.resolve(null)))}(s.localStore,e);o!==null?(t==="pending"?await rc(s.remoteStore):t==="acknowledged"||t==="rejected"?(_v(s,e,r||null),yv(s,e),function(h,d){_e(_e(h).mutationQueue).qn(d)}(s.localStore,e)):Ee(),await Rs(s,o)):le(Qa,"Cannot apply mutation batch with id: "+e)}async function UM(n,e){const t=_e(n);if(vp(t),bv(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await sI(t,r.toArray());t.ja=!0,await Q_(t.remoteStore,!0);for(const o of s)_p(t.remoteStore,o)}else if(e===!1&&t.ja!==!1){const r=[];let s=Promise.resolve();t.qa.forEach((o,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):s=s.then(()=>(Bu(t,u),ju(t.localStore,u,!0))),zu(t.remoteStore,u)}),await s,await sI(t,r),function(u){const h=_e(u);h.Ka.forEach((d,p)=>{zu(h.remoteStore,p)}),h.Ua.Dr(),h.Ka=new Map,h.$a=new Rt(ye.comparator)}(t),t.ja=!1,await Q_(t.remoteStore,!1)}}async function sI(n,e,t){const r=_e(n),s=[],o=[];for(const u of e){let h;const d=r.qa.get(u);if(d&&d.length!==0){h=await Uu(r.localStore,or(d[0]));for(const p of d){const y=r.ka.get(p),v=await VM(r,y);v.snapshot&&o.push(v.snapshot)}}else{const p=await N1(r.localStore,u);h=await Uu(r.localStore,p),await gv(r,Z1(p),u,!1,h.resumeToken)}s.push(h)}return r.La.p_(o),s}function Z1(n){return OS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function jM(n){return function(t){return _e(_e(t).persistence).zi()}(_e(n).localStore)}async function zM(n,e,t,r){const s=_e(n);if(s.ja)return void le(Qa,"Ignoring unexpected query state notification.");const o=s.qa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const u=await P1(s.localStore,MS(o[0])),h=bd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Yt.EMPTY_BYTE_STRING);await Rs(s,u,h);break}case"rejected":await ju(s.localStore,e,!0),Bu(s,e,r);break;default:Ee()}}async function FM(n,e,t){const r=vp(n);if(r.ja){for(const s of e){if(r.qa.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){le(Qa,"Adding an already active target "+s);continue}const o=await N1(r.localStore,s),u=await Uu(r.localStore,o);await gv(r,Z1(o),u.targetId,!1,u.resumeToken),_p(r.remoteStore,u)}for(const s of t)r.qa.has(s)&&await ju(r.localStore,s,!1).then(()=>{zu(r.remoteStore,s),Bu(r,s)}).catch(Ha)}}function vp(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RM.bind(null,e),e.La.p_=gM.bind(null,e.eventManager),e.La.Ja=yM.bind(null,e.eventManager),e}function bv(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DM.bind(null,e),e}function BM(n,e,t){const r=_e(n);(async function(o,u,h){try{const d=await u.getMetadata();if(await function(R,N){const j=_e(R),U=tn(N.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",B=>j.Yr.getBundleMetadata(B,N.id)).then(B=>!!B&&B.createTime.compareTo(U)>=0)}(o.localStore,d))return await u.close(),h._completeWith(function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}}(d)),Promise.resolve(new Set);h._updateProgress(G1(d));const p=new vM(d,o.localStore,u.serializer);let y=await u.Ya();for(;y;){const x=await p.Aa(y);x&&h._updateProgress(x),y=await u.Ya()}const v=await p.complete();return await Rs(o,v.ma,void 0),await function(R,N){const j=_e(R);return j.persistence.runTransaction("Save bundle","readwrite",U=>j.Yr.saveBundleMetadata(U,N))}(o.localStore,d),h._completeWith(v.progress),Promise.resolve(v.Va)}catch(d){return Vi(Qa,`Loading bundle failed with ${d}`),h._failWith(d),Promise.resolve(new Set)}})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wd(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return S1(this.persistence,new A1,e.initialUser,this.serializer)}Xa(e){return new tv(yp.ri,this.serializer)}Za(e){return new L1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ed.provider={build:()=>new ed};class qM extends ed{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ae(this.persistence.referenceDelegate instanceof Bm);const r=this.persistence.referenceDelegate.garbageCollector;return new b1(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new tv(r=>Bm.ri(r,t),this.serializer)}}class J1 extends ed{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await bv(this.ru.syncEngine),await rc(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return S1(this.persistence,new A1,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new b1(r,e.asyncQueue,t)}nu(e,t){const r=new ZO(t,this.persistence);return new XO(e.asyncQueue,r)}Xa(e){const t=rv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Wn.withCacheSize(this.cacheSizeBytes):Wn.DEFAULT;return new nv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,U1(),bm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new L1}}class HM extends J1{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof a_&&(this.sharedClientState.syncEngine={uo:LM.bind(null,t),co:zM.bind(null,t),lo:FM.bind(null,t),zi:jM.bind(null,t),ao:MM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await UM(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=U1();if(!a_.D(t))throw new ae(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new a_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class td{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kM.bind(null,this.syncEngine),await Q_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pM}()}createDatastore(e){const t=wd(e.databaseInfo.databaseId),r=function(o){return new X4(o)}(e.databaseInfo);return function(o,u,h,d){return new tM(o,u,h,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,u,h){return new rM(r,s,o,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>iI(this.syncEngine,t,0),function(){return Xx.D()?new Xx:new $4}())}createSyncEngine(e,t){return function(s,o,u,h,d,p,y){const v=new wM(s,o,u,h,d,p);return y&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=_e(s);le(nl,"RemoteStore shutting down."),o.W_.add(5),await nc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}td.provider={build:()=>new td};function aI(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):en("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new Bn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const s=await this.lu(r);return new _M(JSON.parse(s),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ae(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(s,o){const u=_e(s),h={documents:o.map(v=>Zh(u.serializer,v))},d=await u.Co("BatchGetDocuments",u.serializer.databaseId,et.emptyPath(),h,o.length),p=new Map;d.forEach(v=>{const x=i4(u.serializer,v);p.set(x.key.toString(),x)});const y=[];return o.forEach(v=>{const x=p.get(v.toString());Ae(!!x),y.push(x)}),y}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new tc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const s=ye.fromPath(r);this.mutations.push(new G0(s,this.precondition(s)))}),await async function(r,s){const o=_e(r),u={writes:s.map(h=>Jh(o.serializer,h))};await o.bo("Commit",o.serializer.databaseId,et.emptyPath(),u)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ee();t=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ae(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ce.min())?Vt.exists(!1):Vt.updateTime(t):Vt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ce.min()))throw new ae(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vt.updateTime(t)}return Vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t,r,s,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=o,this.Tu=r.maxAttempts,this.a_=new ov(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new KM(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Au(s)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!md(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!WS(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="FirestoreClient";class QM{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Dn.UNAUTHENTICATED,this.clientId=eS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{le(La,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(le(La,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=sc(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function l_(n,e){n.asyncQueue.verifyOperationInProgress(),le(La,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await R1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function oI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Ev(n);le(La,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Jx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Jx(e.remoteStore,s)),n._onlineComponents=e}async function Ev(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(La,"Using user provided OfflineComponentProvider");try{await l_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Vi("Error using user provided cache. Falling back to memory cache: "+t),await l_(n,new ed)}}else le(La,"Using default OfflineComponentProvider"),await l_(n,new qM(void 0));return n._offlineComponents}async function Ep(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(La,"Using user provided OnlineComponentProvider"),await oI(n,n._uninitializedComponentsProvider._online)):(le(La,"Using default OnlineComponentProvider"),await oI(n,new td))),n._onlineComponents}function eR(n){return Ev(n).then(e=>e.persistence)}function wv(n){return Ev(n).then(e=>e.localStore)}function tR(n){return Ep(n).then(e=>e.remoteStore)}function Tv(n){return Ep(n).then(e=>e.syncEngine)}function WM(n){return Ep(n).then(e=>e.datastore)}async function qu(n){const e=await Ep(n),t=e.eventManager;return t.onListen=TM.bind(null,e.syncEngine),t.onUnlisten=IM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=AM.bind(null,e.syncEngine),t}function YM(n){return n.asyncQueue.enqueue(async()=>{const e=await eR(n),t=await tR(n);return e.setNetworkEnabled(!0),function(s){const o=_e(s);return o.W_.delete(0),Td(o)}(t)})}function XM(n){return n.asyncQueue.enqueue(async()=>{const e=await eR(n),t=await tR(n);return e.setNetworkEnabled(!1),async function(s){const o=_e(s);o.W_.add(0),await nc(o),o.j_.set("Offline")}(t)})}function ZM(n,e){const t=new Bn;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,u){try{const h=await function(p,y){const v=_e(p);return v.persistence.runTransaction("read document","readonly",x=>v.localDocuments.getDocument(x,y))}(s,o);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new ae(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const d=sc(h,`Failed to get document '${o} from cache`);u.reject(d)}}(await wv(n),e,t)),t.promise}function nR(n,e,t={}){const r=new Bn;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,p){const y=new bp({next:x=>{y.su(),u.enqueueAndForget(()=>fv(o,v));const R=x.docs.has(h);!R&&x.fromCache?p.reject(new ae(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&x.fromCache&&d&&d.source==="server"?p.reject(new ae(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),v=new pv(Ju(h.path),y,{includeMetadataChanges:!0,Ta:!0});return dv(o,v)}(await qu(n),n.asyncQueue,e,t,r)),r.promise}function JM(n,e){const t=new Bn;return n.asyncQueue.enqueueAndForget(async()=>async function(s,o,u){try{const h=await qm(s,o,!0),d=new Q1(o,h.gs),p=d.Sa(h.documents),y=d.applyChanges(p,!1);u.resolve(y.snapshot)}catch(h){const d=sc(h,`Failed to execute query '${o} against cache`);u.reject(d)}}(await wv(n),e,t)),t.promise}function rR(n,e,t={}){const r=new Bn;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,d,p){const y=new bp({next:x=>{y.su(),u.enqueueAndForget(()=>fv(o,v)),x.fromCache&&d.source==="server"?p.reject(new ae(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),v=new pv(h,y,{includeMetadataChanges:!0,Ta:!0});return dv(o,v)}(await qu(n),n.asyncQueue,e,t,r)),r.promise}function e6(n,e){const t=new bp(e);return n.asyncQueue.enqueueAndForget(async()=>function(s,o){_e(s).ia.add(o),o.next()}(await qu(n),t)),()=>{t.su(),n.asyncQueue.enqueueAndForget(async()=>function(s,o){_e(s).ia.delete(o)}(await qu(n),t))}}function t6(n,e,t,r){const s=function(u,h){let d;return d=typeof u=="string"?XS().encode(u):u,function(y,v){return new GM(y,v)}(function(y,v){if(y instanceof Uint8Array)return aI(y,v);if(y instanceof ArrayBuffer)return aI(new Uint8Array(y),v);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),h)}(t,wd(e));n.asyncQueue.enqueueAndForget(async()=>{BM(await Tv(n),s,r)})}function n6(n,e){return n.asyncQueue.enqueue(async()=>function(r,s){const o=_e(r);return o.persistence.runTransaction("Get named query","readonly",u=>o.Yr.getNamedQuery(u,s))}(await wv(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n,e,t){if(!t)throw new ae(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sR(n,e,t,r){if(e===!0&&r===!0)throw new ae(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uI(n){if(!ye.isDocumentKey(n))throw new ae(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cI(n){if(ye.isDocumentKey(n))throw new ae(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee()}function yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wp(n);throw new ae(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function aR(n,e){if(e<=0)throw new ae(Y.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="firestore.googleapis.com",hI=!0;class dI{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oR,this.ssl=hI}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hI;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=g1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T4)throw new ae(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ae(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xd{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FO;switch(r.type){case"firstParty":return new GO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=lI.get(t);r&&(le("ComponentProvider","Removing Datastore"),lI.delete(t),r.terminate())}(this),Promise.resolve()}}function r6(n,e,t,r={}){var s;const o=(n=yt(n,xd))._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),h=`${e}:${t}`;o.host!==oR&&o.host!==h&&Vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:h,ssl:!1,emulatorOptions:r});if(!Sa(d,u)&&(n._setSettings(d),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=Dn.MOCK_USER;else{p=ak(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ae(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Dn(v)}n._authCredentials=new BO(new JA(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lr=class lR{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lR(this.firestore,e,this._query)}},qt=class uR{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uR(this.firestore,e,this._key)}},xa=class cR extends lr{constructor(e,t,r){super(e,t,Ju(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new ye(e))}withConverter(e){return new cR(this.firestore,e,this._path)}};function hR(n,e,...t){if(n=Ve(n),xv("collection","path",e),n instanceof xd){const r=et.fromString(e,...t);return cI(r),new xa(n,null,r)}{if(!(n instanceof qt||n instanceof xa))throw new ae(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return cI(r),new xa(n.firestore,null,r)}}function i6(n,e){if(n=yt(n,xd),xv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ae(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new lr(n,null,function(r){return new Is(et.emptyPath(),r)}(e))}function $m(n,e,...t){if(n=Ve(n),arguments.length===1&&(e=eS.newId()),xv("doc","path",e),n instanceof xd){const r=et.fromString(e,...t);return uI(r),new qt(n,null,new ye(r))}{if(!(n instanceof qt||n instanceof xa))throw new ae(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return uI(r),new qt(n.firestore,n instanceof xa?n.converter:null,new ye(r))}}function dR(n,e){return n=Ve(n),e=Ve(e),(n instanceof qt||n instanceof xa)&&(e instanceof qt||e instanceof xa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function fR(n,e){return n=Ve(n),e=Ve(e),n instanceof lr&&e instanceof lr&&n.firestore===e.firestore&&yd(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="AsyncQueue";class mI{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new ov(this,"async_queue_retry"),this.bu=()=>{const r=bm();r&&le(fI,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Bn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ga(e))throw e;le(fI,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw en("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=hv.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ee()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function X_(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(n,["next","error","complete"])}class s6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=-1;let nn=class extends xd{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new mI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mI(e),this._firestoreClient=void 0,await e}}};function Xn(n){if(n._terminated)throw new ae(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mR(n),n._firestoreClient}function mR(n){var e,t,r;const s=n._freezeSettings(),o=function(h,d,p,y){return new SV(h,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,iR(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new QM(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(n._componentsProvider))}function o6(n,e){Vi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return pR(n,td.provider,{build:r=>new J1(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function l6(n){Vi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();pR(n,td.provider,{build:t=>new HM(t,e.cacheSizeBytes)})}function pR(n,e,t){if((n=yt(n,nn))._firestoreClient||n._terminated)throw new ae(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ae(Y.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},mR(n)}function u6(n){if(n._initialized&&!n._terminated)throw new ae(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Bn;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Pi.D())return Promise.resolve();const s=r+I1;await Pi.delete(s)}(rv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function c6(n){return function(t){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>NM(await Tv(t),r)),r.promise}(Xn(n=yt(n,nn)))}function h6(n){return YM(Xn(n=yt(n,nn)))}function d6(n){return XM(Xn(n=yt(n,nn)))}function f6(n,e){const t=Xn(n=yt(n,nn)),r=new s6;return t6(t,n._databaseId,e,r),r}function m6(n,e){return n6(Xn(n=yt(n,nn)),e).then(t=>t?new lr(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Li(Yt.fromBase64String(e))}catch(t){throw new ae(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Li(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=/^__.*__$/;class g6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new ec(e,this.data,t,this.fieldTransforms)}}class gR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class xp{constructor(e,t,r,s,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new xp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Qm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(yR(this.Lu)&&p6.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class y6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wd(e)}ju(e,t,r,s=!1){return new xp({Lu:e,methodName:t,zu:r,path:Ot.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dl(n){const e=n._freezeSettings(),t=wd(n._databaseId);return new y6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ip(n,e,t,r,s,o={}){const u=n.ju(o.merge||o.mergeFields?2:0,e,t,s);Pv("Data must be an object, but it was:",u,r);const h=bR(r,u);let d,p;if(o.merge)d=new mr(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const x=Z_(e,v,t);if(!u.contains(x))throw new ae(Y.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);wR(y,x)||y.push(x)}d=new mr(y),p=u.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=u.fieldTransforms;return new g6(new zn(h),d,p)}class Id extends hl{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}function _R(n,e,t){return new xp({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Av extends hl{_toFieldTransform(e){return new vd(e.path,new Vu)}isEqual(e){return e instanceof Av}}class Sv extends hl{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=_R(this,e,!0),r=this.Hu.map(o=>fl(o,t)),s=new Xo(r);return new vd(e.path,s)}isEqual(e){return e instanceof Sv&&Sa(this.Hu,e.Hu)}}class Rv extends hl{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=_R(this,e,!0),r=this.Hu.map(o=>fl(o,t)),s=new Zo(r);return new vd(e.path,s)}isEqual(e){return e instanceof Rv&&Sa(this.Hu,e.Hu)}}class Cv extends hl{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new Mu(e.serializer,BS(e.serializer,this.Ju));return new vd(e.path,t)}isEqual(e){return e instanceof Cv&&this.Ju===e.Ju}}function Dv(n,e,t,r){const s=n.ju(1,e,t);Pv("Data must be an object, but it was:",s,r);const o=[],u=zn.empty();Ka(r,(d,p)=>{const y=kv(e,d,t);p=Ve(p);const v=s.Ku(y);if(p instanceof Id)o.push(y);else{const x=fl(p,v);x!=null&&(o.push(y),u.set(y,x))}});const h=new mr(o);return new gR(u,h,s.fieldTransforms)}function Nv(n,e,t,r,s,o){const u=n.ju(1,e,t),h=[Z_(e,r,t)],d=[s];if(o.length%2!=0)throw new ae(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)h.push(Z_(e,o[x])),d.push(o[x+1]);const p=[],y=zn.empty();for(let x=h.length-1;x>=0;--x)if(!wR(p,h[x])){const R=h[x];let N=d[x];N=Ve(N);const j=u.Ku(R);if(N instanceof Id)p.push(R);else{const U=fl(N,j);U!=null&&(p.push(R),y.set(R,U))}}const v=new mr(p);return new gR(y,v,u.fieldTransforms)}function vR(n,e,t,r=!1){return fl(t,n.ju(r?4:3,e))}function fl(n,e){if(ER(n=Ve(n)))return Pv("Unsupported field value:",e,n),bR(n,e);if(n instanceof hl)return function(r,s){if(!yR(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const h of r){let d=fl(h,s.Uu(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Mt.fromDate(r);return{timestampValue:Lu(s.serializer,o)}}if(r instanceof Mt){const o=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lu(s.serializer,o)}}if(r instanceof Tp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Li)return{bytesValue:e1(s.serializer,r._byteString)};if(r instanceof qt){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Y0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Iv)return function(u,h){return{mapValue:{fields:{[j0]:{stringValue:z0},[Pu]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.Wu("VectorValues must only contain numeric values.");return H0(h.serializer,p)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${wp(r)}`)}(n,e)}function bR(n,e){const t={};return yS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(n,(r,s)=>{const o=fl(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function ER(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof Tp||n instanceof Li||n instanceof qt||n instanceof hl||n instanceof Iv)}function Pv(n,e,t){if(!ER(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=wp(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Z_(n,e,t){if((e=Ve(e))instanceof Ua)return e._internalPath;if(typeof e=="string")return kv(n,e);throw Qm("Field path arguments must be of type string or ",n,!1,void 0,t)}const _6=new RegExp("[~\\*/\\[\\]]");function kv(n,e,t){if(e.search(_6)>=0)throw Qm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ua(...e.split("."))._internalPath}catch{throw Qm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qm(n,e,t,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${s}`),d+=")"),new ae(Y.INVALID_ARGUMENT,h+n+d)}function wR(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ap("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class v6 extends nd{data(){return super.data()}}function Ap(n,e){return typeof e=="string"?kv(n,e):e instanceof Ua?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ov{}class Ad extends Ov{}function ma(n,e,...t){let r=[];e instanceof Ov&&r.push(e),r=r.concat(t),function(o){const u=o.filter(d=>d instanceof Vv).length,h=o.filter(d=>d instanceof Sp).length;if(u>1||u>0&&h>0)throw new ae(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Sp extends Ad{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sp(e,t,r)}_apply(e){const t=this._parse(e);return IR(e._query,t),new lr(e.firestore,e.converter,U_(e._query,t))}_parse(e){const t=dl(e.firestore);return function(o,u,h,d,p,y,v){let x;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ae(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){gI(v,y);const N=[];for(const j of v)N.push(pI(d,o,j));x={arrayValue:{values:N}}}else x=pI(d,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||gI(v,y),x=vR(h,u,v,y==="in"||y==="not-in");return tt.create(p,y,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function b6(n,e,t){const r=e,s=Ap("where",n);return Sp._create(s,r,t)}class Vv extends Ov{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:bt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,o){let u=s;const h=o.getFlattenedFilters();for(const d of h)IR(u,d),u=U_(u,d)}(e._query,t),new lr(e.firestore,e.converter,U_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mv extends Ad{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Mv(e,t)}_apply(e){const t=function(s,o,u){if(s.startAt!==null)throw new ae(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ae(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xh(o,u)}(e._query,this._field,this._direction);return new lr(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new Is(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function E6(n,e="asc"){const t=e,r=Ap("orderBy",n);return Mv._create(r,t)}class Rp extends Ad{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Rp(e,t,r)}_apply(e){return new lr(e.firestore,e.converter,Um(e._query,this._limit,this._limitType))}}function w6(n){return aR("limit",n),Rp._create("limit",n,"F")}function T6(n){return aR("limitToLast",n),Rp._create("limitToLast",n,"L")}class Cp extends Ad{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Cp(e,t,r)}_apply(e){const t=xR(e,this.type,this._docOrFields,this._inclusive);return new lr(e.firestore,e.converter,function(s,o){return new Is(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)}(e._query,t))}}function x6(...n){return Cp._create("startAt",n,!0)}function I6(...n){return Cp._create("startAfter",n,!1)}class Dp extends Ad{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Dp(e,t,r)}_apply(e){const t=xR(e,this.type,this._docOrFields,this._inclusive);return new lr(e.firestore,e.converter,function(s,o){return new Is(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,o)}(e._query,t))}}function A6(...n){return Dp._create("endBefore",n,!1)}function S6(...n){return Dp._create("endAt",n,!0)}function xR(n,e,t,r){if(t[0]=Ve(t[0]),t[0]instanceof nd)return function(o,u,h,d,p){if(!d)throw new ae(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const y=[];for(const v of _u(o))if(v.field.isKeyField())y.push(Wo(u,d.key));else{const x=d.data.field(v.field);if(cp(x))throw new ae(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const R=v.field.canonicalString();throw new ae(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(x)}return new Va(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=dl(n.firestore);return function(u,h,d,p,y,v){const x=u.explicitOrderBy;if(y.length>x.length)throw new ae(Y.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let N=0;N<y.length;N++){const j=y[N];if(x[N].field.isKeyField()){if(typeof j!="string")throw new ae(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof j}`);if(!B0(u)&&j.indexOf("/")!==-1)throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${j}' contains a slash.`);const U=u.path.child(et.fromString(j));if(!ye.isDocumentKey(U))throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const B=new ye(U);R.push(Wo(h,B))}else{const U=vR(d,p,j);R.push(U)}}return new Va(R,v)}(n._query,n.firestore._databaseId,s,e,t,r)}}function pI(n,e,t){if(typeof(t=Ve(t))=="string"){if(t==="")throw new ae(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B0(e)&&t.indexOf("/")!==-1)throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(et.fromString(t));if(!ye.isDocumentKey(r))throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wo(n,new ye(r))}if(t instanceof qt)return Wo(n,t._key);throw new ae(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wp(t)}.`)}function gI(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IR(n,e){const t=function(s,o){for(const u of s)for(const h of u.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Lv{convertValue(e,t="none"){switch(ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ka(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Pu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Pt(u.doubleValue));return new Iv(o)}convertGeoPoint(e){return new Tp(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qh(e));default:return null}}convertTimestamp(e){const t=bs(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=et.fromString(e);Ae(h1(r));const s=new Pa(r.get(1),r.get(3)),o=new ye(r.popFirst(5));return s.isEqual(t)||en(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class R6 extends Lv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ws=class extends nd{constructor(e,t,r,s,o,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ap("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},kh=class extends ws{data(e={}){return super.data(e)}},ja=class{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kh(this._firestore,this._userDataWriter,r.key,r,new Bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(h=>{const d=new kh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Bo(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new kh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Bo(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:C6(h.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function C6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}function AR(n,e){return n instanceof ws&&e instanceof ws?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ja&&e instanceof ja&&n._firestore===e._firestore&&fR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(n){n=yt(n,qt);const e=yt(n.firestore,nn);return nR(Xn(e),n._key).then(t=>Uv(e,n,t))}class ml extends Lv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function N6(n){n=yt(n,qt);const e=yt(n.firestore,nn),t=Xn(e),r=new ml(e);return ZM(t,n._key).then(s=>new ws(e,r,n._key,s,new Bo(s!==null&&s.hasLocalMutations,!0),n.converter))}function P6(n){n=yt(n,qt);const e=yt(n.firestore,nn);return nR(Xn(e),n._key,{source:"server"}).then(t=>Uv(e,n,t))}function k6(n){n=yt(n,lr);const e=yt(n.firestore,nn),t=Xn(e),r=new ml(e);return TR(n._query),rR(t,n._query).then(s=>new ja(e,r,n,s))}function O6(n){n=yt(n,lr);const e=yt(n.firestore,nn),t=Xn(e),r=new ml(e);return JM(t,n._query).then(s=>new ja(e,r,n,s))}function V6(n){n=yt(n,lr);const e=yt(n.firestore,nn),t=Xn(e),r=new ml(e);return rR(t,n._query,{source:"server"}).then(s=>new ja(e,r,n,s))}function yI(n,e,t){n=yt(n,qt);const r=yt(n.firestore,nn),s=Np(n.converter,e,t);return Sd(r,[Ip(dl(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Vt.none())])}function _I(n,e,t,...r){n=yt(n,qt);const s=yt(n.firestore,nn),o=dl(s);let u;return u=typeof(e=Ve(e))=="string"||e instanceof Ua?Nv(o,"updateDoc",n._key,e,t,r):Dv(o,"updateDoc",n._key,e),Sd(s,[u.toMutation(n._key,Vt.exists(!0))])}function M6(n){return Sd(yt(n.firestore,nn),[new tc(n._key,Vt.none())])}function L6(n,e){const t=yt(n.firestore,nn),r=$m(n),s=Np(n.converter,e);return Sd(t,[Ip(dl(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Vt.exists(!1))]).then(()=>r)}function SR(n,...e){var t,r,s;n=Ve(n);let o={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||X_(e[u])||(o=e[u],u++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(X_(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[u+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let d,p,y;if(n instanceof qt)p=yt(n.firestore,nn),y=Ju(n._key.path),d={next:v=>{e[u]&&e[u](Uv(p,n,v))},error:e[u+1],complete:e[u+2]};else{const v=yt(n,lr);p=yt(v.firestore,nn),y=v._query;const x=new ml(p);d={next:R=>{e[u]&&e[u](new ja(p,x,v,R))},error:e[u+1],complete:e[u+2]},TR(n._query)}return function(x,R,N,j){const U=new bp(j),B=new pv(R,U,N);return x.asyncQueue.enqueueAndForget(async()=>dv(await qu(x),B)),()=>{U.su(),x.asyncQueue.enqueueAndForget(async()=>fv(await qu(x),B))}}(Xn(p),y,h,d)}function U6(n,e){return e6(Xn(n=yt(n,nn)),X_(e)?e:{next:e})}function Sd(n,e){return function(r,s){const o=new Bn;return r.asyncQueue.enqueueAndForget(async()=>SM(await Tv(r),s,o)),o.promise}(Xn(n),e)}function Uv(n,e,t){const r=t.docs.get(e._key),s=new ml(n);return new ws(n,s,e._key,r,new Bo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z6=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dl(e)}set(e,t,r){this._verifyNotCommitted();const s=va(e,this._firestore),o=Np(s.converter,t,r),u=Ip(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,Vt.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const o=va(e,this._firestore);let u;return u=typeof(t=Ve(t))=="string"||t instanceof Ua?Nv(this._dataReader,"WriteBatch.update",o._key,t,r,s):Dv(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(u.toMutation(o._key,Vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=va(e,this._firestore);return this._mutations=this._mutations.concat(new tc(t._key,Vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function va(n,e){if((n=Ve(n)).firestore!==e)throw new ae(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dl(e)}get(e){const t=va(e,this._firestore),r=new R6(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||s.length!==1)return Ee();const o=s[0];if(o.isFoundDocument())return new nd(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new nd(this._firestore,r,t._key,null,t.converter);throw Ee()})}set(e,t,r){const s=va(e,this._firestore),o=Np(s.converter,t,r),u=Ip(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,u),this}update(e,t,r,...s){const o=va(e,this._firestore);let u;return u=typeof(t=Ve(t))=="string"||t instanceof Ua?Nv(this._dataReader,"Transaction.update",o._key,t,r,s):Dv(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,u),this}delete(e){const t=va(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B6=class extends F6{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=va(e,this._firestore),r=new ml(this._firestore);return super.get(e).then(s=>new ws(this._firestore,r,t._key,s._document,new Bo(!1,!1),t.converter))}};function q6(n,e,t){n=yt(n,nn);const r=Object.assign(Object.assign({},j6),t);return function(o){if(o.maxAttempts<1)throw new ae(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,h){const d=new Bn;return o.asyncQueue.enqueueAndForget(async()=>{const p=await WM(o);new $M(o.asyncQueue,p,h,u,d).Iu()}),d.promise}(Xn(n),s=>e(new B6(n,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(){return new Id("deleteField")}function G6(){return new Av("serverTimestamp")}function K6(...n){return new Sv("arrayUnion",n)}function $6(...n){return new Rv("arrayRemove",n)}function Q6(n){return new Cv("increment",n)}(function(e,t=!0){(function(s){Zu=s})(Ba),Da(new Oi("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),h=new nn(new qO(r.getProvider("auth-internal")),new KO(u,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ae(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(p.options.projectId,y)}(u,s),u);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),ai(YT,XT,e),ai(YT,XT,"esm2017")})();const W6="@firebase/firestore-compat",Y6="0.3.44";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){if(typeof Uint8Array>"u")throw new ae("unimplemented","Uint8Arrays are not available in this environment.")}function bI(){if(!IV())throw new ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}let RR=class J_{constructor(e){this._delegate=e}static fromBase64String(e){return bI(),new J_(Li.fromBase64String(e))}static fromUint8Array(e){return vI(),new J_(Li.fromUint8Array(e))}toBase64(){return bI(),this._delegate.toBase64()}toUint8Array(){return vI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(n){return X6(n,["next","error","complete"])}function X6(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{enableIndexedDbPersistence(e,t){return o6(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return l6(e._delegate)}clearIndexedDbPersistence(e){return u6(e._delegate)}}class CR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){r6(this._delegate,e,t,r)}enableNetwork(){return h6(this._delegate)}disableNetwork(){return d6(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return c6(this._delegate)}onSnapshotsInSync(e){return U6(this._delegate,e)}get app(){if(!this._appCompat)throw new ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hu(this,hR(this._delegate,e))}catch(t){throw sr(t,"collection()","Firestore.collection()")}}doc(e){try{return new Kr(this,$m(this._delegate,e))}catch(t){throw sr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ir(this,i6(this._delegate,e))}catch(t){throw sr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return q6(this._delegate,t=>e(new DR(this,t)))}batch(){return Xn(this._delegate),new NR(new z6(this._delegate,e=>Sd(this._delegate,e)))}loadBundle(e){return f6(this._delegate,e)}namedQuery(e){return m6(this._delegate,e).then(t=>t?new ir(this,t):null)}}class Pp extends Lv{constructor(e){super(),this.firestore=e}convertBytes(e){return new RR(new Li(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Kr.forKey(t,this.firestore,null)}}function J6(n){jO(n)}class DR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Pp(e)}get(e){const t=qo(e);return this._delegate.get(t).then(r=>new rd(this._firestore,new ws(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=qo(e);return r?(jv("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const o=qo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...s),this}delete(e){const t=qo(e);return this._delegate.delete(t),this}}class NR{constructor(e){this._delegate=e}set(e,t,r){const s=qo(e);return r?(jv("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const o=qo(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...s),this}delete(e){const t=qo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class rl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new kh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new id(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=rl.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let o=s.get(t);return o||(o=new rl(e,new Pp(e),t),s.set(t,o)),o}}rl.INSTANCES=new WeakMap;class Kr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Pp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Kr(t,new qt(t._delegate,r,new ye(e)))}static forKey(e,t,r){return new Kr(t,new qt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hu(this.firestore,hR(this._delegate,e))}catch(t){throw sr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ve(e),e instanceof qt?dR(this._delegate,e):!1}set(e,t){t=jv("DocumentReference.set",t);try{return t?yI(this._delegate,e,t):yI(this._delegate,e)}catch(r){throw sr(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?_I(this._delegate,e):_I(this._delegate,e,t,...r)}catch(s){throw sr(s,"updateDoc()","DocumentReference.update()")}}delete(){return M6(this._delegate)}onSnapshot(...e){const t=PR(e),r=kR(e,s=>new rd(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return SR(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=N6(this._delegate):(e==null?void 0:e.source)==="server"?t=P6(this._delegate):t=D6(this._delegate),t.then(r=>new rd(this.firestore,new ws(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Kr(this.firestore,e?this._delegate.withConverter(rl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function sr(n,e,t){return n.message=n.message.replace(e,t),n}function PR(n){for(const e of n)if(typeof e=="object"&&!e0(e))return e;return{}}function kR(n,e){var t,r;let s;return e0(n[0])?s=n[0]:e0(n[1])?s=n[1]:typeof n[0]=="function"?s={next:n[0],error:n[1],complete:n[2]}:s={next:n[1],error:n[2],complete:n[3]},{next:o=>{s.next&&s.next(e(o))},error:(t=s.error)===null||t===void 0?void 0:t.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class rd{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Kr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return AR(this._delegate,e._delegate)}}class id extends rd{data(e){const t=this._delegate.data(e);return this._delegate._converter||zO(t!==void 0),t}}class ir{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Pp(e)}where(e,t,r){try{return new ir(this.firestore,ma(this._delegate,b6(e,t,r)))}catch(s){throw sr(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ir(this.firestore,ma(this._delegate,E6(e,t)))}catch(r){throw sr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ir(this.firestore,ma(this._delegate,w6(e)))}catch(t){throw sr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ir(this.firestore,ma(this._delegate,T6(e)))}catch(t){throw sr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ir(this.firestore,ma(this._delegate,x6(...e)))}catch(t){throw sr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ir(this.firestore,ma(this._delegate,I6(...e)))}catch(t){throw sr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ir(this.firestore,ma(this._delegate,A6(...e)))}catch(t){throw sr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ir(this.firestore,ma(this._delegate,S6(...e)))}catch(t){throw sr(t,"endAt()","Query.endAt()")}}isEqual(e){return fR(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=O6(this._delegate):(e==null?void 0:e.source)==="server"?t=V6(this._delegate):t=k6(this._delegate),t.then(r=>new t0(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=PR(e),r=kR(e,s=>new t0(this.firestore,new ja(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return SR(this._delegate,t,r)}withConverter(e){return new ir(this.firestore,e?this._delegate.withConverter(rl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class e5{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new id(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class t0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ir(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new id(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new e5(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new id(this._firestore,r))})}isEqual(e){return AR(this._delegate,e._delegate)}}class Hu extends ir{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Kr(this.firestore,e):null}doc(e){try{return e===void 0?new Kr(this.firestore,$m(this._delegate)):new Kr(this.firestore,$m(this._delegate,e))}catch(t){throw sr(t,"doc()","CollectionReference.doc()")}}add(e){return L6(this._delegate,e).then(t=>new Kr(this.firestore,t))}isEqual(e){return dR(this._delegate,e._delegate)}withConverter(e){return new Hu(this.firestore,e?this._delegate.withConverter(rl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qo(n){return yt(n,qt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(...e){this._delegate=new Ua(...e)}static documentId(){return new zv(Ot.keyField().canonicalString())}isEqual(e){return e=Ve(e),e instanceof Ua?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{static serverTimestamp(){const e=G6();return e._methodName="FieldValue.serverTimestamp",new zo(e)}static delete(){const e=H6();return e._methodName="FieldValue.delete",new zo(e)}static arrayUnion(...e){const t=K6(...e);return t._methodName="FieldValue.arrayUnion",new zo(t)}static arrayRemove(...e){const t=$6(...e);return t._methodName="FieldValue.arrayRemove",new zo(t)}static increment(e){const t=Q6(e);return t._methodName="FieldValue.increment",new zo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5={Firestore:CR,GeoPoint:Tp,Timestamp:Mt,Blob:RR,Transaction:DR,WriteBatch:NR,DocumentReference:Kr,DocumentSnapshot:rd,Query:ir,QueryDocumentSnapshot:id,QuerySnapshot:t0,CollectionReference:Hu,FieldPath:zv,FieldValue:zo,setLogLevel:J6,CACHE_SIZE_UNLIMITED:a6};function n5(n,e){n.INTERNAL.registerComponent(new Oi("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},t5)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){n5(n,(e,t)=>new CR(e,t,new Z6)),n.registerVersion(W6,Y6)}r5(qa);function Fv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}const yh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},lu={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function OR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s5=i5,a5=OR,VR=new cl("auth","Firebase",OR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=new sp("@firebase/auth");function o5(n,...e){Wm.logLevel<=Ze.WARN&&Wm.warn(`Auth (${Ba}): ${n}`,...e)}function Em(n,...e){Wm.logLevel<=Ze.ERROR&&Wm.error(`Auth (${Ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(n,...e){throw qv(n,...e)}function vn(n,...e){return qv(n,...e)}function Bv(n,e,t){const r=Object.assign(Object.assign({},a5()),{[e]:t});return new cl("auth","Firebase",r).create(e,{appName:n.name})}function Nn(n){return Bv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ac(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Hn(n,"argument-error"),Bv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return VR.create(n,...e)}function de(n,e,...t){if(!n)throw qv(e,...t)}function Ni(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Em(e),new Error(e)}function li(n,e){n||Ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Hv(){return EI()==="http:"||EI()==="https:"}function EI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hv()||DA()||"connection"in navigator)?navigator.onLine:!0}function u5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=ok()||S0()}get(){return l5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(n,e){li(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=new Rd(3e4,6e4);function Xt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Zt(n,e,t,r,s={}){return LR(n,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const h=Xu(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:d},o);return uk()||(p.referrerPolicy="no-referrer"),MR.fetch()(UR(n,n.config.apiHost,t,h),p)})}async function LR(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},c5),e);try{const s=new f5(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Ah(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ah(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Ah(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Ah(n,"user-disabled",u);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Bv(n,y,p);Hn(n,y)}}catch(s){if(s instanceof ar)throw s;Hn(n,"network-request-failed",{message:String(s)})}}async function Cs(n,e,t,r,s={}){const o=await Zt(n,e,t,r,s);return"mfaPendingCredential"in o&&Hn(n,"multi-factor-auth-required",{_serverResponse:o}),o}function UR(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Gv(n.config,s):`${n.config.apiScheme}://${s}`}function d5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class f5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(vn(this.auth,"network-request-failed")),h5.get())})}}function Ah(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=vn(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(n){return n!==void 0&&n.getResponse!==void 0}function TI(n){return n!==void 0&&n.enterprise!==void 0}class jR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return d5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(n){return(await Zt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function zR(n,e){return Zt(n,"GET","/v2/recaptchaConfig",Xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(n,e){return Zt(n,"POST","/v1/accounts:delete",e)}async function g5(n,e){return Zt(n,"POST","/v1/accounts:update",e)}async function FR(n,e){return Zt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y5(n,e=!1){const t=Ve(n),r=await t.getIdToken(e),s=kp(r);de(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Oh(u_(s.auth_time)),issuedAtTime:Oh(u_(s.iat)),expirationTime:Oh(u_(s.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function u_(n){return Number(n)*1e3}function kp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Em("JWT malformed, contained fewer than 3 sections"),null;try{const s=x0(t);return s?JSON.parse(s):(Em("Failed to decode base64 JWT payload"),null)}catch(s){return Em("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function xI(n){const e=kp(n);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ts(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ar&&_5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function _5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oh(this.lastLoginAt),this.creationTime=Oh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Ts(n,FR(t,{idToken:r}));de(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?BR(o.providerUserInfo):[],h=E5(n.providerData,u),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),y=d?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new n0(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function b5(n){const e=Ve(n);await ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E5(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function BR(n){return n.map(e=>{var{providerId:t}=e,r=Fv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(n,e){const t=await LR(n,{},async()=>{const r=Xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,u=UR(n,s,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",MR.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function T5(n,e){return Zt(n,"POST","/v2/accounts:revokeToken",Xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){de(e.length!==0,"internal-error");const t=xI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await w5(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,u=new bu;return r&&(de(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(de(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bu,this.toJSON())}_performRefresh(){return Ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(n,e){de(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fs{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=Fv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new n0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ts(this,this.stsTokenManager.getToken(this.auth,e));return de(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return y5(this,e)}reload(){return b5(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ad(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kt(this.auth.app))return Promise.reject(Nn(this.auth));const e=await this.getIdToken();return await Ts(this,p5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,u,h,d,p,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,x=(s=t.email)!==null&&s!==void 0?s:void 0,R=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,N=(u=t.photoURL)!==null&&u!==void 0?u:void 0,j=(h=t.tenantId)!==null&&h!==void 0?h:void 0,U=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,B=(p=t.createdAt)!==null&&p!==void 0?p:void 0,te=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:K,emailVerified:ue,isAnonymous:ie,providerData:J,stsTokenManager:O}=t;de(K&&O,e,"internal-error");const T=bu.fromJSON(this.name,O);de(typeof K=="string",e,"internal-error"),pa(v,e.name),pa(x,e.name),de(typeof ue=="boolean",e,"internal-error"),de(typeof ie=="boolean",e,"internal-error"),pa(R,e.name),pa(N,e.name),pa(j,e.name),pa(U,e.name),pa(B,e.name),pa(te,e.name);const w=new fs({uid:K,auth:e,email:x,emailVerified:ue,displayName:v,isAnonymous:ie,photoURL:N,phoneNumber:R,tenantId:j,stsTokenManager:T,createdAt:B,lastLoginAt:te});return J&&Array.isArray(J)&&(w.providerData=J.map(I=>Object.assign({},I))),U&&(w._redirectEventId=U),w}static async _fromIdTokenResponse(e,t,r=!1){const s=new bu;s.updateFromServerResponse(t);const o=new fs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ad(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];de(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?BR(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new bu;h.updateFromIdToken(r);const d=new fs({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new n0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=new Map;function Sr(n){li(n instanceof Function,"Expected a class definition");let e=II.get(n);return e?(li(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,II.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qR.type="NONE";const Gu=qR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(n,e,t){return`firebase:${n}:${e}:${t}`}class Eu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Ko(this.userKey,s.apiKey,o),this.fullPersistenceKey=Ko("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Eu(Sr(Gu),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||Sr(Gu);const u=Ko(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const y=await p._get(u);if(y){const v=fs._fromJSON(e,y);p!==o&&(h=v),o=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Eu(o,e,r):(o=d[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new Eu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($R(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QR(e))return"Blackberry";if(WR(e))return"Webos";if(GR(e))return"Safari";if((e.includes("chrome/")||KR(e))&&!e.includes("edge/"))return"Chrome";if(Cd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HR(n=Ht()){return/firefox\//i.test(n)}function GR(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KR(n=Ht()){return/crios\//i.test(n)}function $R(n=Ht()){return/iemobile/i.test(n)}function Cd(n=Ht()){return/android/i.test(n)}function QR(n=Ht()){return/blackberry/i.test(n)}function WR(n=Ht()){return/webos/i.test(n)}function Dd(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function x5(n=Ht()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function I5(n=Ht()){var e;return Dd(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function A5(){return NA()&&document.documentMode===10}function YR(n=Ht()){return Dd(n)||Cd(n)||WR(n)||QR(n)||/windows phone/i.test(n)||$R(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(n,e=[]){let t;switch(n){case"Browser":t=AI(Ht());break;case"Worker":t=`${AI(Ht())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ba}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((u,h)=>{try{const d=e(o);u(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R5(n,e={}){return Zt(n,"GET","/v2/passwordPolicy",Xt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=6;class D5{constructor(e){var t,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:C5,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,u,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SI(this),this.idTokenSubscription=new SI(this),this.beforeStateQueue=new S5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sr(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Eu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await FR(this,{idToken:e}),r=await fs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(kt(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ad(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=u5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kt(this.app))return Promise.reject(Nn(this));const t=e?Ve(e):null;return t&&de(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kt(this.app)?Promise.reject(Nn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kt(this.app)?Promise.reject(Nn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await R5(this),t=new D5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await T5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sr(e)||this._popupRedirectResolver;de(t,this,"argument-error"),this.redirectPersistenceManager=await Eu.create(this,[Sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&o5(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Gt(n){return Ve(n)}class SI{constructor(e){this.auth=e,this.observer=null,this.addObserver=kA(t=>this.observer=t)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function P5(n){Nd=n}function Kv(n){return Nd.loadJS(n)}function k5(){return Nd.recaptchaV2Script}function O5(){return Nd.recaptchaEnterpriseScript}function V5(){return Nd.gapiScript}function ZR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=500,L5=6e4,om=1e12;class U5{constructor(e){this.auth=e,this.counter=om,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new F5(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||om;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||om;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||om;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class j5{constructor(){this.enterprise=new z5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class z5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class F5{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;de(s,"argument-error",{appName:t}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=B5(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},L5)},M5))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function B5(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const q5="recaptcha-enterprise",Vh="NO_RECAPTCHA";class JR{constructor(e){this.type=q5,this.auth=Gt(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{zR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new jR(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(d=>{h(d)})})}function s(o,u,h){const d=window.grecaptcha;TI(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(Vh)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new j5().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(h=>{if(!t&&TI(window.grecaptcha))s(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=O5();d.length!==0&&(d+=h),Kv(d).then(()=>{s(h,o,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function _h(n,e,t,r=!1,s=!1){const o=new JR(n);let u;if(s)u=Vh;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Ia(n,e,t,r,s){var o,u;if(s==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await _h(n,e,t,t==="getOobCode");return r(n,h)}else return r(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await _h(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(h)});else if(s==="PHONE_PROVIDER")if(!((u=n._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("PHONE_PROVIDER")){const h=await _h(n,e,t);return r(n,h).catch(async d=>{var p;if(((p=n._getRecaptchaConfig())===null||p===void 0?void 0:p.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const y=await _h(n,e,t,!1,!0);return r(n,y)}return Promise.reject(d)})}else{const h=await _h(n,e,t,!1,!0);return r(n,h)}else return Promise.reject(s+" provider is not supported.")}async function H5(n){const e=Gt(n),t=await zR(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new jR(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new JR(e).verify()}function G5(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Sr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function K5(n,e,t){const r=Gt(n);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(t!=null&&t.disableWarnings),o=eC(e),{host:u,port:h}=$5(e),d=h===null?"":`:${h}`,p={url:`${o}//${u}${d}/`},y=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(Sa(p,r.config.emulator)&&Sa(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,s||Q5()}function eC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $5(n){const e=eC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:RI(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:RI(u)}}}function RI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Q5(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ni("not implemented")}_getIdTokenResponse(e){return Ni("not implemented")}_linkToIdToken(e,t){return Ni("not implemented")}_getReauthenticationResolver(e){return Ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(n,e){return Zt(n,"POST","/v1/accounts:resetPassword",Xt(n,e))}async function W5(n,e){return Zt(n,"POST","/v1/accounts:update",e)}async function Y5(n,e){return Zt(n,"POST","/v1/accounts:signUp",e)}async function X5(n,e){return Zt(n,"POST","/v1/accounts:update",Xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(n,e){return Cs(n,"POST","/v1/accounts:signInWithPassword",Xt(n,e))}async function Op(n,e){return Zt(n,"POST","/v1/accounts:sendOobCode",Xt(n,e))}async function J5(n,e){return Op(n,e)}async function e3(n,e){return Op(n,e)}async function t3(n,e){return Op(n,e)}async function n3(n,e){return Op(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(n,e){return Cs(n,"POST","/v1/accounts:signInWithEmailLink",Xt(n,e))}async function i3(n,e){return Cs(n,"POST","/v1/accounts:signInWithEmailLink",Xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends oc{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new od(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new od(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ia(e,t,"signInWithPassword",Z5,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return r3(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ia(e,r,"signUpPassword",Y5,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return i3(e,{idToken:t,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(n,e){return Cs(n,"POST","/v1/accounts:signInWithIdp",Xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="http://localhost";class Ui extends oc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=Fv(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Ui(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return _s(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,_s(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_s(e,t)}buildRequest(){const e={requestUri:s3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(n,e){return Zt(n,"POST","/v1/accounts:sendVerificationCode",Xt(n,e))}async function a3(n,e){return Cs(n,"POST","/v1/accounts:signInWithPhoneNumber",Xt(n,e))}async function o3(n,e){const t=await Cs(n,"POST","/v1/accounts:signInWithPhoneNumber",Xt(n,e));if(t.temporaryProof)throw Ah(n,"account-exists-with-different-credential",t);return t}const l3={USER_NOT_FOUND:"user-not-found"};async function u3(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Cs(n,"POST","/v1/accounts:signInWithPhoneNumber",Xt(n,t),l3)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends oc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new $o({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new $o({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return a3(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return o3(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return u3(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:o}=e;return!r&&!t&&!s&&!o?null:new $o({verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function h3(n){const e=gu(Eh(n)).link,t=e?gu(Eh(e)).deep_link_id:null,r=gu(Eh(n)).deep_link_id;return(r?gu(Eh(r)).link:null)||r||t||e||n}class Vp{constructor(e){var t,r,s,o,u,h;const d=gu(Eh(e)),p=(t=d.apiKey)!==null&&t!==void 0?t:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,v=c3((s=d.mode)!==null&&s!==void 0?s:null);de(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=d.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=h3(e);try{return new Vp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.providerId=Wa.PROVIDER_ID}static credential(e,t){return od._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Vp.parseLink(t);return de(r,"argument-error"),od._fromEmailAndCode(e,r.code,r.tenantId)}}Wa.PROVIDER_ID="password";Wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends Ds{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wu extends lc{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return de("providerId"in t&&"signInMethod"in t,"argument-error"),Ui._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return de(e.idToken||e.accessToken,"argument-error"),Ui._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return wu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return wu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:o,nonce:u,providerId:h}=e;if(!r&&!s&&!t&&!o||!h)return null;try{return new wu(h)._credential({idToken:t,accessToken:r,nonce:u,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends lc{constructor(){super("facebook.com")}static credential(e){return Ui._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ui._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ai.credential(t,r)}catch{return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com";Ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends lc{constructor(){super("github.com")}static credential(e){return Ui._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="http://localhost";class Ku extends oc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return _s(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,_s(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_s(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:o}=t;return!r||!s||!o||r!==s?null:new Ku(r,o)}static _create(e,t){return new Ku(e,t)}buildRequest(){return{requestUri:d3,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="saml.";class Ym extends Ds{constructor(e){de(e.startsWith(f3),"argument-error"),super(e)}static credentialFromResult(e){return Ym.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ym.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ku.fromJSON(e);return de(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Ku._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends lc{constructor(){super("twitter.com")}static credential(e,t){return Ui._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ri.credential(t,r)}catch{return null}}}Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(n,e){return Cs(n,"POST","/v1/accounts:signUp",Xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await fs._fromIdTokenResponse(e,r,s),u=DI(r);return new Qr({user:o,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=DI(r);return new Qr({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function DI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m3(n){var e;if(kt(n.app))return Promise.reject(Nn(n));const t=Gt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Qr({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await nC(t,{returnSecureToken:!0}),s=await Qr._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends ar{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xm.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Xm(e,t,r,s)}}function rC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Xm._fromErrorAndOperation(n,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p3(n,e){const t=Ve(n);await Mp(!0,t,e);const{providerUserInfo:r}=await g5(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),s=iC(r||[]);return t.providerData=t.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function $v(n,e,t=!1){const r=await Ts(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Qr._forOperation(n,"link",r)}async function Mp(n,e,t){await ad(e);const r=iC(e.providerData),s=n===!1?"provider-already-linked":"no-such-provider";de(r.has(t)===n,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(n,e,t=!1){const{auth:r}=n;if(kt(r.app))return Promise.reject(Nn(r));const s="reauthenticate";try{const o=await Ts(n,rC(r,s,e,n),t);de(o.idToken,r,"internal-error");const u=kp(o.idToken);de(u,r,"internal-error");const{sub:h}=u;return de(n.uid===h,r,"user-mismatch"),Qr._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Hn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(n,e,t=!1){if(kt(n.app))return Promise.reject(Nn(n));const r="signIn",s=await rC(n,r,e),o=await Qr._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function Lp(n,e){return aC(Gt(n),e)}async function oC(n,e){const t=Ve(n);return await Mp(!1,t,e.providerId),$v(t,e)}async function lC(n,e){return sC(Ve(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(n,e){return Cs(n,"POST","/v1/accounts:signInWithCustomToken",Xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y3(n,e){if(kt(n.app))return Promise.reject(Nn(n));const t=Gt(n),r=await g3(t,{token:e,returnSecureToken:!0}),s=await Qr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Qv._fromServerResponse(e,t):"totpInfo"in t?Wv._fromServerResponse(e,t):Hn(e,"internal-error")}}class Qv extends Pd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Qv(t)}}class Wv extends Pd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Wv(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n,e,t){var r;de(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),de(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),de(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(de(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(de(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yv(n){const e=Gt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _3(n,e,t){const r=Gt(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Up(r,s,t),await Ia(r,s,"getOobCode",e3,"EMAIL_PASSWORD_PROVIDER")}async function v3(n,e,t){await tC(Ve(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yv(n),r})}async function b3(n,e){await X5(Ve(n),{oobCode:e})}async function uC(n,e){const t=Ve(n),r=await tC(t,{oobCode:e}),s=r.requestType;switch(de(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(r.mfaInfo,t,"internal-error");default:de(r.email,t,"internal-error")}let o=null;return r.mfaInfo&&(o=Pd._fromServerResponse(Gt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function E3(n,e){const{data:t}=await uC(Ve(n),e);return t.email}async function w3(n,e,t){if(kt(n.app))return Promise.reject(Nn(n));const r=Gt(n),u=await Ia(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nC,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Yv(n),d}),h=await Qr._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function T3(n,e,t){return kt(n.app)?Promise.reject(Nn(n)):Lp(Ve(n),Wa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yv(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x3(n,e,t){const r=Gt(n),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(u,h){de(h.handleCodeInApp,r,"argument-error"),h&&Up(r,u,h)}o(s,t),await Ia(r,s,"getOobCode",t3,"EMAIL_PASSWORD_PROVIDER")}function I3(n,e){const t=Vp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function A3(n,e,t){if(kt(n.app))return Promise.reject(Nn(n));const r=Ve(n),s=Wa.credentialWithLink(e,t||sd());return de(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Lp(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S3(n,e){return Zt(n,"POST","/v1/accounts:createAuthUri",Xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R3(n,e){const t=Hv()?sd():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:s}=await S3(Ve(n),r);return s||[]}async function C3(n,e){const t=Ve(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Up(t.auth,s,e);const{email:o}=await J5(t.auth,s);o!==n.email&&await n.reload()}async function D3(n,e,t){const r=Ve(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Up(r.auth,o,t);const{email:u}=await n3(r.auth,o);u!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N3(n,e){return Zt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ve(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Ts(r,N3(r.auth,o));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function k3(n,e){const t=Ve(n);return kt(t.auth.app)?Promise.reject(Nn(t.auth)):cC(t,e,null)}function O3(n,e){return cC(Ve(n),null,e)}async function cC(n,e,t){const{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);const u=await Ts(n,W5(r,o));await n._updateTokensIfNecessary(u,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(n){var e,t;if(!n)return null;const{providerId:r}=n,s=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},o=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const u=(t=(e=kp(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(u){const h=u!=="anonymous"&&u!=="custom"?u:null;return new Tu(o,h)}}if(!r)return null;switch(r){case"facebook.com":return new M3(o,s);case"github.com":return new L3(o,s);case"google.com":return new U3(o,s);case"twitter.com":return new j3(o,s,n.screenName||null);case"custom":case"anonymous":return new Tu(o,null);default:return new Tu(o,r,s)}}class Tu{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class hC extends Tu{constructor(e,t,r,s){super(e,t,r),this.username=s}}class M3 extends Tu{constructor(e,t){super(e,"facebook.com",t)}}class L3 extends hC{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class U3 extends Tu{constructor(e,t){super(e,"google.com",t)}}class j3 extends hC{constructor(e,t,r){super(e,"twitter.com",t,r)}}function z3(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:V3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Ho("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ho("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Ho._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ho._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Gt(e),s=t.customData._serverResponse,o=(s.mfaInfo||[]).map(h=>Pd._fromServerResponse(r,h));de(s.mfaPendingCredential,r,"internal-error");const u=Ho._fromMfaPendingCredential(s.mfaPendingCredential);return new Xv(u,o,async h=>{const d=await h._process(r,u);delete s.mfaInfo,delete s.mfaPendingCredential;const p=Object.assign(Object.assign({},s),{idToken:d.idToken,refreshToken:d.refreshToken});switch(t.operationType){case"signIn":const y=await Qr._fromIdTokenResponse(r,t.operationType,p);return await r._updateCurrentUser(y.user),y;case"reauthenticate":return de(t.user,r,"internal-error"),Qr._forOperation(t.user,t.operationType,p);default:Hn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function F3(n,e){var t;const r=Ve(n),s=e;return de(e.customData.operationType,r,"argument-error"),de((t=s.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),Xv._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(n,e){return Zt(n,"POST","/v2/accounts/mfaEnrollment:start",Xt(n,e))}function B3(n,e){return Zt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(n,e))}function q3(n,e){return Zt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(n,e))}class Zv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>Pd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Zv(e)}async getSession(){return Ho._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,s=await this.getSession(),o=await Ts(this.user,r._process(this.user.auth,s,t));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await Ts(this.user,q3(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==t),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const c_=new WeakMap;function H3(n){const e=Ve(n);return c_.has(e)||c_.set(e,Zv._fromUser(e)),c_.get(e)}const Zm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zm,"1"),this.storage.removeItem(Zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=1e3,K3=10;class fC extends dC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);A5()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,K3):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},G3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fC.type="LOCAL";const Jv=fC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC extends dC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mC.type="SESSION";const il=mC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new jp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(u).map(async p=>p(t.origin,o)),d=await $3(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((h,d)=>{const p=kd("",20);s.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(v){const x=v;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(x.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return window}function W3(n){un().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(){return typeof un().WorkerGlobalScope<"u"&&typeof un().importScripts=="function"}async function Y3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function X3(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Z3(){return eb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firebaseLocalStorageDb",J3=1,Jm="firebaseLocalStorage",gC="fbase_key";class Od{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zp(n,e){return n.transaction([Jm],e?"readwrite":"readonly").objectStore(Jm)}function e9(){const n=indexedDB.deleteDatabase(pC);return new Od(n).toPromise()}function r0(){const n=indexedDB.open(pC,J3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Jm,{keyPath:gC})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Jm)?e(r):(r.close(),await e9(),e(await r0()))})})}async function PI(n,e,t){const r=zp(n,!0).put({[gC]:e,value:t});return new Od(r).toPromise()}async function t9(n,e){const t=zp(n,!1).get(e),r=await new Od(t).toPromise();return r===void 0?null:r.value}function kI(n,e){const t=zp(n,!0).delete(e);return new Od(t).toPromise()}const n9=800,r9=3;class yC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await r0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>r9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jp._getInstance(Z3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Y3(),!this.activeServiceWorker)return;this.sender=new Q3(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||X3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await r0();return await PI(e,Zm,"1"),await kI(e,Zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>PI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>t9(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=zp(s,!1).getAll();return new Od(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yC.type="LOCAL";const ld=yC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(n,e){return Zt(n,"POST","/v2/accounts/mfaSignIn:start",Xt(n,e))}function i9(n,e){return Zt(n,"POST","/v2/accounts/mfaSignIn:finalize",Xt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=ZR("rcb"),s9=new Rd(3e4,6e4);class a9{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=un().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return de(o9(t),e,"argument-error"),this.shouldResolveImmediately(t)&&wI(un().grecaptcha)?Promise.resolve(un().grecaptcha):new Promise((r,s)=>{const o=un().setTimeout(()=>{s(vn(e,"network-request-failed"))},s9.get());un()[h_]=()=>{un().clearTimeout(o),delete un()[h_];const h=un().grecaptcha;if(!h||!wI(h)){s(vn(e,"internal-error"));return}const d=h.render;h.render=(p,y)=>{const v=d(p,y);return this.counter++,v},this.hostLanguage=t,r(h)};const u=`${k5()}?${Xu({onload:h_,render:"explicit",hl:t})}`;Kv(u).catch(()=>{clearTimeout(o),s(vn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=un().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function o9(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class l9{async load(e){return new U5(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="recaptcha",u9={theme:"light",type:"image"};let c9=class{constructor(e,t,r=Object.assign({},u9)){this.parameters=r,this.type=Mh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gt(e),this.isInvisible=this.parameters.size==="invisible",de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof t=="string"?document.getElementById(t):t;de(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new l9:new a9,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(s=>{const o=u=>{u&&(this.tokenChangeListeners.delete(o),s(u))};this.tokenChangeListeners.add(o),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=un()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){de(Hv()&&!eb(),this.auth,"internal-error"),await h9(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await m5(this.auth);de(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function h9(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=$o._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function d9(n,e,t){if(kt(n.app))return Promise.reject(Nn(n));const r=Gt(n),s=await Fp(r,e,Ve(t));return new tb(s,o=>Lp(r,o))}async function f9(n,e,t){const r=Ve(n);await Mp(!1,r,"phone");const s=await Fp(r.auth,e,Ve(t));return new tb(s,o=>oC(r,o))}async function m9(n,e,t){const r=Ve(n);if(kt(r.auth.app))return Promise.reject(Nn(r.auth));const s=await Fp(r.auth,e,Ve(t));return new tb(s,o=>lC(r,o))}async function Fp(n,e,t){var r;if(!n._getRecaptchaConfig())try{await H5(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s){de(o.type==="enroll",n,"internal-error");const u={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ia(n,u,"mfaSmsEnrollment",async(y,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===Vh){de((t==null?void 0:t.type)===Mh,y,"argument-error");const x=await d_(y,v,t);return NI(y,x)}return NI(y,v)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{de(o.type==="signin",n,"internal-error");const u=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;de(u,n,"missing-multi-factor-info");const h={mfaPendingCredential:o.credential,mfaEnrollmentId:u,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ia(n,h,"mfaSmsSignIn",async(v,x)=>{if(x.phoneSignInInfo.captchaResponse===Vh){de((t==null?void 0:t.type)===Mh,v,"argument-error");const R=await d_(v,x,t);return OI(v,R)}return OI(v,x)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ia(n,o,"sendVerificationCode",async(p,y)=>{if(y.captchaResponse===Vh){de((t==null?void 0:t.type)===Mh,p,"argument-error");const v=await d_(p,y,t);return CI(p,v)}return CI(p,y)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).sessionInfo}}finally{t==null||t._reset()}}async function p9(n,e){const t=Ve(n);if(kt(t.auth.app))return Promise.reject(Nn(t.auth));await $v(t,e)}async function d_(n,e,t){de(t.type===Mh,n,"argument-error");const r=await t.verify();de(typeof r=="string",n,"argument-error");const s=Object.assign({},e);if("phoneEnrollmentInfo"in s){const o=s.phoneEnrollmentInfo.phoneNumber,u=s.phoneEnrollmentInfo.captchaResponse,h=s.phoneEnrollmentInfo.clientType,d=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:u,clientType:h,recaptchaVersion:d}}),s}else if("phoneSignInInfo"in s){const o=s.phoneSignInInfo.captchaResponse,u=s.phoneSignInInfo.clientType,h=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:u,recaptchaVersion:h}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sl=class wm{constructor(e){this.providerId=wm.PROVIDER_ID,this.auth=Gt(e)}verifyPhoneNumber(e,t){return Fp(this.auth,e,Ve(t))}static credential(e,t){return $o._fromVerification(e,t)}static credentialFromResult(e){const t=e;return wm.credentialFromTaggedObject(t)}static credentialFromError(e){return wm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?$o._fromTokenResponse(t,r):null}};sl.PROVIDER_ID="phone";sl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(n,e){return e?Sr(e):(de(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends oc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _s(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _s(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _s(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function g9(n){return aC(n.auth,new nb(n),n.bypassAuthState)}function y9(n){const{auth:e,user:t}=n;return de(t,e,"internal-error"),sC(t,new nb(n),n.bypassAuthState)}async function _9(n){const{auth:e,user:t}=n;return de(t,e,"internal-error"),$v(t,new nb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g9;case"linkViaPopup":case"linkViaRedirect":return _9;case"reauthViaPopup":case"reauthViaRedirect":return y9;default:Hn(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=new Rd(2e3,1e4);async function b9(n,e,t){if(kt(n.app))return Promise.reject(vn(n,"operation-not-supported-in-this-environment"));const r=Gt(n);ac(n,e,Ds);const s=pl(r,t);return new ms(r,"signInViaPopup",e,s).executeNotNull()}async function E9(n,e,t){const r=Ve(n);if(kt(r.auth.app))return Promise.reject(vn(r.auth,"operation-not-supported-in-this-environment"));ac(r.auth,e,Ds);const s=pl(r.auth,t);return new ms(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function w9(n,e,t){const r=Ve(n);ac(r.auth,e,Ds);const s=pl(r.auth,t);return new ms(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class ms extends _C{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=kd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v9.get())};e()}}ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9="pendingRedirect",Lh=new Map;class x9 extends _C{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Lh.get(this.auth._key());if(!e){try{const r=await I9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Lh.set(this.auth._key(),e)}return this.bypassAuthState||Lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I9(n,e){const t=bC(e),r=vC(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function rb(n,e){return vC(n)._set(bC(e),"true")}function A9(){Lh.clear()}function ib(n,e){Lh.set(n._key(),e)}function vC(n){return Sr(n._redirectPersistence)}function bC(n){return Ko(T9,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S9(n,e,t){return R9(n,e,t)}async function R9(n,e,t){if(kt(n.app))return Promise.reject(Nn(n));const r=Gt(n);ac(n,e,Ds),await r._initializationPromise;const s=pl(r,t);return await rb(s,r),s._openRedirect(r,e,"signInViaRedirect")}function C9(n,e,t){return D9(n,e,t)}async function D9(n,e,t){const r=Ve(n);if(ac(r.auth,e,Ds),kt(r.auth.app))return Promise.reject(Nn(r.auth));await r.auth._initializationPromise;const s=pl(r.auth,t);await rb(s,r.auth);const o=await EC(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",o)}function N9(n,e,t){return P9(n,e,t)}async function P9(n,e,t){const r=Ve(n);ac(r.auth,e,Ds),await r.auth._initializationPromise;const s=pl(r.auth,t);await Mp(!1,r,e.providerId),await rb(s,r.auth);const o=await EC(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}async function k9(n,e){return await Gt(n)._initializationPromise,Bp(n,e,!1)}async function Bp(n,e,t=!1){if(kt(n.app))return Promise.reject(Nn(n));const r=Gt(n),s=pl(r,e),u=await new x9(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}async function EC(n){const e=kd(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=10*60*1e3;class wC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!V9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!TC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(vn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O9&&this.cachedEventUids.clear(),this.cachedEventUids.has(VI(e))}saveEventToCache(e){this.cachedEventUids.add(VI(e)),this.lastProcessedEventTime=Date.now()}}function VI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function TC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function V9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(n,e={}){return Zt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L9=/^https?/;async function U9(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xC(n);for(const t of e)try{if(j9(t))return}catch{}Hn(n,"unauthorized-domain")}function j9(n){const e=sd(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!L9.test(t))return!1;if(M9.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=new Rd(3e4,6e4);function MI(){const n=un().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function F9(n){return new Promise((e,t)=>{var r,s,o;function u(){MI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MI(),t(vn(n,"network-request-failed"))},timeout:z9.get()})}if(!((s=(r=un().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=un().gapi)===null||o===void 0)&&o.load)u();else{const h=ZR("iframefcb");return un()[h]=()=>{gapi.load?u():t(vn(n,"network-request-failed"))},Kv(`${V5()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw Tm=null,e})}let Tm=null;function B9(n){return Tm=Tm||F9(n),Tm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=new Rd(5e3,15e3),H9="__/auth/iframe",G9="emulator/auth/iframe",K9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q9(n){const e=n.config;de(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gv(e,G9):`https://${n.config.authDomain}/${H9}`,r={apiKey:e.apiKey,appName:n.name,v:Ba},s=$9.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Xu(r).slice(1)}`}async function W9(n){const e=await B9(n),t=un().gapi;return de(t,n,"internal-error"),e.open({where:document.body,url:Q9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K9,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=vn(n,"network-request-failed"),h=un().setTimeout(()=>{o(u)},q9.get());function d(){un().clearTimeout(h),s(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X9=500,Z9=600,J9="_blank",eL="http://localhost";class LI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tL(n,e,t,r=X9,s=Z9){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d=Object.assign(Object.assign({},Y9),{width:r.toString(),height:s.toString(),top:o,left:u}),p=Ht().toLowerCase();t&&(h=KR(p)?J9:t),HR(p)&&(e=e||eL,d.scrollbars="yes");const y=Object.entries(d).reduce((x,[R,N])=>`${x}${R}=${N},`,"");if(I5(p)&&h!=="_self")return nL(e||"",h),new LI(null);const v=window.open(e||"",h,y);de(v,n,"popup-blocked");try{v.focus()}catch{}return new LI(v)}function nL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="__/auth/handler",iL="emulator/auth/handler",sL=encodeURIComponent("fac");async function i0(n,e,t,r,s,o){de(n.config.authDomain,n,"auth-domain-config-required"),de(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ba,eventId:s};if(e instanceof Ds){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",mk(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries(o||{}))u[y]=v}if(e instanceof lc){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await n._getAppCheckToken(),p=d?`#${sL}=${encodeURIComponent(d)}`:"";return`${aL(n)}?${Xu(h).slice(1)}${p}`}function aL({config:n}){return n.emulator?Gv(n,iL):`https://${n.authDomain}/${rL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="webStorageSupport";class oL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=il,this._completeRedirectFn=Bp,this._overrideRedirectResult=ib}async _openPopup(e,t,r,s){var o;li((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await i0(e,t,r,sd(),s);return tL(e,u,kd())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await i0(e,t,r,sd(),s);return W3(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(li(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await W9(e),r=new wC(e);return t.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(f_,{type:f_},s=>{var o;const u=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[f_];u!==void 0&&t(!!u),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=U9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YR()||GR()||Dd()}}const lL=oL;class uL{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ni("unexpected MultiFactorSessionType")}}}class sb extends uL{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new sb(e)}_finalizeEnroll(e,t,r){return B3(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return i9(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class IC{constructor(){}static assertion(e){return sb._fromCredential(e)}}IC.FACTOR_ID="phone";var UI="@firebase/auth",jI="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dL(n){Da(new Oi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;de(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XR(n)},p=new N5(r,s,o,d);return G5(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Da(new Oi("auth-internal",e=>{const t=Gt(e.getProvider("auth").getImmediate());return(r=>new cL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ai(UI,jI,hL(n)),ai(UI,jI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=5*60;ik("authIdTokenMaxAge");function mL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}P5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=vn("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",mL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dL("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=2e3;async function gL(n,e,t){var r;const{BuildInfo:s}=al();li(e.sessionId,"AuthEvent did not contain a session ID");const o=await EL(e.sessionId),u={};return Dd()?u.ibi=s.packageName:Cd()?u.apn=s.packageName:Hn(n,"operation-not-supported-in-this-environment"),s.displayName&&(u.appDisplayName=s.displayName),u.sessionId=o,i0(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,u)}async function yL(n){const{BuildInfo:e}=al(),t={};Dd()?t.iosBundleId=e.packageName:Cd()?t.androidPackageName=e.packageName:Hn(n,"operation-not-supported-in-this-environment"),await xC(n,t)}function _L(n){const{cordova:e}=al();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(n):s=e.InAppBrowser.open(n,x5()?"_blank":"_system","location=yes"),t(s)})})}async function vL(n,e,t){const{cordova:r}=al();let s=()=>{};try{await new Promise((o,u)=>{let h=null;function d(){var v;o();const x=(v=r.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof x=="function"&&x(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function p(){h||(h=window.setTimeout(()=>{u(vn(n,"redirect-cancelled-by-user"))},pL))}function y(){(document==null?void 0:document.visibilityState)==="visible"&&p()}e.addPassiveListener(d),document.addEventListener("resume",p,!1),Cd()&&document.addEventListener("visibilitychange",y,!1),s=()=>{e.removePassiveListener(d),document.removeEventListener("resume",p,!1),document.removeEventListener("visibilitychange",y,!1),h&&window.clearTimeout(h)}})}finally{s()}}function bL(n){var e,t,r,s,o,u,h,d,p,y;const v=al();de(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),de(typeof((t=v==null?void 0:v.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),de(typeof((o=(s=(r=v==null?void 0:v.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de(typeof((d=(h=(u=v==null?void 0:v.cordova)===null||u===void 0?void 0:u.plugins)===null||h===void 0?void 0:h.browsertab)===null||d===void 0?void 0:d.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de(typeof((y=(p=v==null?void 0:v.cordova)===null||p===void 0?void 0:p.InAppBrowser)===null||y===void 0?void 0:y.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function EL(n){const e=wL(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}function wL(n){if(li(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=20;class xL extends wC{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function IL(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:RL(),postBody:null,tenantId:n.tenantId,error:vn(n,"no-auth-event")}}function AL(n,e){return s0()._set(a0(n),e)}async function zI(n){const e=await s0()._get(a0(n));return e&&await s0()._remove(a0(n)),e}function SL(n,e){var t,r;const s=DL(e);if(s.includes("/__/auth/callback")){const o=xm(s),u=o.firebaseError?CL(decodeURIComponent(o.firebaseError)):null,h=(r=(t=u==null?void 0:u.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],d=h?vn(h):null;return d?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:s,postBody:null}}return null}function RL(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<TL;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function s0(){return Sr(Jv)}function a0(n){return Ko("authEvent",n.config.apiKey,n.name)}function CL(n){try{return JSON.parse(n)}catch{return null}}function DL(n){const e=xm(n),t=e.link?decodeURIComponent(e.link):void 0,r=xm(t).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return xm(s).link||s||r||t||n}function xm(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return gu(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=500;class PL{constructor(){this._redirectPersistence=il,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Bp,this._overrideRedirectResult=ib}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new xL(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Hn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,s){bL(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),A9(),await this._originValidation(e);const u=IL(e,r,s);await AL(e,u);const h=await gL(e,u,t),d=await _L(h);return vL(e,o,d)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yL(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:s,BuildInfo:o}=al(),u=setTimeout(async()=>{await zI(e),t.onEvent(FI())},NL),h=async y=>{clearTimeout(u);const v=await zI(e);let x=null;v&&(y!=null&&y.url)&&(x=SL(v,y.url)),t.onEvent(x||FI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,h);const d=s,p=`${o.packageName.toLowerCase()}://`;al().handleOpenURL=async y=>{if(y.toLowerCase().startsWith(p)&&h({url:y}),typeof d=="function")try{d(y)}catch(v){console.error(v)}}}}const kL=PL;function FI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(n,e){Gt(n)._logFramework(e)}var VL="@firebase/auth-compat",ML="0.5.19";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=1e3;function Uh(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function UL(){return Uh()==="http:"||Uh()==="https:"}function AC(n=Ht()){return!!((Uh()==="file:"||Uh()==="ionic:"||Uh()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function jL(){return S0()||A0()}function zL(){return NA()&&(document==null?void 0:document.documentMode)===11}function FL(n=Ht()){return/Edge\/\d+/.test(n)}function BL(n=Ht()){return zL()||FL(n)}function SC(){try{const n=self.localStorage,e=kd();if(n)return n.setItem(e,"1"),n.removeItem(e),BL()?zh():!0}catch{return ab()&&zh()}return!1}function ab(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function m_(){return(UL()||DA()||AC())&&!jL()&&SC()&&!ab()}function RC(){return AC()&&typeof document<"u"}async function qL(){return RC()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},LL);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function HL(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={LOCAL:"local",NONE:"none",SESSION:"session"},vh=de,CC="persistence";function GL(n,e){if(vh(Object.values(Ar).includes(e),n,"invalid-persistence-type"),S0()){vh(e!==Ar.SESSION,n,"unsupported-persistence-type");return}if(A0()){vh(e===Ar.NONE,n,"unsupported-persistence-type");return}if(ab()){vh(e===Ar.NONE||e===Ar.LOCAL&&zh(),n,"unsupported-persistence-type");return}vh(e===Ar.NONE||SC(),n,"unsupported-persistence-type")}async function o0(n){await n._initializationPromise;const e=DC(),t=Ko(CC,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function KL(n,e){const t=DC();if(!t)return[];const r=Ko(CC,n,e);switch(t.getItem(r)){case Ar.NONE:return[Gu];case Ar.LOCAL:return[ld,il];case Ar.SESSION:return[il];default:return[]}}function DC(){var n;try{return((n=HL())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=de;class ba{constructor(){this.browserResolver=Sr(lL),this.cordovaResolver=Sr(kL),this.underlyingResolver=null,this._redirectPersistence=il,this._completeRedirectFn=Bp,this._overrideRedirectResult=ib}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,s)}async _openRedirect(e,t,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,s)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return RC()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $L(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await qL();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n){return n.unwrap()}function QL(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(n){return PC(n)}function YL(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new XL(n,F3(n,e))}else if(r){const s=PC(e),o=e;s&&(o.credential=s,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function PC(n){const{_tokenResponse:e}=n instanceof ar?n.customData:n;if(!e)return null;if(!(n instanceof ar)&&"temporaryProof"in e&&"phoneNumber"in e)return sl.credentialFromResult(n);const t=e.providerId;if(!t||t===yh.PASSWORD)return null;let r;switch(t){case yh.GOOGLE:r=Ai;break;case yh.FACEBOOK:r=Ii;break;case yh.GITHUB:r=Si;break;case yh.TWITTER:r=Ri;break;default:const{oauthIdToken:s,oauthAccessToken:o,oauthTokenSecret:u,pendingToken:h,nonce:d}=e;return!o&&!u&&!s&&!h?null:h?t.startsWith("saml.")?Ku._create(t,h):Ui._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:s,accessToken:o}):new wu(t).credential({idToken:s,accessToken:o,rawNonce:d})}return n instanceof ar?r.credentialFromError(n):r.credentialFromResult(n)}function dr(n,e){return e.catch(t=>{throw t instanceof ar&&YL(n,t),t}).then(t=>{const r=t.operationType,s=t.user;return{operationType:r,credential:WL(t),additionalUserInfo:z3(t),user:ps.getOrCreate(s)}})}async function l0(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>dr(n,t.confirm(r))}}class XL{constructor(e,t){this.resolver=t,this.auth=QL(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return dr(NC(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._delegate=e,this.multiFactor=H3(e)}static getOrCreate(e){return ps.USER_MAP.has(e)||ps.USER_MAP.set(e,new ps(e)),ps.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return dr(this.auth,oC(this._delegate,e))}async linkWithPhoneNumber(e,t){return l0(this.auth,f9(this._delegate,e,t))}async linkWithPopup(e){return dr(this.auth,w9(this._delegate,e,ba))}async linkWithRedirect(e){return await o0(Gt(this.auth)),N9(this._delegate,e,ba)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return dr(this.auth,lC(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return l0(this.auth,m9(this._delegate,e,t))}reauthenticateWithPopup(e){return dr(this.auth,E9(this._delegate,e,ba))}async reauthenticateWithRedirect(e){return await o0(Gt(this.auth)),C9(this._delegate,e,ba)}sendEmailVerification(e){return C3(this._delegate,e)}async unlink(e){return await p3(this._delegate,e),this}updateEmail(e){return k3(this._delegate,e)}updatePassword(e){return O3(this._delegate,e)}updatePhoneNumber(e){return p9(this._delegate,e)}updateProfile(e){return P3(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return D3(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ps.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=de;class u0{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;bh(r,"invalid-api-key",{appName:e.name}),bh(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?ba:void 0;this._delegate=t.initialize({options:{persistence:ZL(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(s5),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){K5(this._delegate,e,t)}applyActionCode(e){return b3(this._delegate,e)}checkActionCode(e){return uC(this._delegate,e)}confirmPasswordReset(e,t){return v3(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return dr(this._delegate,w3(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return R3(this._delegate,e)}isSignInWithEmailLink(e){return I3(this._delegate,e)}async getRedirectResult(){bh(m_(),this._delegate,"operation-not-supported-in-this-environment");const e=await k9(this._delegate,ba);return e?dr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){OL(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:s,error:o,complete:u}=BI(e,t,r);return this._delegate.onAuthStateChanged(s,o,u)}onIdTokenChanged(e,t,r){const{next:s,error:o,complete:u}=BI(e,t,r);return this._delegate.onIdTokenChanged(s,o,u)}sendSignInLinkToEmail(e,t){return x3(this._delegate,e,t)}sendPasswordResetEmail(e,t){return _3(this._delegate,e,t||void 0)}async setPersistence(e){GL(this._delegate,e);let t;switch(e){case Ar.SESSION:t=il;break;case Ar.LOCAL:t=await Sr(ld)._isAvailable()?ld:Jv;break;case Ar.NONE:t=Gu;break;default:return Hn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return dr(this._delegate,m3(this._delegate))}signInWithCredential(e){return dr(this._delegate,Lp(this._delegate,e))}signInWithCustomToken(e){return dr(this._delegate,y3(this._delegate,e))}signInWithEmailAndPassword(e,t){return dr(this._delegate,T3(this._delegate,e,t))}signInWithEmailLink(e,t){return dr(this._delegate,A3(this._delegate,e,t))}signInWithPhoneNumber(e,t){return l0(this._delegate,d9(this._delegate,e,t))}async signInWithPopup(e){return bh(m_(),this._delegate,"operation-not-supported-in-this-environment"),dr(this._delegate,b9(this._delegate,e,ba))}async signInWithRedirect(e){return bh(m_(),this._delegate,"operation-not-supported-in-this-environment"),await o0(this._delegate),S9(this._delegate,e,ba)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return E3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}u0.Persistence=Ar;function BI(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const s=r;return{next:u=>s(u&&ps.getOrCreate(u)),error:e,complete:t}}function ZL(n,e){const t=KL(n,e);if(typeof self<"u"&&!t.includes(ld)&&t.push(ld),typeof window<"u")for(const r of[Jv,il])t.includes(r)||t.push(r);return t.includes(Gu)||t.push(Gu),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{static credential(e,t){return sl.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new sl(NC(qa.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ob.PHONE_SIGN_IN_METHOD=sl.PHONE_SIGN_IN_METHOD;ob.PROVIDER_ID=sl.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=de;class e8{constructor(e,t,r=qa.app()){var s;JL((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new c9(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="auth-compat";function n8(n){n.INTERNAL.registerComponent(new Oi(t8,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new u0(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lu.EMAIL_SIGNIN,PASSWORD_RESET:lu.PASSWORD_RESET,RECOVER_EMAIL:lu.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:lu.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:lu.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:lu.VERIFY_EMAIL}},EmailAuthProvider:Wa,FacebookAuthProvider:Ii,GithubAuthProvider:Si,GoogleAuthProvider:Ai,OAuthProvider:wu,SAMLAuthProvider:Ym,PhoneAuthProvider:ob,PhoneMultiFactorGenerator:IC,RecaptchaVerifier:e8,TwitterAuthProvider:Ri,Auth:u0,AuthCredential:oc,Error:ar}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(VL,ML)}n8(qa);const r8={apiKey:"AIzaSyCxRU6UuVpXCNOV5BK5X6-LyJhNkpjsm_g",authDomain:"solo-72aa2.firebaseapp.com",projectId:"solo-72aa2",storageBucket:"solo-72aa2.firebasestorage.app",messagingSenderId:"162709327317",appId:"1:162709327317:web:749833f01e3dd9a436815c",measurementId:"G-4J0R5LFKP2"};qa.initializeApp(r8);const i8=qa.firestore,kC=qa.auth,qn=i8(),qp=kC(),s8=({children:n})=>{const[e,t]=P.useState(!1),[r,s]=P.useState(!1),[o,u]=P.useState(w_.user),[h,d]=P.useState(w_.admin);return P.useEffect(()=>qn.collection("admin").onSnapshot(y=>{y.docs.map(x=>({...x.data()})).length===0?s(!0):s(!1)}),[]),P.useEffect(()=>qp.onAuthStateChanged(async y=>{if(y){if(console.log("user logged in",y),y.uid==="rYCgjCFI74hbEBEzfjKuXe4Cgcl1"){const R=(await qn.collection("admin").doc(y.uid).get()).data();d(R)}}else console.log("no user logged in"),u(null);t(!0)}),[]),P.useEffect(()=>{const p=localStorage.getItem("uid");if(p){const y=JSON.parse(p);if(y){const v=async()=>{const N=(await qn.collection("users").doc(y).get()).data();N?(delete N.password,u(N)):(console.log("No Such User"),u(null))};return v(),()=>{v()}}}},[]),k.jsx(xA.Provider,{value:{admin:h,init:e,isInitialAdmin:r,user:o},children:n})};var OC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},qI=gs.createContext&&gs.createContext(OC),a8=["attr","size","title"];function o8(n,e){if(n==null)return{};var t=l8(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function l8(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function ep(){return ep=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ep.apply(this,arguments)}function HI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function tp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HI(Object(t),!0).forEach(function(r){u8(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function u8(n,e,t){return e=c8(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c8(n){var e=h8(n,"string");return typeof e=="symbol"?e:e+""}function h8(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VC(n){return n&&n.map((e,t)=>gs.createElement(e.tag,tp({key:t},e.attr),VC(e.child)))}function lb(n){return e=>gs.createElement(d8,ep({attr:tp({},n.attr)},e),VC(n.child))}function d8(n){var e=t=>{var{attr:r,size:s,title:o}=n,u=o8(n,a8),h=s||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),gs.createElement("svg",ep({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:d,style:tp(tp({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&gs.createElement("title",null,o),n.children)};return qI!==void 0?gs.createElement(qI.Consumer,null,t=>e(t)):e(OC)}function ub(n){return lb({attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(n)}function f8(n){return lb({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0 0 12.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"},child:[]},{tag:"path",attr:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0 1 52.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 0 1-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"},child:[]}]})(n)}const m8=()=>{const{closeFn:n,state:e,buttons:t,message:r,title:s}=Fa(),o=P.useCallback(({onClick:u,text:h,index:d})=>{const p=d!==0||(t==null?void 0:t.length)===1;return k.jsx(Bt,{className:Fn("px-5",p&&"text-white bg-blue-400"),onClick:()=>{n(),u&&u()},children:h??"확인"})},[n,t]);return e&&k.jsxs(cn,{className:"fixed top-0 left-0 z-10 w-full h-screen justify-center items-center ",children:[k.jsxs(ul,{className:"border p-2.5 border-gray-200 rounded-xl relative z-1 min-w-75 max-w-100 overflow-hidden bg-white",children:[k.jsx(Bt,{className:"absolute top-0 right-0 h-8 w-8 bg-white",onClick:n,children:k.jsx(ub,{})}),k.jsx(gt,{children:k.jsxs(cn,{className:"gap-x-2.5",children:[k.jsx("img",{src:"https://cdn.pixabay.com/photo/2019/09/16/20/21/cat-cat-4481997_1280.jpg",alt:"alert message",width:40,height:40,className:"rounded-full h-10 w-10 bg-gray-100 object-cover border border-gray-200"}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx("p",{className:"leading-none font-bold",children:s??"알림"}),k.jsx("p",{className:"text-gray-500 text-sm",children:r??"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rem facilis corporis necessitatibus accusamus fugiat. Aliquid praesentium blanditiis eos quos dolores ratione? Fuga cumque ipsa eos ut nam placeat enim maiores."}),k.jsx(cn,{className:"mt-2.5 gap-x-2.5",children:!t||t.length===0?k.jsx(o,{index:1}):t.map((u,h)=>k.jsx(o,{...u,index:h},h))})]})]})})]}),k.jsx("span",{onClick:n,className:"absolute w-full h-full top-0 left-0"})]})},p8=()=>{const{alert:n}=Fa(),e=ol();return k.jsx(cn,{className:"w-full h-screen justify-center items-center",children:k.jsxs(gt,{className:"gap-y-5 max-w-90 p-5",children:[k.jsx(E0,{className:"text-center",children:"나만의 사랑을 찾고 커플이 되어 지옥같은 현실에서 탈출하세요."}),k.jsx(Bt,{onClick:()=>n("로그인 하시겠습니까?",[{text:"회원가입",onClick:()=>{e("signup")}},{text:"로그인",onClick:()=>{e("signin")}},{text:"구글",onClick:async()=>{console.log("구글로 로그인 해보셈");const t=new kC.GoogleAuthProvider;try{const r=await qp.signInWithPopup(t);//! provider
if(r.user){const s=qn.collection("users");if((await s.where("email","==",r.user.email).get()).docs.length===0){const h={address:"",appearance:{bodyType:"",height:{isCM:!0,value:0},weight:{value:0,isKG:!0}},createdAt:0,distance:0,dob:"",drinks:"",workouts:"",smokes:"",email:r.user.email,gender:"",id:r.user.uid,interests:[],isVegetarian:!1,mobile:"010",name:r.user.displayName,points:[],purposes:[]};await s.doc(r.user.uid).set(h)}n("환영합니다")}}catch(r){n(r.message)}}}]),className:"bg-pink-400 text-white",children:"탈출하기"})]})})},g8={};var c0=null;function y8(n){try{return crypto.getRandomValues(new Uint8Array(n))}catch{}try{return g8.randomBytes(n)}catch{}if(!c0)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return c0(n)}function _8(n){c0=n}function cb(n,e){if(n=n||hb,typeof n!="number")throw Error("Illegal arguments: "+typeof n+", "+typeof e);n<4?n=4:n>31&&(n=31);var t=[];return t.push("$2b$"),n<10&&t.push("0"),t.push(n.toString()),t.push("$"),t.push(np(y8(ud),ud)),t.join("")}function MC(n,e,t){if(typeof e=="function"&&(t=e,e=void 0),typeof n=="function"&&(t=n,n=void 0),typeof n>"u")n=hb;else if(typeof n!="number")throw Error("illegal arguments: "+typeof n);function r(s){si(function(){try{s(null,cb(n))}catch(o){s(o)}})}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);r(t)}else return new Promise(function(s,o){r(function(u,h){if(u){o(u);return}s(h)})})}function LC(n,e){if(typeof e>"u"&&(e=hb),typeof e=="number"&&(e=cb(e)),typeof n!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof n+", "+typeof e);return h0(n,e)}function UC(n,e,t,r){function s(o){typeof n=="string"&&typeof e=="number"?MC(e,function(u,h){h0(n,h,o,r)}):typeof n=="string"&&typeof e=="string"?h0(n,e,o,r):si(o.bind(this,Error("Illegal arguments: "+typeof n+", "+typeof e)))}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);s(t)}else return new Promise(function(o,u){s(function(h,d){if(h){u(h);return}o(d)})})}function jC(n,e){for(var t=n.length^e.length,r=0;r<n.length;++r)t|=n.charCodeAt(r)^e.charCodeAt(r);return t===0}function v8(n,e){if(typeof n!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof n+", "+typeof e);return e.length!==60?!1:jC(LC(n,e.substring(0,e.length-31)),e)}function b8(n,e,t,r){function s(o){if(typeof n!="string"||typeof e!="string"){si(o.bind(this,Error("Illegal arguments: "+typeof n+", "+typeof e)));return}if(e.length!==60){si(o.bind(this,null,!1));return}UC(n,e.substring(0,29),function(u,h){u?o(u):o(null,jC(h,e))},r)}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);s(t)}else return new Promise(function(o,u){s(function(h,d){if(h){u(h);return}o(d)})})}function E8(n){if(typeof n!="string")throw Error("Illegal arguments: "+typeof n);return parseInt(n.split("$")[2],10)}function w8(n){if(typeof n!="string")throw Error("Illegal arguments: "+typeof n);if(n.length!==60)throw Error("Illegal hash length: "+n.length+" != 60");return n.substring(0,29)}function T8(n){if(typeof n!="string")throw Error("Illegal arguments: "+typeof n);return zC(n)>72}var si=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function zC(n){for(var e=0,t=0,r=0;r<n.length;++r)t=n.charCodeAt(r),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(n.charCodeAt(r+1)&64512)===56320?(++r,e+=4):e+=3;return e}function x8(n){for(var e=0,t,r,s=new Array(zC(n)),o=0,u=n.length;o<u;++o)t=n.charCodeAt(o),t<128?s[e++]=t:t<2048?(s[e++]=t>>6|192,s[e++]=t&63|128):(t&64512)===55296&&((r=n.charCodeAt(o+1))&64512)===56320?(t=65536+((t&1023)<<10)+(r&1023),++o,s[e++]=t>>18|240,s[e++]=t>>12&63|128,s[e++]=t>>6&63|128,s[e++]=t&63|128):(s[e++]=t>>12|224,s[e++]=t>>6&63|128,s[e++]=t&63|128);return s}var uu="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),ga=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function np(n,e){var t=0,r=[],s,o;if(e<=0||e>n.length)throw Error("Illegal len: "+e);for(;t<e;){if(s=n[t++]&255,r.push(uu[s>>2&63]),s=(s&3)<<4,t>=e){r.push(uu[s&63]);break}if(o=n[t++]&255,s|=o>>4&15,r.push(uu[s&63]),s=(o&15)<<2,t>=e){r.push(uu[s&63]);break}o=n[t++]&255,s|=o>>6&3,r.push(uu[s&63]),r.push(uu[o&63])}return r.join("")}function FC(n,e){var t=0,r=n.length,s=0,o=[],u,h,d,p,y,v;if(e<=0)throw Error("Illegal len: "+e);for(;t<r-1&&s<e&&(v=n.charCodeAt(t++),u=v<ga.length?ga[v]:-1,v=n.charCodeAt(t++),h=v<ga.length?ga[v]:-1,!(u==-1||h==-1||(y=u<<2>>>0,y|=(h&48)>>4,o.push(String.fromCharCode(y)),++s>=e||t>=r)||(v=n.charCodeAt(t++),d=v<ga.length?ga[v]:-1,d==-1)||(y=(h&15)<<4>>>0,y|=(d&60)>>2,o.push(String.fromCharCode(y)),++s>=e||t>=r)));)v=n.charCodeAt(t++),p=v<ga.length?ga[v]:-1,y=(d&3)<<6>>>0,y|=p,o.push(String.fromCharCode(y)),++s;var x=[];for(t=0;t<s;t++)x.push(o[t].charCodeAt(0));return x}var ud=16,hb=10,I8=16,A8=100,GI=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],KI=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],BC=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function cd(n,e,t,r){var s,o=n[e],u=n[e+1];return o^=t[0],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],u^=s^t[1],s=r[u>>>24],s+=r[256|u>>16&255],s^=r[512|u>>8&255],s+=r[768|u&255],o^=s^t[2],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],u^=s^t[3],s=r[u>>>24],s+=r[256|u>>16&255],s^=r[512|u>>8&255],s+=r[768|u&255],o^=s^t[4],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],u^=s^t[5],s=r[u>>>24],s+=r[256|u>>16&255],s^=r[512|u>>8&255],s+=r[768|u&255],o^=s^t[6],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],u^=s^t[7],s=r[u>>>24],s+=r[256|u>>16&255],s^=r[512|u>>8&255],s+=r[768|u&255],o^=s^t[8],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],u^=s^t[9],s=r[u>>>24],s+=r[256|u>>16&255],s^=r[512|u>>8&255],s+=r[768|u&255],o^=s^t[10],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],u^=s^t[11],s=r[u>>>24],s+=r[256|u>>16&255],s^=r[512|u>>8&255],s+=r[768|u&255],o^=s^t[12],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],u^=s^t[13],s=r[u>>>24],s+=r[256|u>>16&255],s^=r[512|u>>8&255],s+=r[768|u&255],o^=s^t[14],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],u^=s^t[15],s=r[u>>>24],s+=r[256|u>>16&255],s^=r[512|u>>8&255],s+=r[768|u&255],o^=s^t[16],n[e]=u^t[I8+1],n[e+1]=o,n}function pu(n,e){for(var t=0,r=0;t<4;++t)r=r<<8|n[e]&255,e=(e+1)%n.length;return{key:r,offp:e}}function $I(n,e,t){for(var r=0,s=[0,0],o=e.length,u=t.length,h,d=0;d<o;d++)h=pu(n,r),r=h.offp,e[d]=e[d]^h.key;for(d=0;d<o;d+=2)s=cd(s,0,e,t),e[d]=s[0],e[d+1]=s[1];for(d=0;d<u;d+=2)s=cd(s,0,e,t),t[d]=s[0],t[d+1]=s[1]}function S8(n,e,t,r){for(var s=0,o=[0,0],u=t.length,h=r.length,d,p=0;p<u;p++)d=pu(e,s),s=d.offp,t[p]=t[p]^d.key;for(s=0,p=0;p<u;p+=2)d=pu(n,s),s=d.offp,o[0]^=d.key,d=pu(n,s),s=d.offp,o[1]^=d.key,o=cd(o,0,t,r),t[p]=o[0],t[p+1]=o[1];for(p=0;p<h;p+=2)d=pu(n,s),s=d.offp,o[0]^=d.key,d=pu(n,s),s=d.offp,o[1]^=d.key,o=cd(o,0,t,r),r[p]=o[0],r[p+1]=o[1]}function QI(n,e,t,r,s){var o=BC.slice(),u=o.length,h;if(t<4||t>31)if(h=Error("Illegal number of rounds (4-31): "+t),r){si(r.bind(this,h));return}else throw h;if(e.length!==ud)if(h=Error("Illegal salt length: "+e.length+" != "+ud),r){si(r.bind(this,h));return}else throw h;t=1<<t>>>0;var d,p,y=0,v;typeof Int32Array=="function"?(d=new Int32Array(GI),p=new Int32Array(KI)):(d=GI.slice(),p=KI.slice()),S8(e,n,d,p);function x(){if(s&&s(y/t),y<t)for(var N=Date.now();y<t&&(y=y+1,$I(n,d,p),$I(e,d,p),!(Date.now()-N>A8)););else{for(y=0;y<64;y++)for(v=0;v<u>>1;v++)cd(o,v<<1,d,p);var j=[];for(y=0;y<u;y++)j.push((o[y]>>24&255)>>>0),j.push((o[y]>>16&255)>>>0),j.push((o[y]>>8&255)>>>0),j.push((o[y]&255)>>>0);if(r){r(null,j);return}else return j}r&&si(x)}if(typeof r<"u")x();else for(var R;;)if(typeof(R=x())<"u")return R||[]}function h0(n,e,t,r){var s;if(typeof n!="string"||typeof e!="string")if(s=Error("Invalid string / salt: Not a string"),t){si(t.bind(this,s));return}else throw s;var o,u;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(s=Error("Invalid salt version: "+e.substring(0,2)),t){si(t.bind(this,s));return}else throw s;if(e.charAt(2)==="$")o="\0",u=3;else{if(o=e.charAt(2),o!=="a"&&o!=="b"&&o!=="y"||e.charAt(3)!=="$")if(s=Error("Invalid salt revision: "+e.substring(2,4)),t){si(t.bind(this,s));return}else throw s;u=4}if(e.charAt(u+2)>"$")if(s=Error("Missing salt rounds"),t){si(t.bind(this,s));return}else throw s;var h=parseInt(e.substring(u,u+1),10)*10,d=parseInt(e.substring(u+1,u+2),10),p=h+d,y=e.substring(u+3,u+25);n+=o>="a"?"\0":"";var v=x8(n),x=FC(y,ud);function R(N){var j=[];return j.push("$2"),o>="a"&&j.push(o),j.push("$"),p<10&&j.push("0"),j.push(p.toString()),j.push("$"),j.push(np(x,x.length)),j.push(np(N,BC.length*4-1)),j.join("")}if(typeof t>"u")return R(QI(v,x,p));QI(v,x,p,function(N,j){N?t(N,null):t(null,R(j))},r)}function R8(n,e){return np(n,e)}function C8(n,e){return FC(n,e)}const qC={setRandomFallback:_8,genSaltSync:cb,genSalt:MC,hashSync:LC,hash:UC,compareSync:v8,compare:b8,getRounds:E8,getSalt:w8,truncates:T8,encodeBase64:R8,decodeBase64:C8},D8=({dob:n,mobile:e,name:t,onChange:r,dobRef:s,mobileRef:o,nameRef:u})=>k.jsxs(ul,{className:"gap-y-2.5 flex flex-col",children:[k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"name",children:"이름"}),k.jsx(_n,{value:t,onChange:h=>r("name",h.target.value),id:"name",placeholder:"박보검",ref:u})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"생년월일",children:"생년월일"}),k.jsx(_n,{id:"생년월일",placeholder:"2004.08.09",value:n,onChange:h=>r("dob",h.target.value),ref:s})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"mobile",children:"연락처"}),k.jsx(_n,{id:"mobile",placeholder:"01012341234",value:e,onChange:h=>r("mobile",h.target.value),ref:o})]})]}),N8=({email:n,gender:e,onChange:t,con:r,onChangePw:s,pw:o})=>k.jsxs(ul,{className:"gap-y-2.5",children:[k.jsx(cn,{children:k.jsxs(gt,{className:"gap-y-1 w-25",children:[k.jsx(Dt,{htmlFor:"gender",children:"성별"}),k.jsxs(Qo,{id:"gender",value:e,onChange:u=>t("gender",u.target.value),children:[k.jsx("option",{children:"선택"}),BP.map(u=>k.jsx("option",{value:u,children:u},u))]})]})}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"email",children:"이메일"}),k.jsx(_n,{id:"email",value:n,onChange:u=>t("email",u.target.value),placeholder:"example@example.com"})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"pw",children:"비밀번호"}),k.jsx(_n,{id:"pw",value:o,onChange:u=>s("pw",u.target.value),placeholder:"* * * * * * * *",type:"password"})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"con",children:"비밀번호 확인"}),k.jsx(_n,{id:"con",value:r,onChange:u=>s("con",u.target.value),placeholder:"* * * * * * * *",type:"password"})]})]}),P8=({address:n,distance:e,onChange:t,purposes:r,addressRef:s,distanceRef:o,purposeRef:u})=>{const[h,d]=P.useState(r);return P.useEffect(()=>(t("purposes",h),()=>{t("purposes",h)}),[h,t]),k.jsxs(ul,{className:"gap-y-2.5",children:[k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"address",children:"주소"}),k.jsx(_n,{value:n,id:"address",placeholder:"서울특별시 강남구 00동",onChange:p=>t("address",p.target.value),ref:s})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"distance",children:"연애가능거리"}),k.jsxs(Qo,{ref:o,id:"distance",value:e,onChange:p=>t("distance",Number(p.target.value)),children:[k.jsx("option",{children:"선택"}),qP.map(p=>k.jsxs("option",{value:p,children:[p," km"]},p))]})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"purpose",children:"목표"}),k.jsxs(Qo,{ref:u,id:"purpose",onChange:p=>{d(y=>{const v=p.target.value;return y.find(R=>R===v)?y.filter(R=>R!==v):[v,...y]}),setTimeout(()=>{u.current&&(u.current.value="선택")},300)},children:[k.jsx("option",{children:"선택"}),HP.map(p=>k.jsx("option",{value:p,children:p},p))]}),k.jsx("ul",{className:"flex gap-y-1 flex-wrap gap-x-1",children:h==null?void 0:h.map(p=>k.jsx("li",{className:"flex",children:k.jsxs(cn,{className:"p-1 rounded bg-gray-50 gap-x-1",children:[p,k.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>d(y=>y.filter(v=>v!==p)),children:k.jsx(ub,{})})]})},p))})]})]})},k8=({appearance:n,isVegetarian:e,onChange:t,bodyRef:r,heightRef:s,weightRef:o})=>{const[u,h]=P.useState(n);return P.useEffect(()=>(t("appearance",u),()=>{t("appearance",u)}),[t,u]),k.jsxs(ul,{className:"gap-y-2.5",children:[k.jsx(cn,{children:k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"vege",children:"*식습관: 채식주의이신가요?"}),k.jsx(cn,{className:"gap-x-2.5",children:["Yes","No"].map(d=>k.jsx(Bt,{onClick:()=>t("isVegetarian",d==="Yes"),className:Fn("w-10 rounded-full hover:bg-gray-100",d==="Yes"?e&&lm:!e&&lm),children:d},d))})]})}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"height",children:"키"}),k.jsxs(cn,{className:"gap-x-2.5",children:[k.jsx(_n,{ref:s,id:"height",value:u.height.value===0?"":u.height.value,placeholder:`키를 ${u.height.isCM?"cm":"ft"}로 입력해주세요.`,onChange:d=>h(p=>({...p,height:{...p.height,value:Number(d.target.value)}})),className:"flex-1",type:"number",min:0}),k.jsx(Bt,{onClick:()=>h(d=>({...d,height:{...d.height,isCM:!d.height.isCM}})),className:lm,children:u.height.isCM?"cm":"ft"})]})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"weight",children:"몸무게"}),k.jsxs(cn,{className:"gap-x-2.5",children:[k.jsx(_n,{ref:o,min:0,id:"weight",value:u.weight.value===0?"":u.weight.value,placeholder:`몸무게를 ${u.weight.isKG?"kg":"lb"}로 입력해주세요.`,onChange:d=>h(p=>({...p,weight:{...p.weight,value:Number(d.target.value)}})),className:"flex-1",type:"number"}),k.jsx(Bt,{onClick:()=>h(d=>({...d,weight:{...d.weight,isKG:!d.weight.isKG}})),className:lm,children:u.weight.isKG?"kg":"lb"})]})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"body-type",children:"체형"}),k.jsxs(Qo,{id:"body-type",value:u.bodyType,onChange:d=>h(p=>({...p,bodyType:d.target.value})),ref:r,children:[k.jsx("option",{children:"선택"}),GP.map(d=>k.jsx("option",{value:d,children:d},d))]})]})]})},lm="bg-pink-400 text-white hover:bg-pink-400 w-10";function O8(n){return lb({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"},child:[]}]})(n)}const V8=({drinks:n,onChange:e,smokes:t,workouts:r,drinkRef:s,smokeRef:o,workoutRef:u})=>{const h=[{id:"workouts",onChange:d=>e("workouts",d),title:"운동 횟수 / 주",value:r,ref:u},{id:"drinks",onChange:d=>e("drinks",d),title:"술자리 횟수 / 주",value:n,ref:s},{id:"smokes",onChange:d=>e("smokes",d),title:"흡연 횟수 / 주",value:t,ref:o}];return k.jsx(ul,{className:"gap-y-2.5",children:h.map(d=>k.jsx(M8,{...d},d.id))})},M8=({id:n,onChange:e,value:t,title:r,ref:s})=>{const[o,u]=P.useState(!1);return k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:n,children:r}),o?k.jsxs(cn,{className:"gap-x-2.5",children:[k.jsx(_n,{id:"workout",value:t,onChange:h=>e(h.target.value),placeholder:"1주일 운동 횟수를 적어주세요.",className:"flex-1"}),k.jsx(Bt,{className:"w-10",onClick:()=>u(!1),children:k.jsx(O8,{})})]}):k.jsxs(Qo,{ref:s,id:"workout",value:t,onChange:h=>{if(h.target.value==="직접입력")return u(!0);e(h.target.value)},children:[k.jsx("option",{children:"선택"}),KP.map(h=>k.jsxs("option",{value:h,children:[h," ",h==="직접입력"?"":"/ 주"]},h))]})]})},L8=({interests:n,onChange:e,points:t,interestRef:r,pointRef:s})=>{const[o,u]=P.useState(n),[h,d]=P.useState(t);P.useEffect(()=>(e("interests",o),()=>{e("interests",o)}),[e,o]),P.useEffect(()=>(e("points",h),()=>{e("points",h)}),[e,h]);const p=P.useRef(null),y=P.useRef(null),v=P.useCallback(({target:x,value:R})=>{const N=x==="i"?QP:$P;return k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:x,children:x==="i"?"관심사":"호감 포인트"}),k.jsxs(Qo,{onChange:j=>{if(x==="i"){u(U=>{const B=j.target.value;return U.find(K=>K===B)?U.filter(K=>K!==B):[B,...U]}),setTimeout(()=>{p.current&&(p.current.value="선택")},300);return}d(U=>{const B=j.target.value;return U.find(K=>K===B)?U.filter(K=>K!==B):[B,...U]}),setTimeout(()=>{y.current&&(y.current.value="선택")},300)},ref:x==="i"?r:s,children:[k.jsx("option",{children:"선택"}),N.map(j=>k.jsx("option",{value:j,children:j},j))]}),k.jsx("ul",{className:"flex flex-wrap gap-1",children:R.map(j=>k.jsxs("li",{className:"rounded px-1 bg-gray-50 text-gray-500 text-sm flex gap-x-1",children:[j,k.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>{x==="i"?u(U=>U.filter(B=>B!==j)):d(U=>U.filter(B=>B!==j))},children:k.jsx(ub,{})})]},j))})]})},[p,y]);return k.jsxs(ul,{className:"gap-y-2.5",children:[k.jsx(v,{target:"i",value:o}),k.jsx(v,{target:"pt",value:h})]})},Un=[];for(let n=0;n<256;++n)Un.push((n+256).toString(16).slice(1));function U8(n,e=0){return(Un[n[e+0]]+Un[n[e+1]]+Un[n[e+2]]+Un[n[e+3]]+"-"+Un[n[e+4]]+Un[n[e+5]]+"-"+Un[n[e+6]]+Un[n[e+7]]+"-"+Un[n[e+8]]+Un[n[e+9]]+"-"+Un[n[e+10]]+Un[n[e+11]]+Un[n[e+12]]+Un[n[e+13]]+Un[n[e+14]]+Un[n[e+15]]).toLowerCase()}let p_;const j8=new Uint8Array(16);function z8(){if(!p_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");p_=crypto.getRandomValues.bind(crypto)}return p_(j8)}const F8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),WI={randomUUID:F8};function B8(n,e,t){var s;if(WI.randomUUID&&!n)return WI.randomUUID();n=n||{};const r=n.random??((s=n.rng)==null?void 0:s.call(n))??z8();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,U8(r)}const q8=()=>{const n=HN()[0].get("content"),e=ol(),t=P.useMemo(()=>({address:"",appearance:{bodyType:"",height:{isCM:!0,value:0},weight:{value:0,isKG:!0}},createdAt:0,distance:0,dob:"",drinks:"",workouts:"",smokes:"",email:"",gender:"",id:"",interests:[],isVegetarian:!1,mobile:"010",name:"",points:[],purposes:[]}),[]),[r,s]=P.useState(t),{address:o,appearance:u,distance:h,dob:d,drinks:p,email:y,gender:v,interests:x,isVegetarian:R,mobile:N,name:j,points:U,purposes:B,smokes:te,workouts:K}=r,ue=P.useCallback((dt,at)=>s(Gn=>({...Gn,[dt]:at})),[]),[ie,J]=P.useState({pw:"",con:""}),O=P.useCallback((dt,at)=>J(Gn=>({...Gn,[dt]:at})),[]);//! content = X
const T=P.useRef(null),w=P.useRef(null),I=P.useRef(null),D=P.useMemo(()=>({nameRef:T,dobRef:w,mobileRef:I,name:j,dob:d,mobile:N,onChange:ue}),[T,w,I,j,d,N,ue]);//! content = 0
const M=P.useRef(null),C=P.useRef(null),ke=P.useRef(null),Ue=P.useRef(null),re=P.useMemo(()=>({gender:v,email:y,...ie,onChange:ue,genderRef:M,emailRef:C,pwRef:ke,conRef:Ue,onChangePw:O}),[v,y,ie,ue,M,C,ke,Ue,O]);//! content = 1
const me=P.useRef(null),he=P.useRef(null),pe=P.useRef(null),L=P.useMemo(()=>({address:o,distance:h,purposes:B,onChange:ue,addressRef:me,distanceRef:he,purposeRef:pe}),[o,h,B,ue,me,he,pe]);//! content = 2
const W=P.useRef(null),ce=P.useRef(null),Z=P.useRef(null),fe=P.useMemo(()=>({isVegetarian:R,appearance:u,onChange:ue,heightRef:W,weightRef:ce,bodyRef:Z}),[R,u,ue,W,ce,Z]);//! content = 3
const ve=P.useRef(null),we=P.useRef(null),Be=P.useRef(null),be=P.useMemo(()=>({workouts:K,drinks:p,smokes:te,onChange:ue,workoutRef:ve,drinkRef:we,smokeRef:Be}),[K,p,te,ue,ve,we,Be]);//! content = 4
const Se=P.useRef(null),De=P.useRef(null),Pe=P.useMemo(()=>({interests:x,points:U,onChange:ue,interestRef:Se,pointRef:De}),[x,U,ue,Se,De]),Oe=P.useCallback(dt=>{setTimeout(()=>{var at,Gn,kn,dn,Ns,Ya,Xa,gr,Wr,ur,Jn,Yr,zi,Ps,Xr,Fi,Nt,Za;switch(dt){case"address":return(at=me.current)==null?void 0:at.focus();case"con":return(Gn=Ue.current)==null?void 0:Gn.focus();case"pw":return(kn=ke.current)==null?void 0:kn.focus();case"distance":return(dn=he.current)==null?void 0:dn.showPicker();case"dob":return(Ns=w.current)==null?void 0:Ns.focus();case"drinks":return(Ya=we.current)==null?void 0:Ya.showPicker();case"smokes":return(Xa=Be.current)==null?void 0:Xa.showPicker();case"workouts":return(gr=ve.current)==null?void 0:gr.showPicker();case"gender":return(Wr=M.current)==null?void 0:Wr.showPicker();case"email":return(ur=C.current)==null?void 0:ur.focus();case"mobile":return(Jn=I.current)==null?void 0:Jn.focus();case"name":return(Yr=T.current)==null?void 0:Yr.focus();case"points":return(zi=De.current)==null?void 0:zi.showPicker();case"purposes":return(Ps=pe.current)==null?void 0:Ps.showPicker();case"interests":return(Xr=Se.current)==null?void 0:Xr.showPicker();case"weight":return(Fi=ce.current)==null?void 0:Fi.focus();case"height":return(Nt=W.current)==null?void 0:Nt.focus();case"bodyType":return(Za=Z.current)==null?void 0:Za.showPicker()}},100)},[Se,De,ve,we,Be,W,ce,Z,T,w,I,M,C,ke,Ue,me,he,pe]),nt=P.useMemo(()=>xr(j,"이름을 입력해주세요."),[j]),We=P.useMemo(()=>{if(xr(d))return"생년월일을 입력해주세요.";let dt=[];if(d.includes(".")||d.includes("-")||d.includes("/"))d.includes(".")?dt=d.split("."):d.includes("-")?dt=d.split("-"):d.includes("/")&&(dt=d.split("/"));else{if(d.length!==8)return"생년월일을 확인해주세요.";const at=`${d[0]}${d[1]}${d[2]}${d[3]}`,Gn=`${d[4]}${d[5]}`,kn=`${d[6]}${d[7]}`;dt=[at,Gn,kn]}return VT(dt)?VT(dt):null},[d]),Ge=P.useMemo(()=>WP(N),[N]),Me=P.useMemo(()=>xr(v,"성별을 선택해주세요."),[v]),It=P.useMemo(()=>T0(y),[y]),ze=P.useMemo(()=>xr(ie.pw,"비밀번호를 확인해주세요."),[ie.pw]),rt=P.useMemo(()=>{if(xr(ie.con))return xr(ie.con,"비밀번호를 한 번 더 확인해주세요.");if(ze)return ze;if(ie.pw!==ie.con)return"비밀번호가 일치하지 않습니다. 다시 한 번 확인해주세요."},[ie,ze]),_t=P.useMemo(()=>xr(o,"주소를 입력해주세요."),[o]),Pn=P.useMemo(()=>h===0?"연애 가능 거리를 입력해주세요.":null,[h]),En=P.useMemo(()=>Wy(B,"목표를 선택해주세요. 다중 선택 가능합니다."),[B]),Zn=P.useMemo(()=>MT(u.height.value,"키를 확인해주세요."),[u.height.value]),it=P.useMemo(()=>MT(u.weight.value,"몸무게를 확인해주세요."),[u.weight.value]),hn=P.useMemo(()=>xr(u.bodyType,"체형을 선택해주세요."),[u.bodyType]),qe=P.useMemo(()=>xr(K,"1주일에 몇 번 운동하시나요?"),[K]),Ye=P.useMemo(()=>xr(p,"1주일에 몇 번 술자리를 가지시나요?"),[p]),Lt=P.useMemo(()=>xr(te,"1주일에 몇 번 흡연하시나요?"),[te]),Cr=P.useMemo(()=>Wy(x,"관심사를 선택해주세요. 중복 선택 가능합니다."),[x]),Dr=P.useMemo(()=>Wy(U,"호감 포인트를 선택해주세요. 중복 선택 가능합니다."),[U]),{alert:ht}=Fa(),rn=P.useCallback(async()=>{const dt=()=>e(`/signup?content=${Number(n)+1}`);if(!n)return nt?ht(nt,[{onClick:()=>Oe("name")}]):We?ht(We,[{onClick:()=>Oe("dob")}]):Ge?ht(Ge,[{onClick:()=>Oe("mobile")}]):e("/signup?content=0");switch(n){case"0":return Me?ht(Me,[{onClick:()=>Oe("gender")}]):It?ht(It,[{onClick:()=>Oe("email")}]):ze?ht(ze,[{onClick:()=>Oe("pw")}]):rt?ht(rt,[{onClick:()=>Oe("con")}]):dt();case"1":return _t?ht(_t,[{onClick:()=>Oe("address")}]):Pn?ht(Pn,[{onClick:()=>Oe("distance")}]):En?ht(En,[{onClick:()=>Oe("purposes")}]):dt();case"2":return Zn?ht(Zn,[{onClick:()=>Oe("height")}]):it?ht(it,[{onClick:()=>Oe("weight")}]):hn?ht(hn,[{onClick:()=>Oe("bodyType")}]):dt();case"3":return qe?ht(qe,[{onClick:()=>Oe("workouts")}]):Ye?ht(Ye,[{onClick:()=>Oe("drinks")}]):Lt?ht(Lt,[{onClick:()=>Oe("smokes")}]):dt();case"4":if(Cr)return ht(Cr,[{onClick:()=>Oe("interests")}]);if(Dr)return ht(Dr,[{onClick:()=>Oe("points")}]);try{const at=B8(),Gn=await qC.hash(ie.pw,12),kn={...r,id:at};await qn.collection("users").doc(at).set({...kn,password:Gn}),localStorage.setItem("uid",JSON.stringify(at)),console.log("uid stored"),ht("회원가입을 축하합니다."),e("/survey")}catch(at){return ht(at.message)}return}},[e,n,Oe,nt,ht,We,Ge,Me,It,ze,rt,_t,Pn,En,Zn,it,hn,qe,Ye,Lt,Cr,Dr,r,ie.pw]);return k.jsxs(ll,{className:"m-5 max-w-100 mx-auto",onSubmit:rn,children:[k.jsx(E0,{children:"자신에 대해 알려주세요."}),n?{0:k.jsx(N8,{...re}),1:k.jsx(P8,{...L}),2:k.jsx(k8,{...fe}),3:k.jsx(V8,{...be}),4:k.jsx(L8,{...Pe})}[n]:k.jsx(D8,{...D}),k.jsx(Bt,{type:"submit",className:"bg-pink-400 text-white mt-2.5",children:"다음"})]})},H8=()=>{const[n,e]=P.useState(""),[t,r]=P.useState(""),s=P.useRef(null),o=P.useRef(null),u=P.useCallback(p=>{setTimeout(()=>{var y,v;switch(p){case"email":return(y=s.current)==null?void 0:y.focus();default:return(v=o.current)==null?void 0:v.focus()}},100)},[s,o]),h=ol(),d=P.useCallback(async()=>{try{const v=(await qn.collection("users").where("email","==",n).get()).docs.map(N=>({...N.data()}));if(!v||v.length===0)return alert("존재하지 않는 유저입니다.");const x=v[0];if(!await qC.compare(t,x.password))return alert("비밀번호를 확인해주세요.");alert("로그인 되었습니다."),localStorage.setItem("uid",JSON.stringify(x.id)),h("/")}catch(p){return alert(p.message)}},[n,t,u,h]);return k.jsxs(ll,{className:"w-full max-w-75 mx-auto ",onSubmit:d,children:[k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"email",children:"Email"}),k.jsx(_n,{type:"email",id:"email",value:n,placeholder:"Enter Your Email",onChange:p=>e(p.target.value),ref:s})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"password",children:"Password"}),k.jsx(_n,{id:"password",value:t,placeholder:"Enter Your Password",onChange:p=>r(p.target.value),ref:o,type:"password"})]}),k.jsx(Bt,{type:"submit",className:"bg-pink-400 text-white mt-2.5",children:"로그인"})]})},HC=({onDone:n,payload:e})=>{const t=P.useMemo(()=>e||{id:"",isDone:!1,text:""},[e]),[r,s]=P.useState(t),o=P.useRef(null),u=P.useCallback(async()=>{var d,p;if(r.text.length===0)return alert("할 일을 입력하세요."),(d=o.current)==null?void 0:d.focus();if(e&&e.text===r.text)return alert("변경사항이 없습니다."),(p=o.current)==null?void 0:p.focus();const h=qn.collection("todos");try{e?(await h.doc(e.id).update(r),alert("수정되었습니다.")):(await h.add(r),alert("추가되었습니다."),s(t)),n&&n()}catch(y){return alert(y.message)}},[n,r,o,e,t]);return k.jsxs(ll,{className:"w-full max-w-75 p-5 mx-auto",onSubmit:u,children:[k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"todo",children:"할일"}),k.jsx(_n,{id:"todo",ref:o,value:r.text,onChange:h=>s(d=>({...d,text:h.target.value})),placeholder:"할 일을 추가하세요."})]}),k.jsx(Bt,{type:"submit",className:"bg-sky-500 text-white",children:e?"수정":"추가"})]})},G8=({id:n,isDone:e,text:t})=>{const[r,s]=P.useState(!1),o=P.useCallback(()=>s(p=>!p),[]),{alert:u}=Fa(),h=P.useCallback(()=>{u("삭제하시겠습니까?",[{text:"취소"},{text:"삭제",onClick:async()=>{const p=qn.collection("todos").doc(n);try{await p.delete(),u("삭제되었습니다.")}catch(y){u(y.message)}}}])},[n,u]),d=P.useCallback(async()=>{const p=qn.collection("todos").doc(n);try{const y={isDone:!e,id:"",text:""};await p.update(y),u(e?"다시 진행합니다.":"끝났습니다.")}catch(y){u(y.message)}},[n,e,u]);return r?k.jsx(HC,{payload:{id:n,isDone:e,text:t},onDone:o}):k.jsxs("div",{children:[k.jsx("p",{children:t}),k.jsx("p",{children:n}),k.jsxs(cn,{children:[k.jsx(Bt,{onClick:d,children:e?"끝":"진행중"}),k.jsx(Bt,{onClick:o,children:"수정"}),k.jsx(Bt,{onClick:h,children:"삭제"})]})]})},K8=()=>{const[n,e]=P.useState([]);return P.useEffect(()=>qn.collection("todos").onSnapshot(r=>{const s=r.docs.map(o=>({...o.data(),id:o.id}));e(s)}),[]),k.jsxs("div",{children:[k.jsx(HC,{}),k.jsx("ul",{className:"border max-w-75 p-5 mx-auto flex flex-col gap-y-2.5",children:n.map(t=>k.jsx("li",{children:k.jsx(G8,{...t})},t.id))})]})},$8=({closeFn:n,onAddSurvey:e,onUpdateSurvey:t,payload:r})=>{const s=P.useMemo(()=>r||{answers:[],createdAt:"",id:"",isMultiple:!1,options:[],q:""},[r]),[o,u]=P.useState(s),h=P.useCallback((K,ue)=>{u(ie=>({...ie,[K]:ue}))},[]),[d,p]=P.useState(""),[y,v]=P.useState(!1),x=P.useRef(null),R=P.useRef(null),N=P.useMemo(()=>xr(o.q,"질문을 확인해주세요."),[o.q]),j=P.useMemo(()=>{const K=o.options;return K.length===0?"질문의 답변을 생성해주세요.":K.length<2?"2개 이상의 답변을 생성해주세요.":null},[o.options]),U=P.useCallback(K=>{setTimeout(()=>{var ue,ie;switch(K){case"q":return(ue=x.current)==null?void 0:ue.focus();case"options":return(ie=R.current)==null?void 0:ie.focus()}},100)},[x,R]),{alert:B}=Fa(),te=P.useCallback(()=>{if(y)return;if(N)return B(N,[{onClick:()=>U("q")}]);if(j)return B(j,[{onClick:()=>U("options")}]);const K=async()=>{try{const{success:ue,message:ie}=r&&t?await t(o):await e(o);if(!ue)return B(ie);B(r?"수정했습니다.":"추가했습니다."),r||u(s),n()}catch(ue){return B(ue.message)}};o.isMultiple?K():B("정답을 복수 선택할 수 없는게 맞습니까?",[{text:"선택안함",onClick:()=>{K()}},{text:"복수선택",onClick:()=>{h("isMultiple",!0),K()}}])},[U,N,j,B,o,h,y,r,n,e,t,s]);return k.jsxs(ll,{className:" w-full p-5",onSubmit:te,children:[k.jsxs(cn,{className:"gap-x-2.5",children:[k.jsxs(gt,{className:"gap-y-1 flex-1",children:[k.jsx(Dt,{htmlFor:"q",children:"질문"}),k.jsx(_n,{id:"q",value:o.q,onChange:K=>h("q",K.target.value),placeholder:"예) 설문하고 싶은 질문을 적어주세요."})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"m",children:"중복선택여부"}),k.jsxs(Qo,{id:"m",value:o.isMultiple?"선택가능":"선택안함",onChange:K=>{h("isMultiple",K.target.value==="선택가능")},children:[k.jsx("option",{value:"선택안함",children:"선택안함"}),k.jsx("option",{value:"선택가능",children:"선택가능"})]})]})]}),k.jsxs(gt,{className:"gap-y-2.5",children:[k.jsx("ul",{className:"flex flex-col gap-y-1.5",children:o.options.map((K,ue)=>k.jsx("li",{children:k.jsxs(Bt,{className:"w-full",onClick:()=>B("삭제하시겠습니까?",[{text:"취소"},{text:"삭제",onClick:()=>u(ie=>({...ie,options:ie.options.filter(J=>J!==K)}))}]),children:[ue+1,". ",K]})},K))}),k.jsx(_n,{placeholder:"답변을 추가해주세요.(답변을 작성후 엔터를 눌러주세요.)",ref:R,onFocus:()=>v(!0),onBlur:()=>v(!1),onKeyDown:K=>{const ue=K.key;if(ue==="Enter"||ue==="Tab"){if(K.nativeEvent.isComposing||!y&&!j)return;if(xr(d))return B("옵션을 입력해주세요.",[{onClick:()=>U("options")}]);if(o.options.find(J=>J===d))return B("중복된 답변입니다.");u(J=>({...J,options:[...J.options,d]})),p(""),U("options")}},value:d,onChange:K=>p(K.target.value)}),k.jsx(Bt,{onClick:()=>U("options"),className:"bg-pink-300",children:"답변 추가"})]}),k.jsx(Bt,{type:"submit",className:"bg-pink-400 text-white",children:"질문 생성하기"})]})},Q8=()=>{const[n,e]=P.useState([]),[t,r]=P.useState(!1),s=P.useCallback(()=>r(h=>!h),[]),o=P.useMemo(()=>qn.collection("admin").doc("rYCgjCFI74hbEBEzfjKuXe4Cgcl1").collection("survey"),[]),u=P.useCallback(async h=>{try{return await o.add(h),{success:!0}}catch(d){return{success:!1,message:d.message}}},[o]);return P.useEffect(()=>o.onSnapshot(d=>{const p=d.docs.map(y=>({...y.data(),id:y.id}));e(p)}),[o]),k.jsx(k.Fragment,{children:t?k.jsx($8,{closeFn:s,onAddSurvey:u}):k.jsxs(gt,{className:"gap-y-2.5 mx-auto mt-5",children:[k.jsx(Bt,{onClick:s,children:"설문지에 질문 추가하기"}),k.jsx("ul",{children:n.map(h=>k.jsx("li",{children:k.jsxs(gt,{children:[k.jsx(E0,{children:h.q}),h.options.map(d=>k.jsx(Bt,{children:d},d))]})},h.id))})]})})},W8=()=>{const{isInitialAdmin:n,admin:e}=w0(),t=P.useMemo(()=>({email:"",password:""}),[]),[r,s]=P.useState(t),o=P.useCallback((x,R)=>{s(N=>({...N,[x]:R}))},[]),u=P.useRef(null),h=P.useRef(null),d=P.useMemo(()=>T0(r.email),[r.email]),p=P.useMemo(()=>{const x=r.password;return x.length===0?"비밀번호를 입력하세요.":x.length<6?"비밀번호가 너무 짧습니다.":x.length>18?"비밀번호가 너무 깁니다.":null},[r.password]),{alert:y}=Fa(),v=P.useCallback(async()=>{if(d)return y(d,[{onClick:()=>setTimeout(()=>{var x;(x=u.current)==null||x.focus()},100)}]);if(p)return y(p,[{onClick:()=>setTimeout(()=>{var x;(x=h.current)==null||x.focus()},100)}]);try{const x=await qp.signInWithEmailAndPassword(r.email,r.password);console.log(x),y("로그인 되었습니다.")}catch(x){return y(x.message)}},[r,u,h,d,p,y]);return k.jsx(cn,{children:e?k.jsx(Q8,{}):k.jsxs(ll,{className:"w-full max-w-75 p-5 mx-auto",onSubmit:v,children:[k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"email",children:"이메일"}),k.jsx(_n,{id:"email",type:"email",value:r.email,onChange:x=>o("email",x.target.value),placeholder:"Admin@admin.com"})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"password",children:"비밀번호"}),k.jsx(_n,{id:"password",type:"password",value:r.password,onChange:x=>o("password",x.target.value),placeholder:"Enter Admin Password"})]}),k.jsx(Bt,{className:"bg-gray-800 text-white",type:"submit",children:"관리자 계정 로그인"}),n&&k.jsx(MP,{href:"create",children:"최초 관리자 계정 생성"})]})})},Y8=({per:n,answer:e})=>{const[t,r]=P.useState(!1);return k.jsxs(cn,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:Fn("bg-gray-50 rounded p-1 gap-x-2.5 cursor-pointer"),children:[e,k.jsxs(cn,{className:Fn("justify-end text-pink-400 float-end gap-x-2.5 flex-1"),children:[k.jsx("div",{className:"flex items-center justify-end flex-1",children:k.jsx("span",{className:Fn("block bg-pink-400 rounded transition h-[50%] opacity-20",t&&"opacity-100"),style:{width:`${n}%`}})}),k.jsxs("p",{className:"text-right",children:[n.toFixed(2),"%"]})]})]})};var Im={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var X8=Im.exports,YI;function Z8(){return YI||(YI=1,function(n,e){((t,r)=>{n.exports=r()})(X8,function t(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,o=!r.document&&!!r.postMessage,u=r.IS_PAPA_WORKER||!1,h={},d=0,p={};function y(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(w){var I=ie(w);I.chunkSize=parseInt(I.chunkSize),w.step||w.chunk||(I.chunkSize=null),this._handle=new j(I),(this._handle.streamer=this)._config=I}).call(this,T),this.parseChunk=function(w,I){var D=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<D){let C=this._config.newline;C||(M=this._config.quoteChar||'"',C=this._handle.guessLineEndings(w,M)),w=[...w.split(C).slice(D)].join(C)}this.isFirstChunk&&O(this._config.beforeFirstChunk)&&(M=this._config.beforeFirstChunk(w))!==void 0&&(w=M),this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+w,M=(this._partialLine="",this._handle.parse(D,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(w=M.meta.cursor,D=(this._finished||(this._partialLine=D.substring(w-this._baseIndex),this._baseIndex=w),M&&M.data&&(this._rowCount+=M.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)r.postMessage({results:M,workerId:p.WORKER_ID,finished:D});else if(O(this._config.chunk)&&!I){if(this._config.chunk(M,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=M=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(M.data),this._completeResults.errors=this._completeResults.errors.concat(M.errors),this._completeResults.meta=M.meta),this._completed||!D||!O(this._config.complete)||M&&M.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||M&&M.meta.paused||this._nextChunk(),M}this._halted=!0},this._sendError=function(w){O(this._config.error)?this._config.error(w):u&&this._config.error&&r.postMessage({workerId:p.WORKER_ID,error:w,finished:!1})}}function v(T){var w;(T=T||{}).chunkSize||(T.chunkSize=p.RemoteChunkSize),y.call(this,T),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(I){this._input=I,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(w=new XMLHttpRequest,this._config.withCredentials&&(w.withCredentials=this._config.withCredentials),o||(w.onload=J(this._chunkLoaded,this),w.onerror=J(this._chunkError,this)),w.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var I,D=this._config.downloadRequestHeaders;for(I in D)w.setRequestHeader(I,D[I])}var M;this._config.chunkSize&&(M=this._start+this._config.chunkSize-1,w.setRequestHeader("Range","bytes="+this._start+"-"+M));try{w.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}o&&w.status===0&&this._chunkError()}},this._chunkLoaded=function(){w.readyState===4&&(w.status<200||400<=w.status?this._chunkError():(this._start+=this._config.chunkSize||w.responseText.length,this._finished=!this._config.chunkSize||this._start>=(I=>(I=I.getResponseHeader("Content-Range"))!==null?parseInt(I.substring(I.lastIndexOf("/")+1)):-1)(w),this.parseChunk(w.responseText)))},this._chunkError=function(I){I=w.statusText||I,this._sendError(new Error(I))}}function x(T){(T=T||{}).chunkSize||(T.chunkSize=p.LocalChunkSize),y.call(this,T);var w,I,D=typeof FileReader<"u";this.stream=function(M){this._input=M,I=M.slice||M.webkitSlice||M.mozSlice,D?((w=new FileReader).onload=J(this._chunkLoaded,this),w.onerror=J(this._chunkError,this)):w=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var M=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),M=I.call(M,this._start,C)),w.readAsText(M,this._config.encoding));D||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(M){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(M.target.result)},this._chunkError=function(){this._sendError(w.error)}}function R(T){var w;y.call(this,T=T||{}),this.stream=function(I){return w=I,this._nextChunk()},this._nextChunk=function(){var I,D;if(!this._finished)return I=this._config.chunkSize,w=I?(D=w.substring(0,I),w.substring(I)):(D=w,""),this._finished=!w,this.parseChunk(D)}}function N(T){y.call(this,T=T||{});var w=[],I=!0,D=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(M){this._input=M,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){D&&w.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),w.length?this.parseChunk(w.shift()):I=!0},this._streamData=J(function(M){try{w.push(typeof M=="string"?M:M.toString(this._config.encoding)),I&&(I=!1,this._checkIsFinished(),this.parseChunk(w.shift()))}catch(C){this._streamError(C)}},this),this._streamError=J(function(M){this._streamCleanUp(),this._sendError(M)},this),this._streamEnd=J(function(){this._streamCleanUp(),D=!0,this._streamData("")},this),this._streamCleanUp=J(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(T){var w,I,D,M,C=Math.pow(2,53),ke=-C,Ue=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,re=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,me=this,he=0,pe=0,L=!1,W=!1,ce=[],Z={data:[],errors:[],meta:{}};function fe(be){return T.skipEmptyLines==="greedy"?be.join("").trim()==="":be.length===1&&be[0].length===0}function ve(){if(Z&&D&&(Be("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),D=!1),T.skipEmptyLines&&(Z.data=Z.data.filter(function(Oe){return!fe(Oe)})),we()){let Oe=function(nt,We){O(T.transformHeader)&&(nt=T.transformHeader(nt,We)),ce.push(nt)};var Pe=Oe;if(Z)if(Array.isArray(Z.data[0])){for(var be=0;we()&&be<Z.data.length;be++)Z.data[be].forEach(Oe);Z.data.splice(0,1)}else Z.data.forEach(Oe)}function Se(Oe,nt){for(var We=T.header?{}:[],Ge=0;Ge<Oe.length;Ge++){var Me=Ge,It=Oe[Ge],It=((ze,rt)=>(_t=>(T.dynamicTypingFunction&&T.dynamicTyping[_t]===void 0&&(T.dynamicTyping[_t]=T.dynamicTypingFunction(_t)),(T.dynamicTyping[_t]||T.dynamicTyping)===!0))(ze)?rt==="true"||rt==="TRUE"||rt!=="false"&&rt!=="FALSE"&&((_t=>{if(Ue.test(_t)&&(_t=parseFloat(_t),ke<_t&&_t<C))return 1})(rt)?parseFloat(rt):re.test(rt)?new Date(rt):rt===""?null:rt):rt)(Me=T.header?Ge>=ce.length?"__parsed_extra":ce[Ge]:Me,It=T.transform?T.transform(It,Me):It);Me==="__parsed_extra"?(We[Me]=We[Me]||[],We[Me].push(It)):We[Me]=It}return T.header&&(Ge>ce.length?Be("FieldMismatch","TooManyFields","Too many fields: expected "+ce.length+" fields but parsed "+Ge,pe+nt):Ge<ce.length&&Be("FieldMismatch","TooFewFields","Too few fields: expected "+ce.length+" fields but parsed "+Ge,pe+nt)),We}var De;Z&&(T.header||T.dynamicTyping||T.transform)&&(De=1,!Z.data.length||Array.isArray(Z.data[0])?(Z.data=Z.data.map(Se),De=Z.data.length):Z.data=Se(Z.data,0),T.header&&Z.meta&&(Z.meta.fields=ce),pe+=De)}function we(){return T.header&&ce.length===0}function Be(be,Se,De,Pe){be={type:be,code:Se,message:De},Pe!==void 0&&(be.row=Pe),Z.errors.push(be)}O(T.step)&&(M=T.step,T.step=function(be){Z=be,we()?ve():(ve(),Z.data.length!==0&&(he+=be.data.length,T.preview&&he>T.preview?I.abort():(Z.data=Z.data[0],M(Z,me))))}),this.parse=function(be,Se,De){var Pe=T.quoteChar||'"',Pe=(T.newline||(T.newline=this.guessLineEndings(be,Pe)),D=!1,T.delimiter?O(T.delimiter)&&(T.delimiter=T.delimiter(be),Z.meta.delimiter=T.delimiter):((Pe=((Oe,nt,We,Ge,Me)=>{var It,ze,rt,_t;Me=Me||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var Pn=0;Pn<Me.length;Pn++){for(var En,Zn=Me[Pn],it=0,hn=0,qe=0,Ye=(rt=void 0,new B({comments:Ge,delimiter:Zn,newline:nt,preview:10}).parse(Oe)),Lt=0;Lt<Ye.data.length;Lt++)We&&fe(Ye.data[Lt])?qe++:(En=Ye.data[Lt].length,hn+=En,rt===void 0?rt=En:0<En&&(it+=Math.abs(En-rt),rt=En));0<Ye.data.length&&(hn/=Ye.data.length-qe),(ze===void 0||it<=ze)&&(_t===void 0||_t<hn)&&1.99<hn&&(ze=it,It=Zn,_t=hn)}return{successful:!!(T.delimiter=It),bestDelimiter:It}})(be,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess)).successful?T.delimiter=Pe.bestDelimiter:(D=!0,T.delimiter=p.DefaultDelimiter),Z.meta.delimiter=T.delimiter),ie(T));return T.preview&&T.header&&Pe.preview++,w=be,I=new B(Pe),Z=I.parse(w,Se,De),ve(),L?{meta:{paused:!0}}:Z||{meta:{paused:!1}}},this.paused=function(){return L},this.pause=function(){L=!0,I.abort(),w=O(T.chunk)?"":w.substring(I.getCharIndex())},this.resume=function(){me.streamer._halted?(L=!1,me.streamer.parseChunk(w,!0)):setTimeout(me.resume,3)},this.aborted=function(){return W},this.abort=function(){W=!0,I.abort(),Z.meta.aborted=!0,O(T.complete)&&T.complete(Z),w=""},this.guessLineEndings=function(Oe,Pe){Oe=Oe.substring(0,1048576);var Pe=new RegExp(U(Pe)+"([^]*?)"+U(Pe),"gm"),De=(Oe=Oe.replace(Pe,"")).split("\r"),Pe=Oe.split(`
`),Oe=1<Pe.length&&Pe[0].length<De[0].length;if(De.length===1||Oe)return`
`;for(var nt=0,We=0;We<De.length;We++)De[We][0]===`
`&&nt++;return nt>=De.length/2?`\r
`:"\r"}}function U(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function B(T){var w=(T=T||{}).delimiter,I=T.newline,D=T.comments,M=T.step,C=T.preview,ke=T.fastMode,Ue=null,re=!1,me=T.quoteChar==null?'"':T.quoteChar,he=me;if(T.escapeChar!==void 0&&(he=T.escapeChar),(typeof w!="string"||-1<p.BAD_DELIMITERS.indexOf(w))&&(w=","),D===w)throw new Error("Comment character same as delimiter");D===!0?D="#":(typeof D!="string"||-1<p.BAD_DELIMITERS.indexOf(D))&&(D=!1),I!==`
`&&I!=="\r"&&I!==`\r
`&&(I=`
`);var pe=0,L=!1;this.parse=function(W,ce,Z){if(typeof W!="string")throw new Error("Input must be a string");var fe=W.length,ve=w.length,we=I.length,Be=D.length,be=O(M),Se=[],De=[],Pe=[],Oe=pe=0;if(!W)return it();if(ke||ke!==!1&&W.indexOf(me)===-1){for(var nt=W.split(I),We=0;We<nt.length;We++){if(Pe=nt[We],pe+=Pe.length,We!==nt.length-1)pe+=I.length;else if(Z)return it();if(!D||Pe.substring(0,Be)!==D){if(be){if(Se=[],_t(Pe.split(w)),hn(),L)return it()}else _t(Pe.split(w));if(C&&C<=We)return Se=Se.slice(0,C),it(!0)}}return it()}for(var Ge=W.indexOf(w,pe),Me=W.indexOf(I,pe),It=new RegExp(U(he)+U(me),"g"),ze=W.indexOf(me,pe);;)if(W[pe]===me)for(ze=pe,pe++;;){if((ze=W.indexOf(me,ze+1))===-1)return Z||De.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Se.length,index:pe}),En();if(ze===fe-1)return En(W.substring(pe,ze).replace(It,me));if(me===he&&W[ze+1]===he)ze++;else if(me===he||ze===0||W[ze-1]!==he){Ge!==-1&&Ge<ze+1&&(Ge=W.indexOf(w,ze+1));var rt=Pn((Me=Me!==-1&&Me<ze+1?W.indexOf(I,ze+1):Me)===-1?Ge:Math.min(Ge,Me));if(W.substr(ze+1+rt,ve)===w){Pe.push(W.substring(pe,ze).replace(It,me)),W[pe=ze+1+rt+ve]!==me&&(ze=W.indexOf(me,pe)),Ge=W.indexOf(w,pe),Me=W.indexOf(I,pe);break}if(rt=Pn(Me),W.substring(ze+1+rt,ze+1+rt+we)===I){if(Pe.push(W.substring(pe,ze).replace(It,me)),Zn(ze+1+rt+we),Ge=W.indexOf(w,pe),ze=W.indexOf(me,pe),be&&(hn(),L))return it();if(C&&Se.length>=C)return it(!0);break}De.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Se.length,index:pe}),ze++}}else if(D&&Pe.length===0&&W.substring(pe,pe+Be)===D){if(Me===-1)return it();pe=Me+we,Me=W.indexOf(I,pe),Ge=W.indexOf(w,pe)}else if(Ge!==-1&&(Ge<Me||Me===-1))Pe.push(W.substring(pe,Ge)),pe=Ge+ve,Ge=W.indexOf(w,pe);else{if(Me===-1)break;if(Pe.push(W.substring(pe,Me)),Zn(Me+we),be&&(hn(),L))return it();if(C&&Se.length>=C)return it(!0)}return En();function _t(qe){Se.push(qe),Oe=pe}function Pn(qe){var Ye=0;return Ye=qe!==-1&&(qe=W.substring(ze+1,qe))&&qe.trim()===""?qe.length:Ye}function En(qe){return Z||(qe===void 0&&(qe=W.substring(pe)),Pe.push(qe),pe=fe,_t(Pe),be&&hn()),it()}function Zn(qe){pe=qe,_t(Pe),Pe=[],Me=W.indexOf(I,pe)}function it(qe){if(T.header&&!ce&&Se.length&&!re){var Ye=Se[0],Lt={},Cr=new Set(Ye);let Dr=!1;for(let ht=0;ht<Ye.length;ht++){let rn=Ye[ht];if(Lt[rn=O(T.transformHeader)?T.transformHeader(rn,ht):rn]){let dt,at=Lt[rn];for(;dt=rn+"_"+at,at++,Cr.has(dt););Cr.add(dt),Ye[ht]=dt,Lt[rn]++,Dr=!0,(Ue=Ue===null?{}:Ue)[dt]=rn}else Lt[rn]=1,Ye[ht]=rn;Cr.add(rn)}Dr&&console.warn("Duplicate headers found and renamed."),re=!0}return{data:Se,errors:De,meta:{delimiter:w,linebreak:I,aborted:L,truncated:!!qe,cursor:Oe+(ce||0),renamedHeaders:Ue}}}function hn(){M(it()),Se=[],De=[]}},this.abort=function(){L=!0},this.getCharIndex=function(){return pe}}function te(T){var w=T.data,I=h[w.workerId],D=!1;if(w.error)I.userError(w.error,w.file);else if(w.results&&w.results.data){var M={abort:function(){D=!0,K(w.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ue,resume:ue};if(O(I.userStep)){for(var C=0;C<w.results.data.length&&(I.userStep({data:w.results.data[C],errors:w.results.errors,meta:w.results.meta},M),!D);C++);delete w.results}else O(I.userChunk)&&(I.userChunk(w.results,M,w.file),delete w.results)}w.finished&&!D&&K(w.workerId,w.results)}function K(T,w){var I=h[T];O(I.userComplete)&&I.userComplete(w),I.terminate(),delete h[T]}function ue(){throw new Error("Not implemented.")}function ie(T){if(typeof T!="object"||T===null)return T;var w,I=Array.isArray(T)?[]:{};for(w in T)I[w]=ie(T[w]);return I}function J(T,w){return function(){T.apply(w,arguments)}}function O(T){return typeof T=="function"}return p.parse=function(T,w){var I=(w=w||{}).dynamicTyping||!1;if(O(I)&&(w.dynamicTypingFunction=I,I={}),w.dynamicTyping=I,w.transform=!!O(w.transform)&&w.transform,!w.worker||!p.WORKERS_SUPPORTED)return I=null,p.NODE_STREAM_INPUT,typeof T=="string"?(T=(D=>D.charCodeAt(0)!==65279?D:D.slice(1))(T),I=new(w.download?v:R)(w)):T.readable===!0&&O(T.read)&&O(T.on)?I=new N(w):(r.File&&T instanceof File||T instanceof Object)&&(I=new x(w)),I.stream(T);(I=(()=>{var D;return!!p.WORKERS_SUPPORTED&&(D=(()=>{var M=r.URL||r.webkitURL||null,C=t.toString();return p.BLOB_URL||(p.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(D=new r.Worker(D)).onmessage=te,D.id=d++,h[D.id]=D)})()).userStep=w.step,I.userChunk=w.chunk,I.userComplete=w.complete,I.userError=w.error,w.step=O(w.step),w.chunk=O(w.chunk),w.complete=O(w.complete),w.error=O(w.error),delete w.worker,I.postMessage({input:T,config:w,workerId:I.id})},p.unparse=function(T,w){var I=!1,D=!0,M=",",C=`\r
`,ke='"',Ue=ke+ke,re=!1,me=null,he=!1,pe=((()=>{if(typeof w=="object"){if(typeof w.delimiter!="string"||p.BAD_DELIMITERS.filter(function(ce){return w.delimiter.indexOf(ce)!==-1}).length||(M=w.delimiter),typeof w.quotes!="boolean"&&typeof w.quotes!="function"&&!Array.isArray(w.quotes)||(I=w.quotes),typeof w.skipEmptyLines!="boolean"&&typeof w.skipEmptyLines!="string"||(re=w.skipEmptyLines),typeof w.newline=="string"&&(C=w.newline),typeof w.quoteChar=="string"&&(ke=w.quoteChar),typeof w.header=="boolean"&&(D=w.header),Array.isArray(w.columns)){if(w.columns.length===0)throw new Error("Option columns is empty");me=w.columns}w.escapeChar!==void 0&&(Ue=w.escapeChar+ke),w.escapeFormulae instanceof RegExp?he=w.escapeFormulae:typeof w.escapeFormulae=="boolean"&&w.escapeFormulae&&(he=/^[=+\-@\t\r].*$/)}})(),new RegExp(U(ke),"g"));if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return L(null,T,re);if(typeof T[0]=="object")return L(me||Object.keys(T[0]),T,re)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||me),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),L(T.fields||[],T.data||[],re);throw new Error("Unable to serialize unrecognized input");function L(ce,Z,fe){var ve="",we=(typeof ce=="string"&&(ce=JSON.parse(ce)),typeof Z=="string"&&(Z=JSON.parse(Z)),Array.isArray(ce)&&0<ce.length),Be=!Array.isArray(Z[0]);if(we&&D){for(var be=0;be<ce.length;be++)0<be&&(ve+=M),ve+=W(ce[be],be);0<Z.length&&(ve+=C)}for(var Se=0;Se<Z.length;Se++){var De=(we?ce:Z[Se]).length,Pe=!1,Oe=we?Object.keys(Z[Se]).length===0:Z[Se].length===0;if(fe&&!we&&(Pe=fe==="greedy"?Z[Se].join("").trim()==="":Z[Se].length===1&&Z[Se][0].length===0),fe==="greedy"&&we){for(var nt=[],We=0;We<De;We++){var Ge=Be?ce[We]:We;nt.push(Z[Se][Ge])}Pe=nt.join("").trim()===""}if(!Pe){for(var Me=0;Me<De;Me++){0<Me&&!Oe&&(ve+=M);var It=we&&Be?ce[Me]:Me;ve+=W(Z[Se][It],Me)}Se<Z.length-1&&(!fe||0<De&&!Oe)&&(ve+=C)}}return ve}function W(ce,Z){var fe,ve;return ce==null?"":ce.constructor===Date?JSON.stringify(ce).slice(1,25):(ve=!1,he&&typeof ce=="string"&&he.test(ce)&&(ce="'"+ce,ve=!0),fe=ce.toString().replace(pe,Ue),(ve=ve||I===!0||typeof I=="function"&&I(ce,Z)||Array.isArray(I)&&I[Z]||((we,Be)=>{for(var be=0;be<Be.length;be++)if(-1<we.indexOf(Be[be]))return!0;return!1})(fe,p.BAD_DELIMITERS)||-1<fe.indexOf(M)||fe.charAt(0)===" "||fe.charAt(fe.length-1)===" ")?ke+fe+ke:fe)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!o&&!!r.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=B,p.ParserHandle=j,p.NetworkStreamer=v,p.FileStreamer=x,p.StringStreamer=R,p.ReadableStreamStreamer=N,r.jQuery&&((s=r.jQuery).fn.parse=function(T){var w=T.config||{},I=[];return this.each(function(C){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var ke=0;ke<this.files.length;ke++)I.push({file:this.files[ke],inputElem:this,instanceConfig:s.extend({},w)})}),D(),this;function D(){if(I.length===0)O(T.complete)&&T.complete();else{var C,ke,Ue,re,me=I[0];if(O(T.before)){var he=T.before(me.file,me.inputElem);if(typeof he=="object"){if(he.action==="abort")return C="AbortError",ke=me.file,Ue=me.inputElem,re=he.reason,void(O(T.error)&&T.error({name:C},ke,Ue,re));if(he.action==="skip")return void M();typeof he.config=="object"&&(me.instanceConfig=s.extend(me.instanceConfig,he.config))}else if(he==="skip")return void M()}var pe=me.instanceConfig.complete;me.instanceConfig.complete=function(L){O(pe)&&pe(L,me.file,me.inputElem),M()},p.parse(me.file,me.instanceConfig)}}function M(){I.splice(0,1),D()}}),u&&(r.onmessage=function(T){T=T.data,p.WORKER_ID===void 0&&T&&(p.WORKER_ID=T.workerId),typeof T.input=="string"?r.postMessage({workerId:p.WORKER_ID,results:p.parse(T.input,T.config),finished:!0}):(r.File&&T.input instanceof File||T.input instanceof Object)&&(T=p.parse(T.input,T.config))&&r.postMessage({workerId:p.WORKER_ID,results:T,finished:!0})}),(v.prototype=Object.create(y.prototype)).constructor=v,(x.prototype=Object.create(y.prototype)).constructor=x,(R.prototype=Object.create(R.prototype)).constructor=R,(N.prototype=Object.create(y.prototype)).constructor=N,p})}(Im)),Im.exports}var J8=Z8();const XI=ZI(J8),eU=()=>({readFile:(t,r)=>{XI.parse(t,{encoding:"UTF-8",header:!0,complete:r})},downloadFile:(t,r,s)=>{const o=XI.unparse(t,{header:!0,quotes:!0,newline:`\r
`,...s}),u=new Blob([o],{type:"text/csv;charset=utf-8;"});console.log(u,typeof u);const h=document.createElement("a");return h.href=URL.createObjectURL(u),h.download=`${r}.csv`,{downlaod:()=>h.click()}}}),tU=()=>{const[n,e]=P.useState([]),[t,r]=P.useState([]),[s,o]=P.useState([]),[u,h]=P.useState([]);P.useEffect(()=>qn.collection("surveys").onSnapshot(x=>{const R=x.docs.map(N=>({id:N.id,answers:JSON.parse(N.data().data)}));console.log(R),e(R)}),[]),P.useEffect(()=>qn.collection("admin").doc("rYCgjCFI74hbEBEzfjKuXe4Cgcl1").collection("survey").onSnapshot(x=>{const R=x.docs.map(N=>({...N.data(),id:N.id}));r(R)}),[]),P.useEffect(()=>{const v=Array.from({length:t.length},(j,U)=>Array.from({length:t[U].options.length},()=>0)),x=[];t.map((j,U)=>{n.map((B,te)=>{const K={질문:te===0?j.q:"",중복선택:j.isMultiple?"가능":"",답변:B.answers[U],응답자아이디:B.id};x.push(K),j.options.map((ue,ie)=>{var J;(J=B.answers[U])==null||J.map(O=>{O===ue&&(v[U][ie]+=1)})})})}),h(x);const R=v.map(j=>j.reduce((U,B)=>U+B,0)),N=v.map((j,U)=>{const B=R[U];return j.map(te=>te/B*100)});o(N)},[t,n]);const{alert:d}=Fa(),{downloadFile:p}=eU(),y=P.useCallback(()=>{d("설문응답 내역을 다운로드 하시겠습니까?",[{text:"취소"},{text:"다운로드",onClick:()=>p(u,"설문지 응답 결과").downlaod()}])},[d,u,p]);return k.jsx("div",{children:k.jsxs("ul",{className:"flex flex-col gap-y-5 max-w-100 mx-auto mt-5",children:[k.jsx(cn,{className:" justify-end",children:k.jsxs(Bt,{onClick:y,className:"px-2.5 gap-x-1.5 bg-pink-400 text-white hover:shadow-md",children:["다운로드 ",k.jsx(f8,{className:"text-2xl"})]})}),s.map((v,x)=>k.jsxs("li",{className:"flex flex-col gap-y-2.5",children:[k.jsxs(cn,{className:"flex-wrap items-center gap-x-2.5",children:[k.jsxs("p",{className:"text-xl font-bold",children:["Q",x+1,". ",t[x].q]}),k.jsx("p",{className:"text-xs text-gray-500",children:t[x].isMultiple&&"(중복선택가능)"})]}),k.jsx("ul",{className:"flex flex-col gap-y-1",children:t[x].options.map((R,N)=>k.jsx("li",{children:k.jsx(Y8,{per:v[N],answer:R})},N))})]},x))]})})},nU=({answers:n,isMultiple:e,options:t,q:r,index:s,onChange:o})=>{const[u,h]=P.useState(n),d=P.useCallback(p=>{h(y=>{let v=[...y];return v.find(R=>R===p)&&(v=v.filter(R=>R!==p)),e?v.push(p):v=[p],o(v),v})},[e,o]);return k.jsxs(gt,{className:"gap-y-1",children:[k.jsxs(cn,{className:"flex-wrap",children:[k.jsxs(PT,{className:"font-bold",children:["Q",s+1,". ",r]}),k.jsx(PT,{className:"text-gray-500 text-xs",children:e&&"(중복선택 가능)"})]}),k.jsx("ul",{className:"flex flex-col gap-y-1",children:t.map(p=>{const y=u.find(v=>v===p);return k.jsx("li",{children:k.jsx(Bt,{onClick:()=>d(p),className:Fn("p-1 h-auto text-xs text-gray-600 px-2",y&&"bg-pink-400 text-white"),children:p})},p)})})]})},rU=()=>{const[n,e]=P.useState([]);P.useEffect(()=>qn.collection("admin").doc("rYCgjCFI74hbEBEzfjKuXe4Cgcl1").collection("survey").onSnapshot(d=>{const p=d.docs.map(y=>({...y.data(),id:y.id}));e(p)}),[]);const{user:t}=w0(),[r,s]=P.useState(!0);P.useEffect(()=>{if(t)return qn.collection("surveys").where("id","==",t.id).onSnapshot(d=>{d.docs.map(y=>({...y.data()})).length===0?s(!1):s(!0)})},[t]);const o=ol(),u=P.useCallback(async()=>{if(t)try{const h=qn.collection("surveys").doc(t.id),d=[];n.map(y=>d.push(y.answers));const p=JSON.stringify(d);await h.set({data:p,id:t.id}),alert("제출되었습니다."),o("/")}catch(h){return alert(h.message)}},[n,t,o]);return r?k.jsx("h1",{children:"이미 설문에 응답하셨습니다."}):k.jsxs(ll,{className:" w-full max-w-100 mx-auto p-5",onSubmit:u,children:[n.map((h,d)=>k.jsx(nU,{index:d,...h,onChange:p=>e(y=>y.map(v=>v.id===h.id?{...v,answers:p}:v))},d)),k.jsx(Bt,{type:"submit",className:"mt-2.5 bg-pink-400 text-white",children:"제출하기"})]})},iU=()=>{const n=ol(),e=P.useMemo(()=>({email:"",password:""}),[]),[t,r]=P.useState(e),s=P.useCallback((v,x)=>{r(R=>({...R,[v]:x}))},[]),o=P.useRef(null),u=P.useRef(null),h=P.useMemo(()=>T0(t.email),[t.email]),d=P.useMemo(()=>{const v=t.password;return v.length===0?"비밀번호를 입력하세요.":v.length<6?"비밀번호가 너무 짧습니다.":v.length>18?"비밀번호가 너무 깁니다.":null},[t.password]),{alert:p}=Fa(),y=P.useCallback(async()=>{if(h)return p(h,[{onClick:()=>setTimeout(()=>{var v;(v=o.current)==null||v.focus()},100)}]);if(d)return p(d,[{onClick:()=>setTimeout(()=>{var v;(v=u.current)==null||v.focus()},100)}]);//! test@test.com
if(t.email!=="test@test.com")return p("관리자 계정 아이디 안좋음",[{onClick:()=>r(v=>({...v,email:"test@test.com"}))}]);try{const v=await qp.createUserWithEmailAndPassword(t.email,t.password);v&&v.user&&(await qn.collection("admin").doc(v.user.uid).set({email:t.email,uid:v.user.uid}),p("관리자 계정이 추가되었습니다."),n("/admin"))}catch(v){return p(v.message)}},[t,o,u,h,d,p,n]);return k.jsx(cn,{children:k.jsxs(ll,{className:"w-full max-w-75 p-5 mx-auto",onSubmit:y,children:[k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"email",children:"이메일"}),k.jsx(_n,{id:"email",type:"email",value:t.email,onChange:v=>s("email",v.target.value),placeholder:"Admin@admin.com"})]}),k.jsxs(gt,{className:"gap-y-1",children:[k.jsx(Dt,{htmlFor:"password",children:"비밀번호"}),k.jsx(_n,{id:"password",type:"password",value:t.password,onChange:v=>s("password",v.target.value),placeholder:"Enter Admin Password"})]}),k.jsx(Bt,{className:"bg-gray-800 text-white",type:"submit",children:"관리자 계정 생성"})]})})},sU=()=>{const{isInitialAdmin:n,user:e,admin:t}=w0();return k.jsxs(k.Fragment,{children:[k.jsx(m8,{}),k.jsx(jN,{children:k.jsxs(mN,{children:[k.jsx(ri,{path:"*",element:k.jsx("h1",{children:"Page Not Found return home"})}),k.jsx(ri,{path:"/",Component:p8}),k.jsx(ri,{path:"signup",Component:q8}),k.jsx(ri,{path:"signin",Component:H8}),k.jsx(ri,{path:"crud",Component:K8}),e&&k.jsx(ri,{path:"survey",Component:rU}),k.jsxs(ri,{path:"admin",children:[k.jsx(ri,{index:!0,Component:W8}),t&&k.jsx(ri,{path:"stats",Component:tU}),n&&k.jsx(ri,{path:"create",Component:iU})]})]})})]})};xD.createRoot(document.getElementById("root")).render(k.jsx(P.StrictMode,{children:k.jsx(s8,{children:k.jsx(sU,{})})}));
